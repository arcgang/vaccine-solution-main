{"version":3,"sources":["webpack:///./src/pages/use-cases/order/index.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"1a71ee95-1e323ec3f89490898f33.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/vaccine-solution-main/vaccine-solution-main/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`The vaccine order fullfilment is a complex problem to address as we need to optimize the shipment plan according to the demand and the constraints. A deep dive to the Operational Research problem is described in `}<a parentName=\"p\" {...{\n        \"href\": \"/vaccine-solution-main/solution/orderms/voro-solution/\"\n      }}>{`this note`}</a>{`.\nIn this use case / lab you will learn how to integrate with Kafka using the Outbox pattern, and Debezium to capture change to the postgresql table, how to integrate an Operational Research / advanced analytics component in an event-driven architecture which acts on new order events, to improve the shipment plan, how to deploy those component using GitOps approach, and finally how to use Quarkus and microprofile reactive messaging.`}</p>\n    <h2>{`Target Audiences`}</h2>\n    <p>{`You will be greatly interested by the subjects addressed in this use case if you are:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`an architect,`}</strong>{` as you will get a deeper understanding on how all the components work together, and how to adopt event-driven approach to this problem which is mostly seen as a batch processing in traditional It architecture.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`a developer,`}</strong>{` as you will get a broader view of the solution end-to-end, as well as insight into practices to reuse during your future implementations.`}</li>\n    </ul>\n    <h2>{`The what`}</h2>\n    <p>{`In this scenario we want to demonstrate the order entry with an event-driven microservice, and the integration with an event driven linear programming stateful function. The scenario addresses the following features:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Create Order(s) using a simple user interface as an order manager will do after interacting with the country health care request.`}</li>\n      <li parentName=\"ul\">{`Validate the `}<a parentName=\"li\" {...{\n          \"href\": \"https://ibm-cloud-architecture.github.io/refarch-eda/patterns/intro/#transactional-outbox\"\n        }}>{`transactional outbox pattern`}</a>{` works to get OrderCreated, OrderUpdated or OrderCancelled Events created into a dedicated table in Postgresql`}</li>\n      <li parentName=\"ul\">{`Validate how `}<a parentName=\"li\" {...{\n          \"href\": \"https://debezium.io/documentation/reference/1.4/connectors/postgresql.html\"\n        }}>{`Debezium Change Data Capture`}</a>{` for Postgresql as a Kafka connector, produces OrderEvents from the table to Kafka `}<inlineCode parentName=\"li\">{`orders`}</inlineCode>{` topic.`}</li>\n      <li parentName=\"ul\">{`Integrate with the `}<a parentName=\"li\" {...{\n          \"href\": \"/vaccine-solution-main/design/voro/\"\n        }}>{`Shipment plan optimization`}</a>{` to get the updated shipment plan as events.`}</li>\n    </ul>\n    <h2>{`Components involved in this use case`}</h2>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Kafka Cluster using either `}<a parentName=\"p\" {...{\n            \"href\": \"https://strimzi.io/\"\n          }}>{`Strimzi`}</a>{` or `}<a parentName=\"p\" {...{\n            \"href\": \"https://ibm.github.io/event-streams/\"\n          }}>{`IBM Event Streams`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"https://kafka.apache.org/documentation/#connect\"\n          }}>{`Kafka Connect`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"https://www.postgresql.org/\"\n          }}>{`PostgreSQL Database`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"https://debezium.io/documentation/reference/connectors/postgresql.html\"\n          }}>{`Debezium CDC connector for PostgreSQL DB`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg\"\n          }}>{`Vaccine Order Manager Service`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-optimizer\"\n          }}>{`Vaccine Order Reefer Optimization Service`}</a></p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"777px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"54.861111111111114%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACZUlEQVQoz3VTTU8UQRCdH+Bf0EQvXr3qxV9AwtHEeEOMBw+aaDxoPCjoxRgOxotGRQUBY4DoBUiICjFRd1k2fizDQgI7u+4uzA473/35rO51vdmTN13TXfXqdVWPo5IYPIrAwh6MrbP0v1BpAuQpsm6IxY/rmF8o4N1SEe+XCoiCLpw4CPHiWRnPn6wRSpgYL6PToUCtkecCjEkLLiRyxhEnKczY9nwcHhjFyaGHOHX+EQ6dvoFf7i6c0O9iaqKE6VdFvJlcw+zMOoIggSZCzgSklHY+oOyccyLn0Eqj7YcYuj2Jy/ff4urYHM5cf4pGow0HkkELTmpyxHEGRkFSSUsklYKmR5Cdp7xHzoVV6DUDnDj7AEcGRnB08C6ODY6iVmvC2dj2sfqzg4yO1B9ZRsSUQEllySxRzv/ZoCSt/S7O3XyJCyNTuHhvBoNXHuN3Yw/O8FgRxy+t4IvrI00SHEQpEiKstzpotgNSKRDSehBQsyDxY8tDfZ9sLS2UOY0ySeib5XDGF7Zxa3oLBbeF4TuvcW1sHu5OA9PL3/CpvGkVz62Wsby2YW0/YuimypIJ1TuVJhhilWdUQ8HsoiIlbT9ARF2st/Yw++ErSps7VNsUi58LWCl+RxiGxtNCiF6tlVY99AmVqRW5CGpALqSdD6IY+9TVerOJymYVFdeF12ggTDOk1GWDOGPW1zTNvonUHlnFVA/OIIk4ienCEhg5p3ECb7eGes1D1a3Crbh2LyfSLCFiuhEmRnMSRPGa1GmqtaOj0N5+TX+M+gsZ92ZqNdkRvGoVe7VdaPLr7xn0Y8y6NsLI/gNb3yd/iqadZQAAAABJRU5ErkJggg==')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"vaccine order 1\",\n            \"title\": \"vaccine order 1\",\n            \"src\": \"/vaccine-solution-main/static/f687ca251b28950f8caa6b410572107d/c53c3/vaccine-order-1.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/f687ca251b28950f8caa6b410572107d/7fc1e/vaccine-order-1.png 288w\", \"/vaccine-solution-main/static/f687ca251b28950f8caa6b410572107d/a5df1/vaccine-order-1.png 576w\", \"/vaccine-solution-main/static/f687ca251b28950f8caa6b410572107d/c53c3/vaccine-order-1.png 777w\"],\n            \"sizes\": \"(max-width: 777px) 100vw, 777px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n    </ul>\n    <p><em parentName=\"p\">{`The blockchain integration is not done yet`}</em></p>\n    <p>{`To have a deeper understanding of the order service read `}<a parentName=\"p\" {...{\n        \"href\": \"/vaccine-solution-main/solution/orderms/#overview\"\n      }}>{`this overview section`}</a>{`. For the Vaccine order reefer optimization service `}<a parentName=\"p\" {...{\n        \"href\": \"/vaccine-solution-main/design/voro/\"\n      }}>{`the design article`}</a>{` details the optimization approach, while the `}<a parentName=\"p\" {...{\n        \"href\": \"/vaccine-solution-main/solution/orderms/voro-solution/#overview\"\n      }}>{`solution article`}</a>{` goes over the service implementation details.`}</p>\n    <h2>{`Deploy to OpenShift`}</h2>\n    <p>{`As already said, we need an OpenShift cluster to deploy this Vaccine Order Management and Optimization use case to. We are providing two approaches to deploy the use case:`}</p>\n    <ol>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#one-click-deploy\"\n        }}>{`One Click Deploy`}</a>{` - where we have automated the deployment of all the pieces making up this use case. We are using the open source Strimzi operator to get a Kafka cluster deployed and the open source Apicurio Registry to get a schema registry deployed.`}</li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#deploy-the-solution-manually\"\n        }}>{`Manual Deploy`}</a>{` - where we will drive you through all of the steps required to get all of the different pieces making up this use case deployed. This approach relies on the availability of an IBM Event Streams instance beforehand.`}</li>\n    </ol>\n    <h3>{`Pre-requisites`}</h3>\n    <ol>\n      <li parentName=\"ol\">{`You need access to an OpenShift Cluster `}<strong parentName=\"li\">{`with administrator access`}</strong>{`. You can use your own OpenShift cluster or use the `}<a parentName=\"li\" {...{\n          \"href\": \"https://developer.ibm.com/openlabs/openshift\"\n        }}>{`IBM OpenLabs`}</a>{` to gain access to a 4h free OpenShift Cluster (if you do so, please use `}<inlineCode parentName=\"li\">{`lab 6`}</inlineCode>{`).`}</li>\n      <li parentName=\"ol\">{`You would need the following tools installed on your latpop:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Git client`}</li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"https://cloud.ibm.com/docs/openshift?topic=openshift-openshift-cli\"\n            }}>{`OpenShift CLI`}</a>{` on your local environment.`}</li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"https://stedolan.github.io/jq/\"\n            }}>{`jq`}</a>{` on your local environment.`}</li>\n        </ul>\n      </li>\n    </ol>\n    <h2>{`One Click Deploy`}</h2>\n    <p>{`This section will explain how to get the Vaccine Order Management and Optimization use case deployed following a one-click deployment approach.`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Pull down the Vaccine GitOps GitHub repository:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`git clone https://github.com/ibm-cloud-architecture/vaccine-gitops\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Change directory to `}<inlineCode parentName=\"p\">{`vaccine-gitops/scripts`}</inlineCode></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`cd vaccine-gitops/scripts\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Open the `}<inlineCode parentName=\"p\">{`env-strimzi.sh`}</inlineCode>{` and make sure to provide values for:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`OCP_ADMIN_USER`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`OCP_ADMIN_PASSWORD`}</inlineCode>{` which correspond to your OpenShift cluster credentials. `}<strong parentName=\"li\">{`IMPORTANT:`}</strong>{` We recommend you to log into your OpenShift cluster from the same terminal you are going to later execute the one-click-deployment script so that you dont need to share your OpenShift cluster credentials.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`KAFKA_CLUSTER_NAME`}</inlineCode>{` which is the name you want to give to the Kafka cluster that will get deployed. It defaults to `}<inlineCode parentName=\"li\">{`vaccine-kafka`}</inlineCode>{` and we highly recommend you to leave the default. Otherwise, you would need to modify some yaml deployment scripts…`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`APICURIO_REGISTRY_NAME`}</inlineCode>{` which is the name you want to give to the Apicurio Registry that will get deployed. It defaults to `}<inlineCode parentName=\"li\">{`vaccine-apicurioregistry`}</inlineCode>{` and we highly recommend you to leave the default. Otherwise, you would need to modify some yaml deployment scripts…`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`YOUR_PROJECT_NAME`}</inlineCode>{` which is the name of the OpenShift project the one-click-deployment script will create for you to get all the components of this Vaccine Order Management and Optimization use case deployed into. It defaults to `}<inlineCode parentName=\"li\">{`vaccine-solution`}</inlineCode>{`.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Log into your OpenShift cluster from your terminal (again, we recommend to do this instead of sharing your OpenShift cluster credentials in any script)`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Execute the `}<inlineCode parentName=\"p\">{`deployOrderOptimWithStrimzi.sh`}</inlineCode>{` one-click-deployment script`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`./deployOrderOptimWithStrimzi.sh [--skip-login]\n`}</code></pre>\n        <p parentName=\"li\">{`where you would add the `}<inlineCode parentName=\"p\">{`--skip-login`}</inlineCode>{` flag if you previously logged into your OpenShift cluster.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`After some time (can easily take up to more than 15 min) you should see the following message:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`********************\n** CONGRATULATIONS!! You have successfully deployed the Vaccine Order Managemente and Optimization use case.\n********************\n\nYou can now jump to the demo section for this use case at https://ibm-cloud-architecture.github.io/vaccine-solution-main/use-cases/order/#demo\n`}</code></pre>\n        <p parentName=\"li\">{`(`}{`*`}{`)We suggest to open another terminal and execute `}<inlineCode parentName=\"p\">{`watch -n 5 oc get pods`}</inlineCode>{` to follow the deployment status of the Vaccine Order Management and Optimization components.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`If you don’t see that success message, please checkout the logs to see where it failed.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`If you execute `}<inlineCode parentName=\"p\">{`oc get pods`}</inlineCode>{` you should see the following pods running on your system:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`NAME                                                 READY   STATUS      RESTARTS   AGE\napicurio-registry-operator-698958454b-frhlk          1/1     Running     0          7m26s\npostgres-db-postgresql-0                             1/1     Running     0          2m55s\nvaccine-apicurioregistry-deployment-m9lnl-1-deploy   0/1     Completed   0          6m\nvaccine-apicurioregistry-deployment-m9lnl-1-kbbvf    1/1     Running     0          5m58s\nvaccine-connect-cluster-connect-7b5b4b85d8-bzmwt     1/1     Running     0          93s\nvaccine-kafka-cruise-control-77c8568f48-jp4gt        2/2     Running     0          9m10s\nvaccine-kafka-entity-operator-dc999bff6-k4tbt        3/3     Running     0          9m36s\nvaccine-kafka-kafka-0                                1/1     Running     0          10m\nvaccine-kafka-kafka-1                                1/1     Running     0          10m\nvaccine-kafka-kafka-2                                1/1     Running     0          10m\nvaccine-kafka-zookeeper-0                            1/1     Running     0          10m\nvaccine-kafka-zookeeper-1                            1/1     Running     0          10m\nvaccine-kafka-zookeeper-2                            1/1     Running     0          10m\nvaccine-order-optimizer-7d5c8d8445-q8gv5             1/1     Running     0          18s\nvaccineorderms-87b5bffb9-6nr9m                       1/1     Running     0          2m35s\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Jump to the `}<a parentName=\"p\" {...{\n            \"href\": \"#demo\"\n          }}>{`Demo`}</a>{` section to see how the application works and what’s behind the scenes.`}</p>\n      </li>\n    </ol>\n    <p>{`To clean up your OpenShift cluster and remove all the components the one-click-deployment script created, you just need to execute the `}<inlineCode parentName=\"p\">{`deleteOrderOptimWithStrimzi.sh`}</inlineCode>{` script (make sure you have previously logged into your OpenShift cluster)`}</p>\n    <h2>{`Deploy the solution manually`}</h2>\n    <p>{`In this section we are going to see how to deploy all the components of this use case manually on an OpenShift cluster. `}<strong parentName=\"p\">{`IMPORTANT:`}</strong>{` We asume IBM Event Streams has been deployed onto this cluster.`}</p>\n    <p>{`This is the summary of activities for deploying the use case manually:`}</p>\n    <ol>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#pull-down-github-repositories\"\n        }}>{`Pull down related GitHub repositories`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#prepare-your-openshift-and-kafka-environments\"\n        }}>{`Prepare your OpenShift and Kafka environments`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#deploy-postgres\"\n        }}>{`Deploy Postgres`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#deploy-the-vaccine-order-manager-microservice\"\n        }}>{`Deploy the Vaccine Order Manager microservice`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#deploy-kafka-connect\"\n        }}>{`Deploy Kafka Connect`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#deploy-debezium-cdc-postgres-connector\"\n        }}>{`Deploy Debezium CDC Postgres connector`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#deploy-the-vaccine-order-optimizer-microservice\"\n        }}>{`Deploy the Vaccine Order Optimizer microservice`}</a></li>\n    </ol>\n    <h3>{`Pull down GitHub repositories`}</h3>\n    <p>{`We are going to use three GitHub repositories for manually deploying the Order Management and Optimization use case. These are:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Vaccine Order Manager for Postgres component:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg\"\n            }}>{`https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg`}</a></li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">{`Vaccine Order Optimizer component:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-optimization\"\n            }}>{`https://github.com/ibm-cloud-architecture/vaccine-order-optimization`}</a></li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">{`Vaccine GitOps:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-gitops\"\n            }}>{`https://github.com/ibm-cloud-architecture/vaccine-gitops`}</a></li>\n        </ul>\n      </li>\n    </ul>\n    <p>{`To pull down the three GitHub repositories execute in your terminal:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{` git clone https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg\n git clone https://github.com/ibm-cloud-architecture/vaccine-order-optimization\n git clone https://github.com/ibm-cloud-architecture/vaccine-gitops\n`}</code></pre>\n    <h3>{`Prepare your OpenShift and Kafka Environments`}</h3>\n    <p>{`In this section we are going to prepare our OpenShift and Kafka environments with all the pre-requisites needed for successfully deploying the following components that make up the Vaccine Order and Optimization use case:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Vaccine Order Manager for Postgres component.`}</li>\n      <li parentName=\"ul\">{`Vaccine Order Optimizer component.`}</li>\n      <li parentName=\"ul\">{`Kafka Connect.`}</li>\n      <li parentName=\"ul\">{`The Debezium CDC for Postgres connector.`}</li>\n      <li parentName=\"ul\">{`Postgres.`}</li>\n    </ul>\n    <p>{`This preparation will consist of creating configmaps and secrets that will hold infrastructure configuration required by the above components for their well functioning as well as creating the needed resources within our Kafka environment.`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`OpenShift project and service account`}</strong></p>\n        <p parentName=\"li\">{`We are going to create a new OpenShift project in which we will deploy everything we need to get this order management and optimization use case working (except IBM Event Streams which we assume that has already been deployed in some other OpenShift project within this OpenShift cluster). Our new OpenShift project will be called `}<inlineCode parentName=\"p\">{`vaccine-omo`}</inlineCode>{` (that stands for vaccine order management and optimization) but you can choose any of your likes. To create the project, execute in your terminal (after having logged onto your OpenShift cluster):`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc new-project vaccine-omo\n`}</code></pre>\n        <p parentName=\"li\">{`Also, we are going to create a new service account within our OpenShift project that provides an identity for processes that run in a Pod. The reason for this is that the postgres deployment in the following section requires certain privileges that aren’t granted with the default service account when a new OpenShift project is created and which will be used when you deploy anything into it unless you specify otherwise.`}</p>\n        <p parentName=\"li\">{`For creating the new service account specific for our vaccine order management and optimization use case, execute in the terminal:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`cat <<EOF | oc apply -f -\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: vaccine-runtime\nEOF\n`}</code></pre>\n        <p parentName=\"li\">{`Finally, we need to give that service account, that will be used to provide an identity to the processes running in the pods we deploy within this service account of our OpenShift project, the appropriate privileges the postgres processes need in order to successfully carry out the operations to get deployed and functioning in OpenShift. To give those privileges execute:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc adm policy add-scc-to-user anyuid -z <SERVICE_ACCOUNT_NAME> -n <NAMESPACE>\n`}</code></pre>\n        <p parentName=\"li\">{`where`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<SERVICE_ACCOUNT_NAME>`}</inlineCode>{` is the service account we have created earlier (`}<inlineCode parentName=\"li\">{`vaccine-runtime`}</inlineCode>{`)`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<NAMESPACE>`}</inlineCode>{` is the namespace where the service account is in (`}<inlineCode parentName=\"li\">{`vaccine-omo`}</inlineCode>{`)`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Kafka TLS Certificate`}</strong></p>\n        <p parentName=\"li\">{`This is the required server-side public TLS certificate of your IBM Event Streams instance to establish secure communication. This is provided by IBM Event streams in a Kubernetes secret we are going to copy from the OpenShift project where your IBM Event Streams instance is deployed into our Vaccine Order Management and Optimization project. We are also going to rename that secret to what the deployment scripts for the components in this Vaccine Order Management and Optmitization use case expect which is `}<inlineCode parentName=\"p\">{`kafka-cluster-ca-cert`}</inlineCode>{`.`}</p>\n        <p parentName=\"li\">{`In order to create the `}<inlineCode parentName=\"p\">{`kafka-cluster-ca-cert`}</inlineCode>{` secret containing the server-side public TLS certificate of your IBM Event Streams instance, execute the following command:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc get secret <CLUSTER_NAME>-cluster-ca-cert -n <EVENTSTREAMS_NS> -o json | jq -r '.metadata.name=\"kafka-cluster-ca-cert\"' | jq --arg project_name \"<PROJECT_NAME>\" -r '.metadata.namespace=$project_name' | oc apply -f -\n`}</code></pre>\n        <p parentName=\"li\">{`where`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<CLUSTER_NAME>`}</inlineCode>{` is the name of your IBM Event Streams instance. If you don’t remember your IBM Event Streams instance name you can find it out executing:`}\n            <pre parentName=\"li\"><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`oc get EventStreams -n <EVENTSTREAMS_NS>\n`}</code></pre>\n          </li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<EVENTSTREAMS_NS>`}</inlineCode>{` is the name of the OpenShift project/namespace were your IBM Event Streams is deployed in.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<PROJECT_NAME>`}</inlineCode>{` is the name of the OpenShift project where you are deploying this vaccine order management and optimization use case into.`}</li>\n        </ul>\n        <p parentName=\"li\">{`You can verify that a new secret called `}<inlineCode parentName=\"p\">{`kafka-cluster-ca-cert`}</inlineCode>{` exists in the OpenShift project where you are deploying the vaccine order management and optimization use case by executing:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc get secrets\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Kafka Authentication`}</strong></p>\n        <p parentName=\"li\">{`IBM Event Streams has both `}<a parentName=\"p\" {...{\n            \"href\": \"https://ibm.github.io/event-streams/installing/configuring/#kafka-access\"\n          }}>{`internal and external configurable Kafka listeners`}</a>{`. Both require the server-side public TLS certificate to establish secure communication. These listeners can also be configured to enforce SCRAM-SHA-512 (username and password) or Mutual TLS (user certificates) Kafka credentials for authentication. In this tutorial, we expect your IBM Event Streams to be deployed with the `}<em parentName=\"p\">{`external`}</em>{` kafka listener to enforce SCRAM-SHA-512 authentication and the internal `}<em parentName=\"p\">{`tls`}</em>{` kafka listener to enforce Mutual TLS authentication. You can check whether your IBM Event Streams is configured in such a way by executing:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc get EventStreams <CLUSTER_NAME> -n <EVENTSTREAMS_NS> -o json | jq .spec.strimziOverrides.kafka.listeners\n`}</code></pre>\n        <p parentName=\"li\">{`where`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<CLUSTER_NAME>`}</inlineCode>{` is the name of your IBM Event Streams instance. If you don’t remember your IBM Event Streams instance name you can find it out executing:`}\n            <pre parentName=\"li\"><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`oc get EventStreams -n <EVENTSTREAMS_NS>\n`}</code></pre>\n          </li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<EVENTSTREAMS_NS>`}</inlineCode>{` is the name of the OpenShift project/namespace were your IBM Event Streams is deployed in.`}</li>\n        </ul>\n        <p parentName=\"li\">{`The output you should get would be:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-json\"\n          }}>{`{\n  \"external\": {\n    \"authentication\": {\n      \"type\": \"scram-sha-512\"\n    },\n    \"type\": \"route\"\n  },\n  \"tls\": {\n    \"authentication\": {\n      \"type\": \"tls\"\n    }\n  }\n}\n`}</code></pre>\n        <p parentName=\"li\">{`If you don’t have your IBM Event Streams instance configured in such a way, review the documentation `}<a parentName=\"p\" {...{\n            \"href\": \"https://ibm.github.io/event-streams/installing/configuring/#kafka-access\"\n          }}>{`here`}</a>{`.`}</p>\n        <p parentName=\"li\">{`We are now going to create the corresponding SCRAM-SHA-512 and Mutual TLS authentication Kafka credentials that will be needed by the different components of this Vaccine Order Management and Optimization use case.`}</p>\n        <p parentName=\"li\"><strong parentName=\"p\">{`Mutual TLS certificate`}</strong></p>\n        <p parentName=\"li\">{`In order to generate a set of TLS credentials to authenticate against the internal `}<em parentName=\"p\">{`tls`}</em>{` Kafka listener (which will create a Kafka User resource behind the scenes)`}</p>\n        <ol parentName=\"li\">\n          <li parentName=\"ol\">{`Go to your IBM Event Streams user interface dashboard. You can find where it is by executing:`}\n            <pre parentName=\"li\"><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`oc get routes -n <EVENTSTREAMS_NS> | grep ui\n`}</code></pre>\n          </li>\n          <li parentName=\"ol\">{`Click on the `}<inlineCode parentName=\"li\">{`Connect to this cluster`}</inlineCode>{` option\n`}<span parentName=\"li\" {...{\n              \"className\": \"gatsby-resp-image-wrapper\",\n              \"style\": {\n                \"position\": \"relative\",\n                \"display\": \"block\",\n                \"marginLeft\": \"auto\",\n                \"marginRight\": \"auto\",\n                \"maxWidth\": \"1152px\"\n              }\n            }}>{`\n      `}<span parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-background-image\",\n                \"style\": {\n                  \"paddingBottom\": \"79.8611111111111%\",\n                  \"position\": \"relative\",\n                  \"bottom\": \"0\",\n                  \"left\": \"0\",\n                  \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACeElEQVQ4y21TwU7bQBDN55T/gIggyCG3/kW/pT/Raw+9VFUv7YkilUiRSCkEURKS2Ilje7NrO7bj13kTNlDUlUbrnZ19897MuPXm4AC9Xg/dbhdHR0dot9t74/l/1m7v7LW/0+mgddZ7i8lkjPl8jtVqpbZcLnVPkgRpmqqZpz1JUkRxiljuTJrs/d5ap6dnCjYYDDAcDjEej3F3d4eHhwcFtNaqpcbCGIOmchg/hri6HsHYXBM4jVlrXOvk5EQByYo7nVmWwTmH9XqNzFmM/szw6es5TBLh/LbAJDCIliGCyKL/e4HLmwiZNTAS36LuIAhQFIWCEeSlWesQhnP0fz3i58ji/Zca7z40+DGqcXtzjYv+ELf3U2XI+Nbx8bECkhUleYnPUg2qMsf3yzE+f+vDugwfLxwG9w7BbKLKHMH4loCHh4f/AL5mSKOfTeBjuzaoixRFtobLc01gJLFhiUSNAoZhiM1mo6C5BNH8N3dvRbG7s1kOJx118ynyRYBc6pkHM9hVtANcLBb6oCxLtbqutSlM0jQNuMg0iiK9o6dJZbymj9hkDpXUfyuyCb4H5GPWjPLYIF8CJiAod4JyRLgak0hnLVxGxhmqXBREi2fAqqqeZBUKQIZ+sPlNZrwrRHIh4Ns4QsnE9MnbUgD3DFlDP3svAekjEBcVeMZbua+lOXY6gZPalfESzWoptRSG/AfZZQb7x1xkxgZ4H78Zs91uNSH3SIiU4mcN602BXAjsJfvu+uUH3ftYEs+ai4C5xDg5W1W20VgF5HxRCh/Q+PjlGBGcPj9GvPNJaX46Ms+QktnBOI73XfZnL52JeGajfK39j+AT0f8XkpGDXAjIIzoAAAAASUVORK5CYII=')\",\n                  \"backgroundSize\": \"cover\",\n                  \"display\": \"block\"\n                }\n              }}></span>{`\n  `}<img parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-image\",\n                \"alt\": \"order1\",\n                \"title\": \"order1\",\n                \"src\": \"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/3cbba/order1.png\",\n                \"srcSet\": [\"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/7fc1e/order1.png 288w\", \"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/a5df1/order1.png 576w\", \"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/3cbba/order1.png 1152w\", \"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/0b124/order1.png 1728w\", \"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/4ea69/order1.png 2304w\", \"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/35578/order1.png 2544w\"],\n                \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n                \"style\": {\n                  \"width\": \"100%\",\n                  \"height\": \"100%\",\n                  \"margin\": \"0\",\n                  \"verticalAlign\": \"middle\",\n                  \"position\": \"absolute\",\n                  \"top\": \"0\",\n                  \"left\": \"0\"\n                },\n                \"loading\": \"lazy\"\n              }}></img>{`\n    `}</span></li>\n          <li parentName=\"ol\">{`A panel will slide from the right hand side of your screen. Under the `}<inlineCode parentName=\"li\">{`Kafka listener and credentials`}</inlineCode>{` section, click on the `}<inlineCode parentName=\"li\">{`Internal`}</inlineCode>{` tab and then on the `}<inlineCode parentName=\"li\">{`Generate TLS credentials`}</inlineCode>{` button.\n`}<span parentName=\"li\" {...{\n              \"className\": \"gatsby-resp-image-wrapper\",\n              \"style\": {\n                \"position\": \"relative\",\n                \"display\": \"block\",\n                \"marginLeft\": \"auto\",\n                \"marginRight\": \"auto\",\n                \"maxWidth\": \"1152px\"\n              }\n            }}>{`\n      `}<span parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-background-image\",\n                \"style\": {\n                  \"paddingBottom\": \"75.34722222222221%\",\n                  \"position\": \"relative\",\n                  \"bottom\": \"0\",\n                  \"left\": \"0\",\n                  \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACAUlEQVQ4y61UTWsTURSd3yi4cFEtSkwgC0OwVcEWdSmuRO2mya9w5Uopgm5iSyCJEEom8xUm85WvSTKZyfGdl7ySxkYRvHC4d+48Ts695020fr8Px3FgmiY8z4NhGOj1erAsC6PRCIzlcrkT6r0KLUkSzOdzMDMWiwUGg4Ekn81m+FtskknCarWKQqGAUqmEXC6HfD6PVqslyaIowmQykfVwOEQYhgiCQCqniBsVVioVFItFlMtlSUyQkEQkJBlV85mk7MVxLHs3Em7KzbJMZkXG0RUJQYXssR6Px9f2e0VIQ2gAR3FdF77vy1qNR7BH0ECeYU/t9zdCyqcijpCmqcw0SJn0L4ZIQl3XUa/XJZrNJhqNBn7Uarg4P5fXh4oIqqPzBOudI/Nwp9OR4EHuaDSNMRBOBlEIPxRjDyJ4G6MTydrlbWgccTqdSucy/lK2RNRqI7jsIhSIbRcj3UYmjNgOWrhcQ9WSkPIJKXyeoPvpM36efUP77Lsgv4Rba2AuVrOeUSBbAdlGvaLWSKR2Rcdt24bdNeDaDhzDhNnR0TMtOOImzBYp2l+/4HDvDg7u38Pj/T2R7+LJg308vH0Lp4ePVoRq6Vfg4n1PZk/sS8LrI0kzWBc1fDh6hvcvj/HuxXORj3Dy6hivnx7g49s31y/2/wjtT/8ku5CKL2obi3X+BZodZSVNIYTlAAAAAElFTkSuQmCC')\",\n                  \"backgroundSize\": \"cover\",\n                  \"display\": \"block\"\n                }\n              }}></span>{`\n  `}<img parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-image\",\n                \"alt\": \"order2\",\n                \"title\": \"order2\",\n                \"src\": \"/vaccine-solution-main/static/9080be7362b7a9e9fdf3af26b22c63e0/3cbba/order2.png\",\n                \"srcSet\": [\"/vaccine-solution-main/static/9080be7362b7a9e9fdf3af26b22c63e0/7fc1e/order2.png 288w\", \"/vaccine-solution-main/static/9080be7362b7a9e9fdf3af26b22c63e0/a5df1/order2.png 576w\", \"/vaccine-solution-main/static/9080be7362b7a9e9fdf3af26b22c63e0/3cbba/order2.png 1152w\", \"/vaccine-solution-main/static/9080be7362b7a9e9fdf3af26b22c63e0/ce6f1/order2.png 1328w\"],\n                \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n                \"style\": {\n                  \"width\": \"100%\",\n                  \"height\": \"100%\",\n                  \"margin\": \"0\",\n                  \"verticalAlign\": \"middle\",\n                  \"position\": \"absolute\",\n                  \"top\": \"0\",\n                  \"left\": \"0\"\n                },\n                \"loading\": \"lazy\"\n              }}></img>{`\n    `}</span>{`\nBy the way, you can already see to the left of the `}<inlineCode parentName=\"li\">{`Generate TLS credentials`}</inlineCode>{` the Kafka bootstrap address for the internal listener we will be referencing to later on.`}</li>\n          <li parentName=\"ol\">{`A multiple step wizard to generate credentials for your application will pop up. For the `}<inlineCode parentName=\"li\">{`Credential name`}</inlineCode>{` you can choose any name you want. For the rest of the options, try to provide the most permissive in each step for easeness.`}</li>\n          <li parentName=\"ol\">{`Once you have finished, you will be presented with the option to download the TLS certificates for your newly created Kafka User credentials as well as with a link to the instructions for retrieving these later.\n`}<span parentName=\"li\" {...{\n              \"className\": \"gatsby-resp-image-wrapper\",\n              \"style\": {\n                \"position\": \"relative\",\n                \"display\": \"block\",\n                \"marginLeft\": \"auto\",\n                \"marginRight\": \"auto\",\n                \"maxWidth\": \"1114px\"\n              }\n            }}>{`\n      `}<span parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-background-image\",\n                \"style\": {\n                  \"paddingBottom\": \"119.09722222222221%\",\n                  \"position\": \"relative\",\n                  \"bottom\": \"0\",\n                  \"left\": \"0\",\n                  \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsTAAALEwEAmpwYAAADPUlEQVQ4y5VUS2sTURjNVheC/g1/gNtSuupSCoUWhCqu+gdE3Ci6c++qWylUcWXBrVSpFrFtmjSTeWQyeT8mk5kk85453u8mk07SxOqFw537Ovf7zvnuZMIwRBAEUywax3EMatQvQ9IyzWYTuVwO+XweqqpClmUUCgUUi0Vks1koisKJ/0aYrHHC9MZ0W3T7TY32Zvb29rC6uoqNjQ2sr69jbW0NKysrODo6wmg0QqfTga7rsG2bwzRNPu52u3xtMBjAdd2rCPf397G1tYXd3V3s7Oxge3sbm5ubODk54YR00DAMfsjzPE7Q6/U4kot8359NeVn4ZEjaJDo4bxjN0UXTlNvtNjekXq9zQwiapqFUKnGT6JtQq9WmY1qTJAnlchnVahX9fv+KkFKxLOtGsecdJURRdG1PhtgrlQqofChaEpr6RqPBoyLN/tVhriERCILA645SSdIRRZHXI11GexJXyYjEEJojJBnyCGmBDhOoiGlMB+lQEinpSxm0Wi3+TfPJGhGSMVNCx3H4DZQa1Vhal/9pM2VDhERGBiXN83zmaIW5WON1mD6UYkkZxieQCVlEDiMiuKyeAqq9KER/GKLWdVHXXTQNH13mjT4Egmji8NT1ePbp0WtQmH4q068kSygxQ2QyiOpMkRkUvq6IRVTLKkShgH5PR6tRh2kNYIyAthlj6E5S9s9+wsqdw7o4hZU9hZn9PQXNDXJnsC/HGOXHfSBdwhOyCC5+IfBZhsyTIJwQxiUBtj+EbbXhOQZC30LgMT1t0u0GgyoK4Ce6Two7lAV8K3o4PO7h87GOrxcejkXgB8N3IcZ5ORpvjhb8CzUFse9xFacuDwpF3H8O3H4U495T4M5j4O6TGLfYOPMwxoMXyf1zT5F6HuGYEAmhKwp4exjh1UGAN59CvPrg4/XHAC8PfDx7H+DdFx9RePWHSep0OSETt6IV4BoanH4FcDtAyP4ens4kZJra7NWw12OZfRjs9biOPdEr4ilfI4RaBHMeYtOH2ApQZc+yNhxDMwFn0atIR+i5s4SxlEfEbvLVMTxWe64iTRGqEuJyCpo8hioili9ZFtEcIdMHNgvHGS1FvGjeZmCapsmo/QHwPRNTs+KfHQAAAABJRU5ErkJggg==')\",\n                  \"backgroundSize\": \"cover\",\n                  \"display\": \"block\"\n                }\n              }}></span>{`\n  `}<img parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-image\",\n                \"alt\": \"order3\",\n                \"title\": \"order3\",\n                \"src\": \"/vaccine-solution-main/static/0f9b710fc88b5a32a2cf9e4934fba481/fe006/order3.png\",\n                \"srcSet\": [\"/vaccine-solution-main/static/0f9b710fc88b5a32a2cf9e4934fba481/7fc1e/order3.png 288w\", \"/vaccine-solution-main/static/0f9b710fc88b5a32a2cf9e4934fba481/a5df1/order3.png 576w\", \"/vaccine-solution-main/static/0f9b710fc88b5a32a2cf9e4934fba481/fe006/order3.png 1114w\"],\n                \"sizes\": \"(max-width: 1114px) 100vw, 1114px\",\n                \"style\": {\n                  \"width\": \"100%\",\n                  \"height\": \"100%\",\n                  \"margin\": \"0\",\n                  \"verticalAlign\": \"middle\",\n                  \"position\": \"absolute\",\n                  \"top\": \"0\",\n                  \"left\": \"0\"\n                },\n                \"loading\": \"lazy\"\n              }}></img>{`\n    `}</span>{`\nThese instructions will consist of finding out that a new secret with the same name you gave to your TLS credentials (and Kafka User as a result) has been created in the OpenShift project your IBM Event Streams instance is installed in. You can double check it by running:`}\n            <pre parentName=\"li\"><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`oc get secrets -n <EVENTSTREAMS_NS> | grep <YOUR_CREDENTIALS_NAME>\n`}</code></pre>\n          </li>\n        </ol>\n        <p parentName=\"li\">{`Now that we have created a Kafka User with its corresponding TLS credentials to work with the internal `}<em parentName=\"p\">{`tls`}</em>{` Kafka listener and we know these TLS credentials are stored in a secret with the same name as the Kafka User, we only need to copy that secret from the OpenShift project where it is (i.e. the OpenShift project where your IBM Event Streams instance has been deployed into) to the OpenShift project where we are deploying our vaccine order and optimization use case so that our applications can make use of it and be able to work with IBM Event Streams. To do so, execute:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc get secret <CREDENTIALS_NAME> -n <EVENTSTREAMS_NS> -o json | jq -r '.metadata.name=\"tls-user\"' | jq --arg project_name \"<PROJECT_NAME>\" -r '.metadata.namespace=$project_name' | oc apply -f -\n`}</code></pre>\n        <p parentName=\"li\">{`where`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<CREDENTIALS_NAME>`}</inlineCode>{` is the name you gave to the TLS Credentials you created above.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<EVENTSTREAMS_NS>`}</inlineCode>{` is the OpenShift project where your IBM Event Streams instance is deployed into and where the secret holding the TLS Credentials you created above ends up into as well as a result.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<PROJECT_NAME>`}</inlineCode>{` is the OpenShift project where you are deploying the vaccine order management and optimization use case into.`}</li>\n        </ul>\n        <p parentName=\"li\">{`You can see from the command above that we are renaming the secret from whatever your `}<inlineCode parentName=\"p\">{`<CREDENTIALS_NAME>`}</inlineCode>{` was to `}<inlineCode parentName=\"p\">{`tls-user`}</inlineCode>{` since this is the name for the secret that holds the TLS credentials that the deployment scripts of the components for this Vaccine Order Management and Optimization use case expect.`}</p>\n        <p parentName=\"li\">{`You can verify that a new secret called `}<inlineCode parentName=\"p\">{`tls-user`}</inlineCode>{` exists in the OpenShift project where you are deploying the vaccine order management and optimization use case by executing:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc get secrets\n`}</code></pre>\n        <p parentName=\"li\"><strong parentName=\"p\">{`SCRAM Credentials`}</strong></p>\n        <p parentName=\"li\">{`In order to generate a set of SCRAM-SHA-512 credentials for to authenticate with the `}<em parentName=\"p\">{`external`}</em>{` Kafka listener:`}</p>\n        <ol parentName=\"li\">\n          <li parentName=\"ol\">{`Go to your IBM Event Streams user intergace dashboard. You can find where it is by executing:`}\n            <pre parentName=\"li\"><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`oc get routes -n <EVENTSTREAMS_NS> | grep ui\n`}</code></pre>\n          </li>\n          <li parentName=\"ol\">{`Click on the `}<inlineCode parentName=\"li\">{`Connect to this cluster`}</inlineCode>{` option\n`}<span parentName=\"li\" {...{\n              \"className\": \"gatsby-resp-image-wrapper\",\n              \"style\": {\n                \"position\": \"relative\",\n                \"display\": \"block\",\n                \"marginLeft\": \"auto\",\n                \"marginRight\": \"auto\",\n                \"maxWidth\": \"1152px\"\n              }\n            }}>{`\n      `}<span parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-background-image\",\n                \"style\": {\n                  \"paddingBottom\": \"79.8611111111111%\",\n                  \"position\": \"relative\",\n                  \"bottom\": \"0\",\n                  \"left\": \"0\",\n                  \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACeElEQVQ4y21TwU7bQBDN55T/gIggyCG3/kW/pT/Raw+9VFUv7YkilUiRSCkEURKS2Ilje7NrO7bj13kTNlDUlUbrnZ19897MuPXm4AC9Xg/dbhdHR0dot9t74/l/1m7v7LW/0+mgddZ7i8lkjPl8jtVqpbZcLnVPkgRpmqqZpz1JUkRxiljuTJrs/d5ap6dnCjYYDDAcDjEej3F3d4eHhwcFtNaqpcbCGIOmchg/hri6HsHYXBM4jVlrXOvk5EQByYo7nVmWwTmH9XqNzFmM/szw6es5TBLh/LbAJDCIliGCyKL/e4HLmwiZNTAS36LuIAhQFIWCEeSlWesQhnP0fz3i58ji/Zca7z40+DGqcXtzjYv+ELf3U2XI+Nbx8bECkhUleYnPUg2qMsf3yzE+f+vDugwfLxwG9w7BbKLKHMH4loCHh4f/AL5mSKOfTeBjuzaoixRFtobLc01gJLFhiUSNAoZhiM1mo6C5BNH8N3dvRbG7s1kOJx118ynyRYBc6pkHM9hVtANcLBb6oCxLtbqutSlM0jQNuMg0iiK9o6dJZbymj9hkDpXUfyuyCb4H5GPWjPLYIF8CJiAod4JyRLgak0hnLVxGxhmqXBREi2fAqqqeZBUKQIZ+sPlNZrwrRHIh4Ns4QsnE9MnbUgD3DFlDP3svAekjEBcVeMZbua+lOXY6gZPalfESzWoptRSG/AfZZQb7x1xkxgZ4H78Zs91uNSH3SIiU4mcN602BXAjsJfvu+uUH3ftYEs+ai4C5xDg5W1W20VgF5HxRCh/Q+PjlGBGcPj9GvPNJaX46Ms+QktnBOI73XfZnL52JeGajfK39j+AT0f8XkpGDXAjIIzoAAAAASUVORK5CYII=')\",\n                  \"backgroundSize\": \"cover\",\n                  \"display\": \"block\"\n                }\n              }}></span>{`\n  `}<img parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-image\",\n                \"alt\": \"order1\",\n                \"title\": \"order1\",\n                \"src\": \"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/3cbba/order1.png\",\n                \"srcSet\": [\"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/7fc1e/order1.png 288w\", \"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/a5df1/order1.png 576w\", \"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/3cbba/order1.png 1152w\", \"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/0b124/order1.png 1728w\", \"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/4ea69/order1.png 2304w\", \"/vaccine-solution-main/static/3c38ccd399b40a0f9ff8a7de003ffb8f/35578/order1.png 2544w\"],\n                \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n                \"style\": {\n                  \"width\": \"100%\",\n                  \"height\": \"100%\",\n                  \"margin\": \"0\",\n                  \"verticalAlign\": \"middle\",\n                  \"position\": \"absolute\",\n                  \"top\": \"0\",\n                  \"left\": \"0\"\n                },\n                \"loading\": \"lazy\"\n              }}></img>{`\n    `}</span></li>\n          <li parentName=\"ol\">{`A panel will slide from the right hand side of your screen. Under the `}<inlineCode parentName=\"li\">{`Kafka listener and credentials`}</inlineCode>{` section, click on the `}<inlineCode parentName=\"li\">{`External`}</inlineCode>{` tab and then on the `}<inlineCode parentName=\"li\">{`Generate SCRAM credentials`}</inlineCode>{` button.\n`}<span parentName=\"li\" {...{\n              \"className\": \"gatsby-resp-image-wrapper\",\n              \"style\": {\n                \"position\": \"relative\",\n                \"display\": \"block\",\n                \"marginLeft\": \"auto\",\n                \"marginRight\": \"auto\",\n                \"maxWidth\": \"1152px\"\n              }\n            }}>{`\n      `}<span parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-background-image\",\n                \"style\": {\n                  \"paddingBottom\": \"72.91666666666666%\",\n                  \"position\": \"relative\",\n                  \"bottom\": \"0\",\n                  \"left\": \"0\",\n                  \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB80lEQVQ4y62Uy4rTUBzG806C4CgaBBeluBaKoD6Aj+C60E03fQSZwVl04UqGWQmCCkUY1E2TdpLemza3pmnaXD7Pd6YpUSczLjzw8T85bb78/pdE0TQNpmliOp3KSPX7fViWBa4sy25VcSmbzQZhGCKOY2y3W6zXawRBgCiKDoZl67rflEqlglqthmq1ClVV0W63wYfM53O4riv3jLyezWZYLpfyLDf7i7DRaKDVaqHZbKJer6PT6SBNU0lK4iRJsNvtpAlFcp6VGv6JnxP5vi/leR4cx5ExP+e+WN/fDA3DkDewCbZtS+U385wp5uJ/GElfajgejw8EfDoNF4vFjc24qVlKT9chR0eQkpYj0+12MZlMpDGbkZMxUnx4aQ01vQddmIyEgScI3dVKEtMsN+He3qfPPRsj0xXNy7J0HzO6QwlNHeGlhnhsAK4Y5ukQ6W6L9JaUry2DTPlzB71PX2Bd/IDf7WN98Q2+NRO0K8RiXDgiaYEg8sRsCkUF8ToOVleEI2OAyWCEwaWBoWFiLl7BxT5V1i+vYbCJMPz5Ha8f3sXzR0d4qR7hhXofrx4/wLN7d/Dm6RNhmEJxXAcOR4RvxX5oOchFkTROUoSOjY+nxzh7d4zz05ODPpy8xdf37StC/Mcla/gvX5OiEvERKRMJfwGA5WqfdpEElQAAAABJRU5ErkJggg==')\",\n                  \"backgroundSize\": \"cover\",\n                  \"display\": \"block\"\n                }\n              }}></span>{`\n  `}<img parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-image\",\n                \"alt\": \"order17\",\n                \"title\": \"order17\",\n                \"src\": \"/vaccine-solution-main/static/45e183c579e81c70c70735b26346b69c/3cbba/order17.png\",\n                \"srcSet\": [\"/vaccine-solution-main/static/45e183c579e81c70c70735b26346b69c/7fc1e/order17.png 288w\", \"/vaccine-solution-main/static/45e183c579e81c70c70735b26346b69c/a5df1/order17.png 576w\", \"/vaccine-solution-main/static/45e183c579e81c70c70735b26346b69c/3cbba/order17.png 1152w\", \"/vaccine-solution-main/static/45e183c579e81c70c70735b26346b69c/33308/order17.png 1376w\"],\n                \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n                \"style\": {\n                  \"width\": \"100%\",\n                  \"height\": \"100%\",\n                  \"margin\": \"0\",\n                  \"verticalAlign\": \"middle\",\n                  \"position\": \"absolute\",\n                  \"top\": \"0\",\n                  \"left\": \"0\"\n                },\n                \"loading\": \"lazy\"\n              }}></img>{`\n    `}</span>{`\nBy the way, you can already see to the left of the `}<inlineCode parentName=\"li\">{`Generate SCRAM credentials`}</inlineCode>{` the Kafka bootstrap address for the external listener we will be referencing to later on.`}</li>\n          <li parentName=\"ol\">{`A multiple step wizard to generate credentials for your application will pop up. For the `}<inlineCode parentName=\"li\">{`Credential name`}</inlineCode>{` you can choose any name you want. For the rest of the options, try to provide the most permissive in each step for easeness.`}</li>\n          <li parentName=\"ol\">{`Once you have finished, you will be presented with SCRAM username and password as well as with a link to the instructions for retrieving these later.\n`}<span parentName=\"li\" {...{\n              \"className\": \"gatsby-resp-image-wrapper\",\n              \"style\": {\n                \"position\": \"relative\",\n                \"display\": \"block\",\n                \"marginLeft\": \"auto\",\n                \"marginRight\": \"auto\",\n                \"maxWidth\": \"1152px\"\n              }\n            }}>{`\n      `}<span parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-background-image\",\n                \"style\": {\n                  \"paddingBottom\": \"111.80555555555556%\",\n                  \"position\": \"relative\",\n                  \"bottom\": \"0\",\n                  \"left\": \"0\",\n                  \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC10lEQVQ4y4VUy1IaQRTlY1ylUm4TXFj+SZJV3OTTXLlU9ymrtGKiDIogDAwwzPs9MMOc3NMyFiJoV526t1+3z311I0kSGIaB4XAI0zQxnU4xGAwUgiAAR1VVr1CPdb0ejbIs4fu+QhzHCMNQST60WCx2XqzXNvca19fXODw8xNHREZrNJvb29nBycoL5fK7YkmWapnBdF7PZTHnBtV2PNXjw/PwcFxcXODs7w+npqXJ/uVwiyzIURaF0GuAjeZ6rNXq21SA36CIvR1GkpOd5ig1hWZZiWseX4DrPbTXIF3mIB+gaQZ1savBMLYna3a0GeXk8HmMymSg2ZMKsc2394uZgGLYaZDY7nQ5aLQ1PT31VLv1+H91uV+mMp67rSvJR6pQ7XaYrruPAcWwEUjplWazwnIh1MBmUmwlZt9ngxPNDzCwHSZqv3KkQS4LyFYvtY0cdLmQ+MEP0DBe6yJGdwPIjOMLW8QMEUgFEnOXIFgVyYVdI+OZF9cJs3WijdC34rRtEjxo87S+SXhtzvYds0EXY0RQCQdx9QNRtI+q0EUYF3PjZkzcGMdYxvtdwf3eLh9t/eGzdKYx6XaCQLC/mIgVzCQdjNx0BkVdTe+syHBO/jn/i0/4+mgcH+PK1ic+if/v+A7709VhqdDJlUZvwkxSlbaIKfRXBbf3cgGmgffMHvy8vcXV1JeXTgqaxhJ5UNlV2V2DlVc6zwZ2/DV1YRPLDSD2yBdl+7AYaq7tGQXRP9orZBNhguGHQQCw16DGj8ovU3xfr81UdsvWKEktr+oFBcTmwZphIy7HtyKp2ddMgy+Zjg+Jy6rnwhZ0nX1kkDOleKiF4wWruyV5hjiXL7xhcikFdEjB1PThBiCjNpJAThJJRSs6pl3UR+44kxXsnKUYf+UhH/2GEYcfATLdhDmxYQxtL10b1AgtV4KEaPL6f5SpLpJltFRfIBQiDGtVWuKh2/NYc/wEPro5dmwHCJQAAAABJRU5ErkJggg==')\",\n                  \"backgroundSize\": \"cover\",\n                  \"display\": \"block\"\n                }\n              }}></span>{`\n  `}<img parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-image\",\n                \"alt\": \"order18\",\n                \"title\": \"order18\",\n                \"src\": \"/vaccine-solution-main/static/6d3ef6b6cac05d442e1f4704bdf4bc39/3cbba/order18.png\",\n                \"srcSet\": [\"/vaccine-solution-main/static/6d3ef6b6cac05d442e1f4704bdf4bc39/7fc1e/order18.png 288w\", \"/vaccine-solution-main/static/6d3ef6b6cac05d442e1f4704bdf4bc39/a5df1/order18.png 576w\", \"/vaccine-solution-main/static/6d3ef6b6cac05d442e1f4704bdf4bc39/3cbba/order18.png 1152w\", \"/vaccine-solution-main/static/6d3ef6b6cac05d442e1f4704bdf4bc39/fa608/order18.png 1396w\"],\n                \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n                \"style\": {\n                  \"width\": \"100%\",\n                  \"height\": \"100%\",\n                  \"margin\": \"0\",\n                  \"verticalAlign\": \"middle\",\n                  \"position\": \"absolute\",\n                  \"top\": \"0\",\n                  \"left\": \"0\"\n                },\n                \"loading\": \"lazy\"\n              }}></img>{`\n    `}</span>{`\nThese instructions will consist of finding out that a new secret with the same name you gave to your SCRAM credentials (and Kafka User as a result) has been created in the OpenShift project your IBM Event Streams instance is installed in. You can double check it by running:`}\n            <pre parentName=\"li\"><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`oc get secrets -n <EVENTSTREAMS_NS> | grep <YOUR_CREDENTIALS_NAME>\n`}</code></pre>\n          </li>\n        </ol>\n        <p parentName=\"li\">{`For more information about the different Kafka listeners that a Strimzi Kafka cluster (which IBM Event Streams is based on) can expose and its configuration, read `}<a parentName=\"p\" {...{\n            \"href\": \"https://strimzi.io/docs/operators/latest/using.html#assembly-securing-access-str\"\n          }}>{`this link`}</a>{`. For more information about how to configure secutiry options in IBM Event Streams read `}<a parentName=\"p\" {...{\n            \"href\": \"https://ibm.github.io/event-streams/installing/planning/#kafka-listeners\"\n          }}>{`this link`}</a>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Kafka Topics`}</strong></p>\n        <p parentName=\"li\">{`We need to create the following Kafka topics in our IBM Event Streams instance that the different components in our Event-Driven Vaccine Order Management and Optimization solution will use:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.inventory`}</inlineCode>{` - This topic will contain the events related with the vaccine lots by the different suppliers that will make up the inventory of the vaccine. The events in this topic will be consumed by the Vaccine Order Optimization component for the CPLEX computations that will optimize the shipment plans to carry out.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.reefer`}</inlineCode>{` - This topic will contain the events related with the reefer containers that will carry vaccines. Where they are, what status are they in, when they will be available, etc. The events in this topic will be consumed by the Vaccine Order Optimization component for the CPLEX computations that will optimize the shipment plans to carry out.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.transportation`}</inlineCode>{` - This topic will contain the events related with the routes or lanes available between different locations that will be then used in the CPLEX computations to optimize the shipment plans to carry out vaccine from the supplier to where the order of it is expected to be delivered. The events in this topic will be consumed by the Vaccine Order Optimization component for the CPLEX computations that will optimize the shipment plans to carry out.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.public.orderevents`}</inlineCode>{` - This topic will contain the events related to the new (or updated) orders managed by the Vaccine Order Management component. The events in this topic will be produced by the Debezium Change Data Capture (CDC) for Postgres connector that will be monitoring the `}<inlineCode parentName=\"li\">{`orderevents`}</inlineCode>{` table under the `}<inlineCode parentName=\"li\">{`public`}</inlineCode>{` schema of the postgres database the Vaccine Order Management component uses to store the state of the orders. The events in this topic will be consumed by the Vaccine Order Optimization component and will trigger the optimization process.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.shipment.plan`}</inlineCode>{` - This topic will contain the events related to the shipments plans resulting of the order optimization CPLEX computation carried out by the Vaccine Order Optmimization component. Hence, the producer of these events is the Vaccine Order Optimization component while the Vaccine Order Management component will consume these and display them in the user interface.`}</li>\n        </ul>\n        <p parentName=\"li\">{`where`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<UNIQUE_ID>`}</inlineCode>{` is a unique identifier of your choice to be used for all the resouces created within the deployment of this Vaccine Order Management and Optimization solution so that they do not collide with any other user of the OpenShift or Kafka environments. We have chosen `}<inlineCode parentName=\"li\">{`demo`}</inlineCode>{` as our unique identifier for the rest of this tutorial.`}</li>\n        </ul>\n        <p parentName=\"li\">{`If you don’t know how to create topics in your IBM Event Streams instance, see `}<a parentName=\"p\" {...{\n            \"href\": \"https://ibm-cloud-architecture.github.io/refarch-eda/use-cases/overview/pre-requisites/#create-event-streams-topics\"\n          }}>{`this link`}</a>{`.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Kafka Topics Configmap`}</strong></p>\n        <p parentName=\"li\">{`This step configures the configmap that will hold the values for the different Kafka topics as well as the Kafka internal and external bootstrap urls the components of the Vaccine Order Management and Optimization use case will make use of.`}</p>\n        <p parentName=\"li\">{`The yaml file containing the definition of the configmap we refer to is called `}<inlineCode parentName=\"p\">{`kafka-topics-configmap.yaml`}</inlineCode>{` and can be found in the Vaccine Order Manager for Postgres GitHub repository you pulled down earlier under the `}<inlineCode parentName=\"p\">{`src/main/kubernetes`}</inlineCode>{` folder. Open up that yaml file and provide a value for:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<UNIQUE_IDENTIFIER>`}</inlineCode>{` which is the unique identifier you chose before to be used for all the resouces created within the deployment of this Vaccine Order Management and Optimization use case.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<KAFKA_BOOTSTRAP_URL>`}</inlineCode>{` which is the the Kafka `}<strong parentName=\"li\">{`internal`}</strong>{` bootstrap address of your IBM Event Streams instance.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<EXTERNAL_KAFKA_BOOTSTRAP_URL>`}</inlineCode>{` which is the the Kafka `}<strong parentName=\"li\">{`external`}</strong>{` bootstrap address of your IBM Event Streams instance.`}</li>\n        </ul>\n        <p parentName=\"li\">{`You can find your Kafka `}<strong parentName=\"p\">{`internal`}</strong>{` bootstrap address by executing:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc get EventStreams <CLUSTER_NAME> -n <EVENTSTREAMS_NS> -o json | jq '.status.kafkaListeners[] | select(.type==\"tls\") | .bootstrapServers'\n`}</code></pre>\n        <p parentName=\"li\">{`You can find your Kafka `}<strong parentName=\"p\">{`external`}</strong>{` bootstrap address by executing:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc get EventStreams <CLUSTER_NAME> -n <EVENTSTREAMS_NS> -o json | jq '.status.kafkaListeners[] | select(.type==\"external\") | .bootstrapServers'\n`}</code></pre>\n        <p parentName=\"li\">{`where`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<CLUSTER_NAME>`}</inlineCode>{` is the name of your IBM Event Streams instance. If you don’t remember your IBM Event Streams instance name you can find it out executing:`}\n            <pre parentName=\"li\"><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`oc get EventStreams -n <EVENTSTREAMS_NS>\n`}</code></pre>\n          </li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<EVENTSTREAMS_NS>`}</inlineCode>{` is the name of the OpenShift project/namespace were your IBM Event Streams is deployed in.`}</li>\n        </ul>\n        <p parentName=\"li\">{`Once you have set those two parameters, you can create the configmap by executing:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc apply -f kafka-topics-configmap.yaml\n`}</code></pre>\n        <p parentName=\"li\">{`within the `}<inlineCode parentName=\"p\">{`src/main/kubernetes`}</inlineCode>{` folder of the vaccine order manager for postgres GitHub repository. You can checkout it has been properly created by executing:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc describe configmap kafka-topics-cm\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Events Data Schemas`}</strong></p>\n        <p parentName=\"li\">{`We are also integrating data schemas for the events involved in this Vaccine Order Management and Optimization use case. Enforcing the events in any of the topics of this use case comply with their data schemas will provide robustness to our solution. These data schemas also comply with the `}<a parentName=\"p\" {...{\n            \"href\": \"https://cloudevents.io/\"\n          }}>{`Cloud Events specification`}</a>{` and we will use Apache Avro as the data serialization system. As a result, we need to create the appropriate data schemas in the IBM Event Stream Schema Registry for each of the topics involved in this solution that are listed above. In order to register a schema:`}</p>\n        <ol parentName=\"li\">\n          <li parentName=\"ol\">{`Go to the Schema Registry in your IBM Event Stream user interface and click Add Schema.\n`}<span parentName=\"li\" {...{\n              \"className\": \"gatsby-resp-image-wrapper\",\n              \"style\": {\n                \"position\": \"relative\",\n                \"display\": \"block\",\n                \"marginLeft\": \"auto\",\n                \"marginRight\": \"auto\",\n                \"maxWidth\": \"1152px\"\n              }\n            }}>{`\n      `}<span parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-background-image\",\n                \"style\": {\n                  \"paddingBottom\": \"49.30555555555556%\",\n                  \"position\": \"relative\",\n                  \"bottom\": \"0\",\n                  \"left\": \"0\",\n                  \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRUlEQVQoz6WR2U7CUBCG+1o8BBhI5J5n0GgbCN54aeJjeOUDkbB0sQs9pZZCNwL+9h9DU01MXE7y5cz87cycmdE6nQ5GoxEGgwH6/b7Q6/V+T7eL4fAS2mQyQVmWUEohDEOkaYr/HO1uOhVjv98LRVHgeDz+mKqs4L8kcKxXxCqF9nh7hbc64W63k4RZlslNf7vdNnobakmSIMtzxH6A64c5LgwbT89zaPf6TZ0kh+u6cBwHQRAInudhuVyKvl6vG502tdVq9eHXOLYHy3ShwgiaMR5Ly5vNRubHljlT3lVVNXZev6ZNWytKxtDP6oSGgcPhgMVi0VTny2zblleYpgnLsmRhLMrlkSiKPqFUJGPQdF3H6XTCbDaTIH70fV+C4zhu4M/sgHMlbfsMZysJeRhAgUthG7zbfF3MdzQJWeG8wb/C+Hd9bskxnOxGFAAAAABJRU5ErkJggg==')\",\n                  \"backgroundSize\": \"cover\",\n                  \"display\": \"block\"\n                }\n              }}></span>{`\n  `}<img parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-image\",\n                \"alt\": \"14\",\n                \"title\": \"14\",\n                \"src\": \"/vaccine-solution-main/static/e4358798408f622668c7850c03fae9eb/3cbba/order14.png\",\n                \"srcSet\": [\"/vaccine-solution-main/static/e4358798408f622668c7850c03fae9eb/7fc1e/order14.png 288w\", \"/vaccine-solution-main/static/e4358798408f622668c7850c03fae9eb/a5df1/order14.png 576w\", \"/vaccine-solution-main/static/e4358798408f622668c7850c03fae9eb/3cbba/order14.png 1152w\", \"/vaccine-solution-main/static/e4358798408f622668c7850c03fae9eb/0b124/order14.png 1728w\", \"/vaccine-solution-main/static/e4358798408f622668c7850c03fae9eb/4ea69/order14.png 2304w\", \"/vaccine-solution-main/static/e4358798408f622668c7850c03fae9eb/a4b11/order14.png 2560w\"],\n                \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n                \"style\": {\n                  \"width\": \"100%\",\n                  \"height\": \"100%\",\n                  \"margin\": \"0\",\n                  \"verticalAlign\": \"middle\",\n                  \"position\": \"absolute\",\n                  \"top\": \"0\",\n                  \"left\": \"0\"\n                },\n                \"loading\": \"lazy\"\n              }}></img>{`\n    `}</span></li>\n          <li parentName=\"ol\">{`Click Upload definition and select the `}<strong parentName=\"li\">{`CloudEvent.avsc`}</strong>{` file you will find in the `}<strong parentName=\"li\">{`Vaccine GitOps GitHub repository`}</strong>{` you pulled down at the beginning of this tutorial under the `}<strong parentName=\"li\">{`data`}</strong>{` folder.`}</li>\n          <li parentName=\"ol\">{`Change the Schema Name to the name of your Kafka topic appended with `}<inlineCode parentName=\"li\">{`-key`}</inlineCode>{` or `}<inlineCode parentName=\"li\">{`-value`}</inlineCode>{`, depending on whether you want this data schema to apply to the event’s key or value, that you want it to be enforced to. That is, if we wanted this data schema to be enforced to the event’s value of our `}<inlineCode parentName=\"li\">{`demo.vaccine.reefer`}</inlineCode>{` topic, we would fill in the Schema name as follows:\n`}<span parentName=\"li\" {...{\n              \"className\": \"gatsby-resp-image-wrapper\",\n              \"style\": {\n                \"position\": \"relative\",\n                \"display\": \"block\",\n                \"marginLeft\": \"auto\",\n                \"marginRight\": \"auto\",\n                \"maxWidth\": \"1152px\"\n              }\n            }}>{`\n      `}<span parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-background-image\",\n                \"style\": {\n                  \"paddingBottom\": \"52.083333333333336%\",\n                  \"position\": \"relative\",\n                  \"bottom\": \"0\",\n                  \"left\": \"0\",\n                  \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpElEQVQoz4WSTW/TQBCG/UP5Ab1yRkKK+AmVEAgOSOWMUpUDCHHgQ1RwQIi2URND45Udx5/reGeS2HGql1mnMUZ8WXq0M7sz78ys1/n23cNo4mE8ceG6LjzPw3Q6bVel1D+Zz+eIoghxqJDMFWa+gpPnGn4wQyCkaYr+V1VVR31Da9c11us1Hj96iDt37+H2kxq37gPPPjZwtE6RRgpZ4qMsNY6OnmIwGGA4HO4SBVouYVgggjGmYzIZ4+vZOT67Bp/GDC8kOKPRDC/fKrx6p3B1FeP0w3ucnDyXwDMsSRLH58gvL5BffAGHPni1QmkIRcltwWazQVMTtkK1EsHjFz4OHlQ4OCS8fhOgqQya7TWapgFJF0UYwCQRKBZ0DmaWSQh6waB9x8SyWp/hbJIAW84AoU5CuccMpizbQJusFwukeY5SkllGtyJ77PnO5s53SGuYON5RaESyFkXRBeciliZJ+8OyLPujIDP1BG3V5UqqC3Lx9inYxE5wIUW0CBYiZugvgr0O2Ro97Kj7w32goZ97dLPfF/lVsLsH+i2g73dJ/+nwBwRG7CfzM8s3AAAAAElFTkSuQmCC')\",\n                  \"backgroundSize\": \"cover\",\n                  \"display\": \"block\"\n                }\n              }}></span>{`\n  `}<img parentName=\"span\" {...{\n                \"className\": \"gatsby-resp-image-image\",\n                \"alt\": \"15\",\n                \"title\": \"15\",\n                \"src\": \"/vaccine-solution-main/static/c6eda9fa91a7cb09dc732d985d6c6325/3cbba/order15.png\",\n                \"srcSet\": [\"/vaccine-solution-main/static/c6eda9fa91a7cb09dc732d985d6c6325/7fc1e/order15.png 288w\", \"/vaccine-solution-main/static/c6eda9fa91a7cb09dc732d985d6c6325/a5df1/order15.png 576w\", \"/vaccine-solution-main/static/c6eda9fa91a7cb09dc732d985d6c6325/3cbba/order15.png 1152w\", \"/vaccine-solution-main/static/c6eda9fa91a7cb09dc732d985d6c6325/0b124/order15.png 1728w\", \"/vaccine-solution-main/static/c6eda9fa91a7cb09dc732d985d6c6325/4ea69/order15.png 2304w\", \"/vaccine-solution-main/static/c6eda9fa91a7cb09dc732d985d6c6325/a4b11/order15.png 2560w\"],\n                \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n                \"style\": {\n                  \"width\": \"100%\",\n                  \"height\": \"100%\",\n                  \"margin\": \"0\",\n                  \"verticalAlign\": \"middle\",\n                  \"position\": \"absolute\",\n                  \"top\": \"0\",\n                  \"left\": \"0\"\n                },\n                \"loading\": \"lazy\"\n              }}></img>{`\n    `}</span></li>\n          <li parentName=\"ol\">{`Finally click on Add Schema.`}</li>\n          <li parentName=\"ol\">{`Repeat the steps a-d in order to create the data schema for the event’s value of your `}<inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.reefer`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.inventory`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.transportation`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.shipment.plan`}</inlineCode>{` topics. That is, you should have the following data schemas (using the `}<inlineCode parentName=\"li\">{`CloudEvent.avsc`}</inlineCode>{` file to create each of the data schemas from) in your schema registry:`}\n            <ul parentName=\"li\">\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.reefer-value`}</inlineCode></li>\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.inventory-value`}</inlineCode></li>\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.transportation-value`}</inlineCode></li>\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.shipment.plan-value`}</inlineCode></li>\n            </ul>\n          </li>\n          <li parentName=\"ol\">{`Repeat the steps a-d to create the data schema for the `}<inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.public.orderevents`}</inlineCode>{` topic. However, the `}<strong parentName=\"li\">{`key`}</strong>{` and `}<strong parentName=\"li\">{`value`}</strong>{` data schemas for this topic will be created from their specfific avsc files you can also find under the `}<strong parentName=\"li\">{`data`}</strong>{` folder of the `}<strong parentName=\"li\">{`Vaccine GitOps GitHub repository`}</strong>{`. That is, use the `}<inlineCode parentName=\"li\">{`OrderEventKey.avsc`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`OrderEventValue.avsc`}</inlineCode>{` files to create the `}<inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.public.orderevents-key`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.public.orderevents-value`}</inlineCode>{` respectively.`}</li>\n        </ol>\n        <p parentName=\"li\">{`After creating the data schemas explained abobe, your Schema Registry should present the following data schemas:\n`}<span parentName=\"p\" {...{\n            \"className\": \"gatsby-resp-image-wrapper\",\n            \"style\": {\n              \"position\": \"relative\",\n              \"display\": \"block\",\n              \"marginLeft\": \"auto\",\n              \"marginRight\": \"auto\",\n              \"maxWidth\": \"1152px\"\n            }\n          }}>{`\n      `}<span parentName=\"span\" {...{\n              \"className\": \"gatsby-resp-image-background-image\",\n              \"style\": {\n                \"paddingBottom\": \"61.80555555555556%\",\n                \"position\": \"relative\",\n                \"bottom\": \"0\",\n                \"left\": \"0\",\n                \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABSUlEQVQoz6WRzWrCQBSF5818km6NVEugVWO3PkFfoM/RTbddddVVV6VQQiCiJjF/MzHJac7YKQlGUBw4ZO69c7/cHzEYDLBcLuE4DubzudZsNrtI02mj5rtYPELYtg2eOI6x2+0gpcQ1R0wmd/qS57kWgUqpkyqKQutwV0iyAm+fCq8fCl9e3lR47zSgDOv1GlEUaYVhiCAIOjK+1Wql3waNHYUBvn98PDxvcPMU4OU9grgdj3VVruvC930tJpoRtMWfMb7dbpv4wfY8DzLZAEUMmcUQo9FIt5ym6X8i2zn3lGWFqj7cpVQQw+FQG6YlfgnlnOq67qiqqo6fdpZl2O/3f0AJYVnWEZABPu4DMrnt4yJ7gWZGnF1ZltrXB2Ss7WPF5n0HaLZLJUlyBDtVISG9QAOjuKBzgLSPWuZSGGCFZsuskNBLxbxf3Ll0uXRt4dMAAAAASUVORK5CYII=')\",\n                \"backgroundSize\": \"cover\",\n                \"display\": \"block\"\n              }\n            }}></span>{`\n  `}<img parentName=\"span\" {...{\n              \"className\": \"gatsby-resp-image-image\",\n              \"alt\": \"16\",\n              \"title\": \"16\",\n              \"src\": \"/vaccine-solution-main/static/05cbbf6f391b49f1be1b36c5a7e9810b/3cbba/order16.png\",\n              \"srcSet\": [\"/vaccine-solution-main/static/05cbbf6f391b49f1be1b36c5a7e9810b/7fc1e/order16.png 288w\", \"/vaccine-solution-main/static/05cbbf6f391b49f1be1b36c5a7e9810b/a5df1/order16.png 576w\", \"/vaccine-solution-main/static/05cbbf6f391b49f1be1b36c5a7e9810b/3cbba/order16.png 1152w\", \"/vaccine-solution-main/static/05cbbf6f391b49f1be1b36c5a7e9810b/0b124/order16.png 1728w\", \"/vaccine-solution-main/static/05cbbf6f391b49f1be1b36c5a7e9810b/4ea69/order16.png 2304w\", \"/vaccine-solution-main/static/05cbbf6f391b49f1be1b36c5a7e9810b/2dd9a/order16.png 2558w\"],\n              \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n              \"style\": {\n                \"width\": \"100%\",\n                \"height\": \"100%\",\n                \"margin\": \"0\",\n                \"verticalAlign\": \"middle\",\n                \"position\": \"absolute\",\n                \"top\": \"0\",\n                \"left\": \"0\"\n              },\n              \"loading\": \"lazy\"\n            }}></img>{`\n    `}</span></p>\n        <p parentName=\"li\">{`More information about Apache Avro, Data Schemas and Schema Registry can be found `}<a parentName=\"p\" {...{\n            \"href\": \"https://ibm-cloud-architecture.github.io/refarch-eda/technology/avro-schemas/\"\n          }}>{`here`}</a></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Schema Registry Secret`}</strong></p>\n        <p parentName=\"li\">{`The last step in this environment preparation section is to create the secret that will hold the IBM Event Streams Schema Registry url for the consumers and producers of the different components of this Vaccine Order Management and Optimization use case to be able to retrieve the data schemas to both serialize and deseralize the events against. `}</p>\n        <p parentName=\"li\">{`The yaml file containing the definition of the the secret we refer to is called `}<inlineCode parentName=\"p\">{`kafka-schema-registry-secret.yaml`}</inlineCode>{` and can be found in the Vaccine Order Manager for Postgres GitHub repository you pulled down earlier under the `}<inlineCode parentName=\"p\">{`src/main/kubernetes`}</inlineCode>{` folder. Open up that yaml file and provide a value for:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<SCRAM_USERNAME>`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`<SCRAM_PASSWORD>`}</inlineCode>{` which are the SCRAM-SHA-512 credentials to get authenticated against the Kafka external listener of our IBM Event Streams instance that we have generated earlier in the `}<strong parentName=\"li\">{`Scram Credentials`}</strong>{` step within this environment preparation section.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<SCHEMA_REGISTRY_URL>`}</inlineCode>{` is the IBM Event Streams Schema Registry url that you can find executing the following command:`}\n            <pre parentName=\"li\"><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`oc get routes -n <EVENTSTREAMS_NS> | grep ac-reg-external\n`}</code></pre>\n          </li>\n        </ul>\n        <p parentName=\"li\">{`Once you have set those three parameters, you can create the secret by executing:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc apply -f kafka-schema-registry-secret.yaml\n`}</code></pre>\n        <p parentName=\"li\">{`within the `}<inlineCode parentName=\"p\">{`src/main/kubernetes`}</inlineCode>{` folder of the Vaccine Order Manager for Postgres GitHub repository. You can checkout it has been properly created by executing:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc describe secret kafka-schema-registry\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Deploy Postgres`}</h3>\n    <p>{`Now, let’s deploy the Postgres database the Vaccine Order Manager for Postgres component will use to back up the creation of new orders, which will then be picked up by the Debezium Change Data Capture for Postgres connector that will be running on the Kafka Connect cluster we will deploy too.`}</p>\n    <p>{`For deploying postgres, we are going to make use of the scripts in the Vaccine GitOps GitHub repository we pulled down earlier. Thus, go into the `}<inlineCode parentName=\"p\">{`vaccine-gitops/environments`}</inlineCode>{` directory. In there you can see several folders (for the different components we might want to deploy) where there is one for `}<inlineCode parentName=\"p\">{`postgres`}</inlineCode>{`. Within that `}<inlineCode parentName=\"p\">{`postgres`}</inlineCode>{` folder, you can see several yaml files that describe the postgres deployment as well as the Kustomize files that describe how to apply all these yaml files.`}</p>\n    <p>{`Now, make sure you are within the `}<inlineCode parentName=\"p\">{`vaccine-gitops/environments`}</inlineCode>{` folder in the `}<inlineCode parentName=\"p\">{`vaccine-gitops`}</inlineCode>{` GitHub repository and execute:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc apply -k postgres\n`}</code></pre>\n    <p>{`After a minute or so, you can see all the pieces comprising our Postgres deployment as well as the actual pod running postgres are properly deployed and running:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`$ oc get all\nNAME                           READY   STATUS    RESTARTS   AGE\npod/postgres-db-postgresql-0   1/1     Running   0          2m54s\n\nNAME                                      TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE\nservice/postgres-db-postgresql            ClusterIP   172.21.130.178   <none>        5432/TCP   2m54s\nservice/postgres-db-postgresql-headless   ClusterIP   None             <none>        5432/TCP   2m54s\n\nNAME                                      READY   AGE\nstatefulset.apps/postgres-db-postgresql   1/1     2m55s\n`}</code></pre>\n    <p>{`Also, you can check that along those components above, the Kustomize scripts were also meant to deploy a secret called `}<inlineCode parentName=\"p\">{`postgresql-creds`}</inlineCode>{` that, as the name suggests, will hold the credential parameters for any other component to be able to connect and use this Postgres instance. You can check this secret out by executing:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc describe secret postgresql-creds\n`}</code></pre>\n    <p>{`where you should see:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`Name:         postgresql-creds\nNamespace:    vaccine-omo\nLabels:       <none>\nAnnotations:  \nType:         Opaque\n\nData\n====\nurl:       48 bytes\nusername:  8 bytes\npassword:  11 bytes\n`}</code></pre>\n    <h3>{`Deploy the Vaccine Order Manager microservice`}</h3>\n    <p>{`In order to deploy the Vaccine Order Manager for Postgres microservice for this use case, we need to be, again, within the `}<inlineCode parentName=\"p\">{`src/main/kubernetes`}</inlineCode>{` folder in the Vaccine Order Manager for Postgres repository. Once there, you can execute the following commands:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc apply -f configmap.yaml\n`}</code></pre>\n    <p>{`that will create the `}<inlineCode parentName=\"p\">{`vaccine-order-ms-cm`}</inlineCode>{` configmap that holds some configuration info for the application`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc apply -f rolebinding.yaml\n`}</code></pre>\n    <p>{`that will create the `}<inlineCode parentName=\"p\">{`vaccineorderms-view`}</inlineCode>{` role binding that will provide view ClusterRole role to the `}<inlineCode parentName=\"p\">{`vaccine-runtime`}</inlineCode>{` service account we created before that is responsible for providing an identity to the processes running in the pods we deploy. `}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc apply -f deployment.yaml\n`}</code></pre>\n    <p>{`that will, finally, deploy the Vaccine Order Manager for Postgres component (which is actually a pod). You can check out the status of the `}<inlineCode parentName=\"p\">{`vaccineorderms-1-xxxxx`}</inlineCode>{` is `}<inlineCode parentName=\"p\">{`Running`}</inlineCode>{` after a min or so by executing:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc get pods\n`}</code></pre>\n    <p>{`Finally, we need to make our newly deployed Vaccine Order Manager for Postgres component available to be accessed and we do so by creating a Kubernetes service (makes a pod internally discoverable and accessible) and an OpenShift route (makes a service externally accessible) for the deployment we carried out in the previous step. For creating the Kubernetes service and the OpenShift route execute respectively:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc apply -f service.yaml\n`}</code></pre>\n    <p>{`and`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc apply -f route.yaml\n`}</code></pre>\n    <p>{`You can now access your Vaccine Order Manager for Postgres component of the use case by pointing your web browser to the route you just created. You can execute the following command to find out the route:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc get route vaccineorderms -o json | jq '.status.ingress[0] | .host'\n`}</code></pre>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"70.4861111111111%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACaUlEQVQ4y3VTyW4TQRD1n0DEgQQJjvwCPwB3fgFuQBQEh0gcECBxZckBDpwIByRQIkHCLQoiYxOCyWIneEOzjz3u6Znpx+tuT2SWtPRU09VVr6tf1dRm5uuYu93AmVt1zNzUcHCa0PbUDQezCw4uPfyGi4sNzC3UcXahgfN3GvQ3cOHuVwOdP0ucI2puLPArTNEPRhgQeu8lGSHgDyW6boJ2z0Or56PrJfTZMxtjoXMq1MBVFjnCMEQcR5CZQJHLY+gzDVUWxk6fVefTq6YUkBcF/CCyCGN4tJ4fIuC3lCQpSgMdV6HyaZQkqWAq1E5N4nqhIfLDyCCME5NsgksmlgpKWdg9CSc+vbSt2Y2aFJwjlwLpKMU4tRDjscGYyLPM+DIxJhgnMgyFvfCYUH/0dntYf9/E2rsm2s0BT6gZE0pNosmjWCuNR89XceX6U1y+9gSrH51jEl1QVaUhPNjp4tXLL3ixtIm607W18jkyLyAp+lhI41v+UMe9pRUsPlvBZ2fP+P55MtuHJEiQSdstVWoCQUt9ZMEgajVpyB+r1N0vpqqsuszEq/c38eDNLra2Wzjq+9RwhMOei8OuizAZoU0rOSJCSkMs9WWUg10x6v9FWOD1egtvN9qYf7yMjUaLN2dY2/qOjZ0DdNwAn5wmidgwVsUHUk2SZPYV/62QHTCiJ1GA4TDGMBXoDlwcdfpoHXaw3/4J148oi7QDThkUKzyBkIMaBCg4DpwPEyj4zDRK0Pqxh/buPmLPNz45HPF8xO6nUElyAqEeVN0EmaHknCmC/x9BzZKYWvEi/XtJ61eTGKWrneputX4DK8YYzDNYJFAAAAAASUVORK5CYII=')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"order5\",\n        \"title\": \"order5\",\n        \"src\": \"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/3cbba/order5.png\",\n        \"srcSet\": [\"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/7fc1e/order5.png 288w\", \"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/a5df1/order5.png 576w\", \"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/3cbba/order5.png 1152w\", \"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/0b124/order5.png 1728w\", \"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/4ea69/order5.png 2304w\", \"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/8bcdf/order5.png 2528w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <h3>{`Deploy Kafka Connect`}</h3>\n    <p>{`Now that we have one part of the puzzle working, which is the Vaccine Order Manager for Postgres deployed and running, we can proceed to get the Debezium CDC for Postges connector deployed so that it translates any change to our postgres database made by the Vaccine Order Manager for Postgres component into an event in our event backbone (Kafka) so that we can make the rest of our ecosystem aware without adding any extra load to our Postgres database.`}</p>\n    <p>{`However, for doing so we need a framework for the Debezium CDC for Postgres connector to run on. And this framework is `}<a parentName=\"p\" {...{\n        \"href\": \"https://kafka.apache.org/documentation/#connect\"\n      }}>{`Kafka Connect`}</a>{`. Kafka Connect is a tool for scalably and reliably streaming data between Apache Kafka and other systems. It makes it simple to quickly define connectors that move large collections of data into and out of Kafka.`}</p>\n    <p><strong parentName=\"p\">{`IMPORTANT:`}</strong>{` We assume you have deployed your IBM Event Streams instance with an internal TLS secured Kafka listener that uses Mutual TLS for authentication as described in the earlier `}<a parentName=\"p\" {...{\n        \"href\": \"#prepare-your-openshift-and-kafka-environments\"\n      }}>{`Prepare your OpenShift and Kafka Environments`}</a>{` section in this tutorial.`}</p>\n    <p>{`Now, follow the next steps in order to get your Kafka Connect cluster deployed:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Go to you IBM Event Streams dashboard, click on the `}<inlineCode parentName=\"p\">{`Find more on the toolbox`}</inlineCode>{` option.`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"63.19444444444444%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+ElEQVQ4y21TyY7TQBD1B4OjSJFyyU/wARy48AfAgRNcgBOCSWA0kwHNBE2IHa+9eM+jXjsdEkFLz91VXfVqawez2Qzz+dxhsVicztPpFJPJxCEMQ8HkhCdPqQ8dwsmo87aBtQZRFKEoCiRJgjzPkWUZrLXgOhww7mffHw8RSm3R9SIf+gu7IE1TEPv93oGk3KljEFUWeP3uCsvVd8SpwvVGI40fsdnuESUKH78lWG9S6DJHLvYBnYwx0Fr/sxPMeHW9xvJuj7fLFuHLAc/fD4hSgy9fr/Dh8y3uf+1gxFYpNRLqo/A/aK2QFRYvXq1wv9ni07rBszcWj7HG+vYGcRwLmULpbDWCsiwvMlLHC3/mfV4o3P18QCKtaCqFxhawRqGqKudbnoKfEdZ1jaZp0Pe9k2ncdZ2T27YRh9LJbUvdIM7G9bhtW6cn6BeQ2UciKReJqfPrICNkYH/P5QjkJVixG44jPhEyCkkIfz4f0DAMDhd2gtpodHUlLZAnJMEcoZ8yS2NUOpLIl+zLZmDuBDOy0W9owaAK9IIhS2CydOwhCWjoV32M5nUMQsLzkhshUJJZVUu2rFiyN2nyt4cESxkb3zpCXx6JufvBNXI/5Cl6kTtWQht52I6QGfqR83cjSEadl73uJAuJTWJXso520LE87N0WOs/wB8jyycyjN3BxAAAAAElFTkSuQmCC')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"Toolbox1\",\n            \"title\": \"Toolbox1\",\n            \"src\": \"/vaccine-solution-main/static/3e98cb0262b59cc2ccf9a764fe2949cf/3cbba/connect-1.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/3e98cb0262b59cc2ccf9a764fe2949cf/7fc1e/connect-1.png 288w\", \"/vaccine-solution-main/static/3e98cb0262b59cc2ccf9a764fe2949cf/a5df1/connect-1.png 576w\", \"/vaccine-solution-main/static/3e98cb0262b59cc2ccf9a764fe2949cf/3cbba/connect-1.png 1152w\", \"/vaccine-solution-main/static/3e98cb0262b59cc2ccf9a764fe2949cf/0b124/connect-1.png 1728w\", \"/vaccine-solution-main/static/3e98cb0262b59cc2ccf9a764fe2949cf/4ea69/connect-1.png 2304w\", \"/vaccine-solution-main/static/3e98cb0262b59cc2ccf9a764fe2949cf/caafe/connect-1.png 3242w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click on the `}<inlineCode parentName=\"p\">{`Set up`}</inlineCode>{` button for the `}<inlineCode parentName=\"p\">{`Set up a Kafka Connect environment`}</inlineCode>{` option.`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"81.25%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACX0lEQVQ4y61UPW8TQRD1f/S/SKwACkVc0FLQpKBCAgmKJMI4MQ1pKKigIMEQgpRAEMiJHSPHPtv3sbcft/uY2Y3PNqRBYqyn092+fTvzZtaVarWKZrOJ7e1ttFotj93dXY9Go/HPqNTrdfzPqNxaW0Oa5RiNRkjTFEmSlIjjuMRkSs8k9ZwZj7//yaus392AtqCXFMYYWGtLOOfKk6UymCQCMs+RCQGtdcmbh0Pl9p115LlAp9PBcDhcys4Y2kSaugBVIdDrddHtBgwGA8/jbC2RmKMMCa6urHhtzq4oCv9kaGagwLtTg5XHBm9PNb1bWptXoE3gfLs02NgyuL+nSXB1Fbl2lEEGKWWJnErjzONUIJoITGIBkUuo6zVBZc/A2UdTgTGBBGvewymZnmXB8IzElVJL/iilSZjWaJ0Fbw4XMuRIyLOZ2EyQCRcj4PAH0I80pODupr6CxRBEPeoAx+ckWKvV/EcWCd5pD87IFgqvDiXu7UgcnLEIfw+cYItEYSTOBxIPXko83M9DyaqYCy6L0tGWMw2bWWzGCTzlhZXiw5grQ4a6cBiPJ16Uy2Yh3uDsfA4VHTAcRdSEYAk340YPWdDZws8V35bh1RU1aIo0SX1TDGV18CVFr5/QUAcPWTCKInxot3H8+ROOTjre548/7bwpi7eCw98U+iXjFJtPL/C+PVpa58FvNF5gZ+sZnjx/g8194NHr6zlkD+M4KWeQPQkHuIUDDIbjxI8Wl8+W/B2U4Rr9OVgqma/d4iUvaANVi++/HE66DlcTjVzwnGZl0xjOWUga5K+XwFnf4jdeWKhlUJxq0AAAAABJRU5ErkJggg==')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"Toolbox2\",\n            \"title\": \"Toolbox2\",\n            \"src\": \"/vaccine-solution-main/static/b25f62c3ba1a8e1e54ea8c6135360b11/3cbba/connect-2.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/b25f62c3ba1a8e1e54ea8c6135360b11/7fc1e/connect-2.png 288w\", \"/vaccine-solution-main/static/b25f62c3ba1a8e1e54ea8c6135360b11/a5df1/connect-2.png 576w\", \"/vaccine-solution-main/static/b25f62c3ba1a8e1e54ea8c6135360b11/3cbba/connect-2.png 1152w\", \"/vaccine-solution-main/static/b25f62c3ba1a8e1e54ea8c6135360b11/0b124/connect-2.png 1728w\", \"/vaccine-solution-main/static/b25f62c3ba1a8e1e54ea8c6135360b11/4ea69/connect-2.png 2304w\", \"/vaccine-solution-main/static/b25f62c3ba1a8e1e54ea8c6135360b11/08024/connect-2.png 3208w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click on `}<inlineCode parentName=\"p\">{`Download Kafka Connect ZIP`}</inlineCode>{` button.`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"64.2361111111111%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABc0lEQVQ4y4WTWW+DMBCE+VuJ8lKSPub/K20Q9w3lPvqQTj1Wl5KGqEijtY33Y7xrjBfziNPpFccj4wmmaeJ8PuuxrB0OB+x2O+z3+39lFB8tkrRAFIUoigJ1XaOqKh1FTdOgbduHuCVjHAdM44h5ntF1HXzfRxzH8DxvEdco13X1nImjyhmG4UEGIW3baRjdBEGgRUCSJHdORQRy/5aMvu/1gJGbLcuCbdsIw1ADsyxblOe5lszTNEVZllgz7oCsjRyRLqMo0mOuyXHXZeAawTzqUyCdCYhQOpJG/BVPJLnbQLVBnPh05Th3TVnXVxwS+hRYqZeO58NxFUwllOr6NMqdXCNGSpoicRuo6tCmMbL3C3LrDZlSeb2gjCMUqvC8oyKCmCcS2ALs2XIVx8gHvm6Q59Z8YMhTDNOEQb2XuyYQ0YPDBRgHqNW4ZNGnGUNFYIbup4vPIGv9Avn1wEVrX9F5Nj7TCLNzRZ8l6NRf0W8kb+kbYDqwcLY8z+EAAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"Toolbox3\",\n            \"title\": \"Toolbox3\",\n            \"src\": \"/vaccine-solution-main/static/509590c8035c75fce7af2765a6d280f5/3cbba/connect-3.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/509590c8035c75fce7af2765a6d280f5/7fc1e/connect-3.png 288w\", \"/vaccine-solution-main/static/509590c8035c75fce7af2765a6d280f5/a5df1/connect-3.png 576w\", \"/vaccine-solution-main/static/509590c8035c75fce7af2765a6d280f5/3cbba/connect-3.png 1152w\", \"/vaccine-solution-main/static/509590c8035c75fce7af2765a6d280f5/0b124/connect-3.png 1728w\", \"/vaccine-solution-main/static/509590c8035c75fce7af2765a6d280f5/8cacc/connect-3.png 2294w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`The above downloads a zip file which contains a `}<inlineCode parentName=\"p\">{`kafka-connect-s2i.yaml`}</inlineCode>{` file. Open that yaml file and take note of the `}<inlineCode parentName=\"p\">{`productID`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`cloudpakId`}</inlineCode>{` values as you will need these in the following step.`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"567px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"131.25%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAADdklEQVRIx31V2XLjNhDUbySmiIsACIo3dVmKbO2ZqrzmOf//GZ0GtKZlreSHqTHKQrN7pmewkCKHXk0I/Q5922PbVHhuK4yVR2UNaleg8TaFFALL5RJ5ns9xe15IKaCrAWE8oi0tgpEojYJVEoI//vPpaY5llhEgSyAZ4w3sGnShlYI0DuX+J7rNCcOwRnAOdVmi9B5CakhdQCjNMCknEowHDCUBLbRfQboawrcpS3c5a2ZdtlA28Dd1CmsMQqHvAyoCKl5ywxE21KgbD60lMkrMKPFePMX8SHJRUIa28OsvKNdnlN2GrCqs2IyudHPugkuN6ZlbnrMbZjOg0ayNZBO6ZxjKuXxNQLGj8k4oKe52ewa0bEDOfxZVj7D/AdtsYUKfauecTRevI7s53wYls4Px62RpugMKhmKDnsjyj4wAuZi/LmKIS75mdX2eAXPGYB1exwNO0xFf+wl/DyO6qk2dL8oGKxp9vSrRspaxrrGecQBijufAfiwcJUfAGK0rsd99w5bSz+sd/t22eK3jBZ+aUtIqdQKzGMJlkn6zzbtkFtp4yGYH1e6xXK3haO4Nx/DQrRKTxhdpFG9H70MNrbUzw0CGIxkOZLjZvODLdo/9sEGoGkr12BN8Wvlkn4rAUarV6oOF3mtIg3ecgG/jM74ff+IHR/C/KeCfzqMOl/p4o9O8R8lx9B4Y+5dkdi/nrOr+CD2coPoTdLdDu5kwkJmJy4IX3nx4C/T298JRck7LuP5AD8a6cfxCQEWZTd1Bc86jycWvS9c+vK7hB4Z5voThCitoahta1AQqOddxxDo2IkqNIxhlR8so+cmkuLdJqcmOUt34Arf5DjudCdzg69RgWwe8DA12TcB5bC+NyD4FzGDbHfz0Cj+euCjOKYfxL9TDDmE4oGlbePou1vLe2npfDuxslBx3nqmmFAW9aOjDgn6Mz4OpWYqy4hIRaXUtH6z/maEqBBz9ZRkFJ8CEksvCQ5n3TS252T8YOn/AMDZFGnGpY6n4WPFdGbgfawPHMF5BWwnjmGNY9VDuLDkCGqcJqOEbS7b8CLe2KtTdS8kqjwB9yfmlZN8UWK092XEqRi6CziZWUon7nrvx3weGQvFtJhtXFymKYFg/Pl5apEYsaZEUd0bt943NSYmSo8TIrN7w+WQdPRnGHJn6tkj1i8v1M7AY/wMQZ+GwiU2W2AAAAABJRU5ErkJggg==')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"connect4\",\n            \"title\": \"connect4\",\n            \"src\": \"/vaccine-solution-main/static/8726d399b0947fbf285cd89e391ca130/a0efd/connect-4.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/8726d399b0947fbf285cd89e391ca130/7fc1e/connect-4.png 288w\", \"/vaccine-solution-main/static/8726d399b0947fbf285cd89e391ca130/a0efd/connect-4.png 567w\"],\n            \"sizes\": \"(max-width: 567px) 100vw, 567px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n    </ol>\n    <p>{`However, instead of using that `}<inlineCode parentName=\"p\">{`kafka-connect-s2i.yaml`}</inlineCode>{` we are going to use the one provided within the `}<inlineCode parentName=\"p\">{`environment/cdc`}</inlineCode>{` folder of the Vaccine Order Manager for Postgres GitHub repository. If you open up that file you will see the following placeholders:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<UNIQUE_ID>`}</inlineCode>{` which you should replace for the unique identifier you chose before to be used for all the resouces created within the deployment of this Vaccine Order Management and Optimization use case.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<GET_IT_FROM_EVENTSTREAMS>`}</inlineCode>{` which should be replaced with the `}<inlineCode parentName=\"li\">{`productID`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`cloudpakId`}</inlineCode>{` values you obtained in the previous step.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<KAFKA_BOOTSTRAP_URL>`}</inlineCode>{` which is the `}<strong parentName=\"li\">{`internal Kafka listener bootstrap url`}</strong>{`. You can review how to find this url in the `}<em parentName=\"li\">{`Kafka Topics Configmap`}</em>{` subsection within the `}<a parentName=\"li\" {...{\n          \"href\": \"#prepare-your-openshift-and-kafka-environments\"\n        }}>{`Prepare your OpenShift and Kafka Environments`}</a>{` section.`}</li>\n    </ul>\n    <p>{`If we carefully inspect this yaml that would get a Kafka Connect cluster deployed, we should realise that we still have to create a secret called `}<inlineCode parentName=\"p\">{`postgres-connector`}</inlineCode>{` ahead of time that will be loaded as external configuration. This `}<inlineCode parentName=\"p\">{`postgres-connect`}</inlineCode>{` secret will hold the configuration that, later, the Debezium CDC for Postgres connector will need to function. In order to create that secret, we provide a file called `}<inlineCode parentName=\"p\">{`connector.properties`}</inlineCode>{` also under the `}<inlineCode parentName=\"p\">{`environment/cdc`}</inlineCode>{` folder of the Vaccine Order Manager for Postgres GitHub repository.`}</p>\n    <p>{`Again, if you open up that file you will see the following placeholders:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<UNIQUE_ID>`}</inlineCode>{` which you should replace for the unique identifier you chose before to be used for all the resouces created within the deployment of this Vaccine Order Management and Optimization use case. In fact, it is `}<strong parentName=\"li\">{`IMPERATIVE`}</strong>{` that we use the same unique identifier. The reason for this is that the Debezium CDC for Postgres connector will be watching out for new records (which will be the result of any change in any of the tables of our Postgres database) on the tables of our Postgres deployment that are specified in its `}<inlineCode parentName=\"li\">{`table-whitelist`}</inlineCode>{` configuration property. It will send those new records as events to a Kafka topic named the same as the table name specified in the `}<inlineCode parentName=\"li\">{`table-whitelist`}</inlineCode>{` configuration property prefixed with the value of its `}<inlineCode parentName=\"li\">{`database-server-name`}</inlineCode>{` configuration property. If you work that out, you see that the `}<inlineCode parentName=\"li\">{`ORDER_TOPIC`}</inlineCode>{` value we defined in the configmap holding the Kafka topic names was and must be `}<inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.public.orderevents`}</inlineCode>{`, as this is where the events will end up based on the Debezium CDC for Postgres connector configuration properties file.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<SCRAM_USERNAME>`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`<SCRAM_PASSWORD>`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`<SCHEMA_REGISTRY_URL>`}</inlineCode>{` are the SCRAM credentials for authentication against your IBM Event Streams instance and the Schema Registry url of it respectively that the Debezium CDC for Postgres connector will need in order to access the data schema it will need to AVRO serialize the events to be sent to Kafka. You can review how to find these values in the `}<em parentName=\"li\">{`Schema Registry Secret`}</em>{` subsection within the `}<a parentName=\"li\" {...{\n          \"href\": \"#prepare-your-openshift-and-kafka-environments\"\n        }}>{`Prepare your OpenShift and Kafka Environments`}</a>{` section.`}</li>\n    </ul>\n    <p>{`In order to create that `}<inlineCode parentName=\"p\">{`postgres-connector`}</inlineCode>{` secret that holds the Debezium CDC for Postgres connector configuration out of the `}<inlineCode parentName=\"p\">{`connector.properties`}</inlineCode>{` file we have just tailored to our environment, we only need to run the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc create secret generic postgres-connector --from-file=./connector.properties\n`}</code></pre>\n    <p>{`One last thing to do before deploying our Kafka Connect cluster is the need to copy the secret that holds your IBM Entitlement Key over from the OpenShift project where you have IBM Event Streams deployed into. This IBM Entitlement Key is needed to download any IBM product Docker image from IBM’s private Docker registry in Quay. This is something you must have present in all your OpenShift projects where you want IBM software to be deployed into. In order to copy that IBM Entitlement Key secret from the OpenShift project where you have your IBM Event Streams instance deployed into, execute the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc get secret ibm-entitlement-key -n <EVENTSTREAMS_NS> -o json | jq --arg project_name \"<PROJECT_NAME>\" -r '.metadata.namespace=$project_name' | oc apply -f -\n`}</code></pre>\n    <p>{`where`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<EVENTSTREAMS_NS>`}</inlineCode>{` is the OpenShift project where your IBM Event Streams instance is deployed into (`}<inlineCode parentName=\"li\">{`eventstreams`}</inlineCode>{` in this tutorial).`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<PROJECT_NAME>`}</inlineCode>{` is the OpenShift project where you are deploying your Kafka Connect cluster into (`}<inlineCode parentName=\"li\">{`vaccine-omo`}</inlineCode>{` in this tutorial).`}</li>\n    </ul>\n    <p>{`Finally, we are all set to deploy our Kafka Connect cluster. In order to do so, we only need to execute the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc apply -f kafka-connect-s2i.yaml\n`}</code></pre>\n    <p>{`You can watch all the resources being created as a result and their progress by executing:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`watch -n 5 oc get all\n`}</code></pre>\n    <p>{`after a couple of minutes or so you should see something like this:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`NAME                                         READY   STATUS      RESTARTS   AGE\npod/connect-cluster-demo-connect-1-5d7f9     1/1     Running     0          65s\npod/connect-cluster-demo-connect-1-build     0/1     Completed   0          102s\npod/connect-cluster-demo-connect-1-deploy    0/1     Completed   0          66s\npod/postgres-db-postgresql-0                 1/1     Running     0          46h\npod/vaccineorderms-1-deploy                  0/1     Completed   0          19h\npod/vaccineorderms-1-jsx8n                   1/1     Running     0          19h\n\nNAME                                                    DESIRED   CURRENT   READY   AGE\nreplicationcontroller/connect-cluster-demo-connect-1    1         1         0       67s\nreplicationcontroller/vaccineorderms-1                  1         1         1       19h\n\nNAME                                        TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE\nservice/connect-cluster-demo-connect-api    ClusterIP   172.21.173.130   <none>        8083/TCP   105s\nservice/postgres-db-postgresql              ClusterIP   172.21.130.178   <none>        5432/TCP   46h\nservice/postgres-db-postgresql-headless     ClusterIP   None             <none>        5432/TCP   46h\nservice/vaccineorderms                      ClusterIP   172.21.157.216   <none>        8080/TCP   19h\n\nNAME                                      READY   AGE\nstatefulset.apps/postgres-db-postgresql   1/1     46h\n\nNAME                                                               REVISION   DESIRED   CURRENT   TRIGGERED BY\ndeploymentconfig.apps.openshift.io/connect-cluster-demo-connect    1          1         1         config,image(connect-cluster-demo-connect:latest)\ndeploymentconfig.apps.openshift.io/vaccineorderms                  1          1         1         config\n\nNAME                                                           TYPE     FROM     LATEST\nbuildconfig.build.openshift.io/connect-cluster-demo-connect    Source   Binary   1\n\nNAME                                                       TYPE     FROM   STATUS     STARTED              DURATION\nbuild.build.openshift.io/connect-cluster-demo-connect-1    Source          Complete   About a minute ago   36s\n\nNAME                                                                  IMAGE REPOSITORY                                                                                    TAGS\n                                                           UPDATED\nimagestream.image.openshift.io/connect-cluster-demo-connect           image-registry.openshift-image-registry.svc:5000/vaccine-omo/connect-cluster-demo-connect           latest\n                                                           About a minute ago\nimagestream.image.openshift.io/connect-cluster-demo-connect-source    image-registry.openshift-image-registry.svc:5000/vaccine-omo/connect-cluster-demo-connect-source    4c6aa063\nae06dbae9acdd3ad0200e89205d86fc4b93b07f835817a7bee929c2a   About a minute ago\n\nNAME                                      HOST/PORT                                                                                                             PATH   SERVICES\n      PORT   TERMINATION   WILDCARD\nroute.route.openshift.io/vaccineorderms   vaccineorderms-vaccine-omo.assets-arch-eda-6ccd7f378ae819553d37d5f2ee142bd6-0000.us-east.containers.appdomain.cloud   /      vaccineorde\nrms   8080                 None\n`}</code></pre>\n    <p>{`where we can see the pod `}<inlineCode parentName=\"p\">{`connect-cluster-demo-connect-1-xxxxx`}</inlineCode>{` is running. This means your Kafka Connect cluster is running. However, we can see some other resources have been created as a result of telling OpenShift to deploy a Kafka Connect cluster. Amongst these you can see a couple of Image Streams (to build a Docker image from source code), a Build Config, a Build, a Deployment Config, etc. It is not the goal of this tutorial to explain what goes on behind the scenes when deploying a Kafka Connect cluster using the KafkaConnectS2I (kafka connect source to image) construct but it is something we highly recommend students investigate.`}</p>\n    <p>{`Now that we have our Kafka Connect cluster running, one thing we can check out is whether there is any connector configured in it that may be running. In order to do so, we are going to poke the `}<inlineCode parentName=\"p\">{`/connectors`}</inlineCode>{` API that the Kafka Connect Framework exposes. In order to do so, execute the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc exec -it <KAFKA_CONNECT_POD_NAME> -- curl localhost:8083/connectors\n`}</code></pre>\n    <p>{`where`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<KAFKA_CONNECT_POD_NAME>`}</inlineCode>{` is the pod name of your Kafka Connect cluster (in this tutorial is `}<inlineCode parentName=\"li\">{`connect-cluster-demo-connect-1-5d7f9`}</inlineCode>{`).`}</li>\n    </ul>\n    <p>{`You should see `}<inlineCode parentName=\"p\">{`[]`}</inlineCode>{` as the output for the command above since there should not be any connector configured and running yet in your Kafka Connect cluster. This is something we are going to see in the next section.`}</p>\n    <p>{`Another thing we can check out is the connector plugins registered in our Kafka Connect cluster. That is the available plugins to create/instantiate a connector from. In order to see a list of the connector plugins in our Kafka Connect cluster, execute the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc exec -it <KAFKA_CONNECT_POD_NAME> -- curl localhost:8083/connector-plugins\n`}</code></pre>\n    <p>{`and you should see an output like:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`[\n  {\n    \"class\": \"org.apache.kafka.connect.file.FileStreamSinkConnector\",\n    \"type\": \"sink\",\n    \"version\": \"2.6.0\"\n  },\n  {\n    \"class\": \"org.apache.kafka.connect.file.FileStreamSourceConnector\",\n    \"type\": \"source\",\n    \"version\": \"2.6.0\"\n  },\n  {\n    \"class\": \"org.apache.kafka.connect.mirror.MirrorCheckpointConnector\",\n    \"type\": \"source\",\n    \"version\": \"1\"\n  },\n  {\n    \"class\": \"org.apache.kafka.connect.mirror.MirrorHeartbeatConnector\",\n    \"type\": \"source\",\n    \"version\": \"1\"\n  },\n  {\n    \"class\": \"org.apache.kafka.connect.mirror.MirrorSourceConnector\",\n    \"type\": \"source\",\n    \"version\": \"1\"\n  }\n]\n`}</code></pre>\n    <p>{`where there is no Debezium CDC for Postgres connector plugin.`}</p>\n    <h3>{`Deploy Debezium CDC Postgres connector`}</h3>\n    <p>{`We have seen in the previous section that the Kafka Connect cluster we have just deployed does not contain any connector configured and running yet. And this makes sense since we have only deployed the Kafka Connect Cluster, with the configuration we will need for the Debezium CDC for Postgres connector that we plan to execute afterwards but we yet need to do two things for that:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Provide the actual Debezium CDC for Postgres connector binaries. That is, the binaries our Kafka Connect cluster will use when instantiating a Debezium CDC for Postgres connector.`}</li>\n      <li parentName=\"ol\">{`Register, that is instantiate, a Debezium CDC for Postgres connector for our use case so that we get the records stored by the Vaccine Order Manager for Postgres microservice in our Postgres deployment in the `}<inlineCode parentName=\"li\">{`public.orderevents`}</inlineCode>{` table of its `}<inlineCode parentName=\"li\">{`orderdb`}</inlineCode>{` database as events in the `}<inlineCode parentName=\"li\">{`<UNIQUE_ID>.vaccine.public.orderevents`}</inlineCode>{` Kafka topic as we saw, explained and configured earlier in this tutorial.`}</li>\n    </ol>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Debezium CDC Postgres connector binaries`}</strong></p>\n        <p parentName=\"li\">{`You can find the latest Debezium CDC for Postgres connector binaries `}<a parentName=\"p\" {...{\n            \"href\": \"https://repo1.maven.org/maven2/io/debezium/debezium-connector-postgres/\"\n          }}>{`here`}</a>{`. Go into the folder for the latest version which should be called `}<inlineCode parentName=\"p\">{`X.Y.Z.Final`}</inlineCode>{`. Within that folder find the file called `}<inlineCode parentName=\"p\">{`debezium-connector-postgres-X.Y.Z.Final-plugin.tar.gz`}</inlineCode>{` and download it. Once downloaded, untar the file. You will see several jar files. Something like:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`debezium-api-1.5.0.Final.jar\ndebezium-connector-postgres-1.5.0.Final.jar\ndebezium-core-1.5.0.Final.jar\nfailureaccess-1.0.1.jar\nguava-30.0-jre.jar\npostgresql-42.2.14.jar\nprotobuf-java-3.8.0.jar\n`}</code></pre>\n        <p parentName=\"li\"><em parentName=\"p\">{`Attention we used the version 1.5.0.Final at the time of the test, but if you use another version you may need to change the order-mgr-pg’s pom/xml file to reflect those version miss matches. The gitops project has the 1.5.0 jars.`}</em></p>\n        <p parentName=\"li\">{`They all are needed and what is more important is that we need to provide any connector to our Kafka Connect cluster `}<strong parentName=\"p\">{`within the following structure`}</strong>{`:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{` - /connectors\n   |\n     - /connector1\n       |\n         - jar1\n         ...\n         - jarN\n       ...\n     - /connectorN\n`}</code></pre>\n        <p parentName=\"li\">{`However, if you pay a close look at the jar files within the Debezium CDC for Postgres connector tar file we have downloaded, you will not see any jar file around Apicurio which is the schema registry IBM Event Streams deploys which we want to interact with. That is, we want the Debezium CDC for Postgres connector to automatically interact with IBM Event Streams Schema Registry for the events to be sent to comply with a schema and are serialized using the `}<a parentName=\"p\" {...{\n            \"href\": \"http://avro.apache.org/\"\n          }}>{`Apache Avro protocol`}</a>{`. For doing this, we need to provide more binaries for our Debezium CDC for Postgres connector (see this `}<a parentName=\"p\" {...{\n            \"href\": \"https://debezium.io/blog/2020/04/09/using-debezium-with-apicurio-api-schema-registry/\"\n          }}>{`Debezium post`}</a>{` and this `}<a parentName=\"p\" {...{\n            \"href\": \"https://debezium.io/documentation/reference/configuration/avro.html\"\n          }}>{`Debezium post`}</a>{` for further detail).`}</p>\n        <p parentName=\"li\">{`To get all the extra binaries we need for our Debezium CDC for Postgres connector to automatically interact with the IBM Event Streams Apicurio Schema Registry and the Avro protocol, download the `}<inlineCode parentName=\"p\">{`Apicurio Registry Distro Connect Converter`}</inlineCode>{` package from the Maven Central repository `}<a parentName=\"p\" {...{\n            \"href\": \"https://mvnrepository.com/artifact/io.apicurio/apicurio-registry-distro-connect-converter\"\n          }}>{`here`}</a>{`. Click on the latest `}<inlineCode parentName=\"p\">{`X.Y.Z.Final`}</inlineCode>{` version and then click on the `}<inlineCode parentName=\"p\">{`View All`}</inlineCode>{` link displayed in the `}<inlineCode parentName=\"p\">{`Files`}</inlineCode>{` row within the table displayed under the title of the package. This will drive you to a the location where you should find a file called `}<inlineCode parentName=\"p\">{`apicurio-registry-distro-connect-converter-X.Y.Z.Final-converter.tar.gz`}</inlineCode>{`. Download this file and untar it. Then, copy all the `}<inlineCode parentName=\"p\">{`jar`}</inlineCode>{` files with the other Debezium CDC for Postgres connector jar files in the connectors folder structure explained above.`}</p>\n        <p parentName=\"li\">{`You should now have a list of jar files like the following (at the time of writting this tutorial March 2021):`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`├── debezium-connector-postgres\n│   ├── annotations-13.0.jar\n│   ├── apicurio-registry-client-2.0.0.Final.jar\n│   ├── apicurio-registry-common-2.0.0.Final.jar\n│   ├── apicurio-registry-distro-connect-converter-2.0.0.Final.jar\n│   ├── apicurio-registry-serde-common-2.0.0.Final.jar\n│   ├── apicurio-registry-serdes-avro-serde-2.0.0.Final.jar\n│   ├── apicurio-registry-serdes-jsonschema-serde-2.0.0.Final.jar\n│   ├── apicurio-registry-utils-converter-2.0.0.Final.jar\n│   ├── avro-1.10.2.jar\n│   ├── bcpkix-jdk15on-1.68.jar\n│   ├── bcprov-jdk15on-1.68.jar\n│   ├── commons-codec-1.15.jar\n│   ├── commons-compress-1.20.jar\n│   ├── commons-logging-1.2.jar\n│   ├── connect-json-2.4.0.jar\n│   ├── debezium-api-1.5.0.Final.jar\n│   ├── debezium-connector-postgres-1.5.0.Final.jar\n│   ├── debezium-core-1.5.0.Final.jar\n│   ├── failureaccess-1.0.1.jar\n│   ├── guava-30.0-jre.jar\n│   ├── httpclient-4.5.13.jar\n│   ├── httpcore-4.4.14.jar\n│   ├── jackson-annotations-2.12.1.jar\n│   ├── jackson-core-2.12.1.jar\n│   ├── jackson-databind-2.12.1.jar\n│   ├── jackson-datatype-jdk8-2.12.1.jar\n│   ├── jakarta.activation-1.2.1.jar\n│   ├── jboss-logging-3.4.1.Final.jar\n│   ├── keycloak-authz-client-12.0.3.jar\n│   ├── keycloak-common-12.0.3.jar\n│   ├── keycloak-core-12.0.3.jar\n│   ├── kotlin-reflect-1.4.20.jar\n│   ├── kotlin-stdlib-1.4.20.jar\n│   ├── kotlin-stdlib-common-1.4.20.jar\n│   ├── medeia-validator-core-1.1.1.jar\n│   ├── medeia-validator-jackson-1.1.1.jar\n│   ├── postgresql-42.2.14.jar\n│   └── protobuf-java-3.8.0.jar\n\n`}</code></pre>\n        <p parentName=\"li\">{`We are finally ready to upload the Debezium CDC for Postgres connector binaries to our Kafka Connect cluster. To do so, we need to start a new build of our build resource created as a result of having created a KafkaConnectS2I resource when we deployed the Kafka Connect cluster. This will build the source code for Kafka Connect once again but this time we are going to provide Debezium CDC for Postgres connector binaries to the build process so that these are then processed by the Kafka Connect Framework and the Debezium CDC for Postgres connector plugin is available as a result to be instantiated and used. In order to kick off a new build of Kafka Connect with the Debezium CDC for Postgres connector binaries execute the following command:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc start-build <BUILD> --from-dir <CONNECTORS_DIR> --follow\n# Example\noc start-build connect-cluster-demo-connect --from-dir ./connectors --follow\n`}</code></pre>\n        <p parentName=\"li\">{`where`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<BUILD>`}</inlineCode>{` is the build resource name created as a result of having created a KafkaConnectS2I resource when deploying a Kafka Connect cluster. You can find the name of your Kafka Connect build by executing the following command:`}\n            <pre parentName=\"li\"><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`oc get build\n`}</code></pre>\n            {`where the name should be like `}<inlineCode parentName=\"li\">{`connect-cluster-<UNIQUE_ID>-connect`}</inlineCode></li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<CONNECTORS_DIR>`}</inlineCode>{` is the path to the directory containing the different connectors’ binaries we want to build our Kafka Connect cluster with which we created above containing all the Debezium CDC for Postgres connector binaries. `}<strong parentName=\"li\">{`IMPORTANT:`}</strong>{` the path should point to the outer folder containing a folder per connector. That is, something like `}<inlineCode parentName=\"li\">{`./connectors`}</inlineCode>{` if we were to execute the command from the folder where we have the `}<inlineCode parentName=\"li\">{`connectors`}</inlineCode>{` folder rather than `}<inlineCode parentName=\"li\">{`./connectors/connector1`}</inlineCode>{`.`}</li>\n        </ul>\n        <p parentName=\"li\">{`After executing this command, you should see in your terminal the output of the build process with the binaries upload, the docker image creation, etc.`}</p>\n        <p parentName=\"li\">{`If you watch all the resources in your OpenShift project with `}<inlineCode parentName=\"p\">{`watch -n oc get all`}</inlineCode>{`, you should see a new build resource, the desired replicas for the replica controller resource for the first Kafka Connect cluster down to 0 while the desired replicas for the replica controller resource for the second Kafka Connect cluster is set to 1, etc… Finally, you should see a new `}<inlineCode parentName=\"p\">{`build`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`deploy`}</inlineCode>{` pods for this second iteration of the Kafka Connect cluster and the most important pod, the pod where our Kafka Connect cluster runs into that should be called `}<inlineCode parentName=\"p\">{`connect-cluster-demo-connect-2-xxxxx`}</inlineCode>{`, with `}<inlineCode parentName=\"p\">{`STATUS`}</inlineCode>{` equal to `}<inlineCode parentName=\"p\">{`Running`}</inlineCode>{`.`}</p>\n        <p parentName=\"li\">{`If we now poke the `}<inlineCode parentName=\"p\">{`/connector-plugins`}</inlineCode>{` API endpoint of our Kafka Connect cluster by executing:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc exec -it <KAFKA_CONNECT_POD_NAME> -- curl localhost:8083/connector-plugins\n`}</code></pre>\n        <p parentName=\"li\">{`where`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<KAFKA_CONNECT_POD_NAME>`}</inlineCode>{` is the name of the pod running our Kafka Connect cluster (`}<inlineCode parentName=\"li\">{`connect-cluster-demo-connect-2-xxxxx`}</inlineCode>{`)`}</li>\n        </ul>\n        <p parentName=\"li\">{`we should see that the Debezium CDC for Postgres connector plugin is now listed:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`[\n{\n  \"class\": \"io.debezium.connector.postgresql.PostgresConnector\",\n  \"type\": \"source\",\n  \"version\": \"1.2.0.Final\"\n},\n{\n  \"class\": \"org.apache.kafka.connect.file.FileStreamSinkConnector\",\n  \"type\": \"sink\",\n  \"version\": \"2.6.0\"\n},\n{\n  \"class\": \"org.apache.kafka.connect.file.FileStreamSourceConnector\",\n  \"type\": \"source\",\n  \"version\": \"2.6.0\"\n},\n{\n  \"class\": \"org.apache.kafka.connect.mirror.MirrorCheckpointConnector\",\n  \"type\": \"source\",\n  \"version\": \"1\"\n},\n{\n  \"class\": \"org.apache.kafka.connect.mirror.MirrorHeartbeatConnector\",\n  \"type\": \"source\",\n  \"version\": \"1\"\n},\n{\n  \"class\": \"org.apache.kafka.connect.mirror.MirrorSourceConnector\",\n  \"type\": \"source\",\n  \"version\": \"1\"\n}\n]\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Register a Debezium CDC for Postgres connector`}</strong></p>\n        <p parentName=\"li\">{`The last piece of the Outbox pattern is to get a Debezium CDC for Postgres connector instantiated in our Kafka Connect cluster now that we have both the Kafka Connect cluster running with the Debezium CDC for Postgres connector binaries in it and the resulting connector plugin available as a result.`}</p>\n        <p parentName=\"li\">{`For getting a Debezium CDC for Postgres connector instantiated, we provide, within the `}<inlineCode parentName=\"p\">{`environment/cdc`}</inlineCode>{` folder of the Vaccine Order Manager for Postgres GitHub repository, a file called `}<inlineCode parentName=\"p\">{`pg-connector.yaml`}</inlineCode>{` which is nothing but the definition of a KafkaConnect resource. The Debezium CDC for Postgres connector specification within that KafkaConnect resource has been parametrized so that all its configuration is taken from the environment it runs on. That is, it will take its configuration from the `}<inlineCode parentName=\"p\">{`postgres-connector`}</inlineCode>{` secret we load as external configuration when we deployed our Kafka Connect cluster if you remember the `}<inlineCode parentName=\"p\">{`kafka-connect-s2i.yaml`}</inlineCode>{` file. And, if you remember, the configuration from that secret comes from the `}<inlineCode parentName=\"p\">{`connector.properties`}</inlineCode>{` file in turn. However, as in with practically all the resources we’ve created so far for this use case, we would still need to provide a unique identifier (`}<inlineCode parentName=\"p\">{`demo`}</inlineCode>{` in this tutorial) for the `}<inlineCode parentName=\"p\">{`<UNIQUE_ID>`}</inlineCode>{` placeholder in the `}<inlineCode parentName=\"p\">{`pg-connector.yaml`}</inlineCode>{` file. Provide that unique identifier and then execute the following command to get that KafkaConnect resource created and a Debezium CDC for Postgres connector instantiated within your Kafka Connect cluster as a result:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc apply -f pg-connector.yaml\n`}</code></pre>\n        <p parentName=\"li\">{`After a minute or so, you can check the logs for the `}<inlineCode parentName=\"p\">{`connect-cluster-demo-connect-2-xxxxx`}</inlineCode>{` pod to see some output refering to the newly created Debezium CDC for Postgress connector instance whose name is `}<inlineCode parentName=\"p\">{`pg-connector-apicurio`}</inlineCode>{`. You can also execute `}<inlineCode parentName=\"p\">{`oc describe kafkaconnector pg-connector-apicurio`}</inlineCode>{` to see the details of that newly created Kafka Connector. These two validations are kind of in depth validations. For something easier, we can poke the `}<inlineCode parentName=\"p\">{`/connectors`}</inlineCode>{` API of our Kafka Connect cluster to see if a new connector has been registered and instantiated. To do so execute:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc exec -it <KAFKA_CONNECT_POD_NAME> -- curl localhost:8083/connectors\n`}</code></pre>\n        <p parentName=\"li\">{`where`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<KAFKA_CONNECT_POD_NAME>`}</inlineCode>{` is the pod name of your Kafka Connect cluster (in this tutorial is `}<inlineCode parentName=\"li\">{`connect-cluster-demo-connect-2-xxxxx`}</inlineCode>{`).`}</li>\n        </ul>\n        <p parentName=\"li\">{`You should see the following output:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`[\"pg-connector-apicurio\"]\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Deploy the Vaccine Order Optimizer microservice`}</h3>\n    <p>{`Finally, the last piece of this use case to have the entire end to end flow is to deploy the Vaccine Order Optimizer microservice. This microservice will be responsible for producing an optimized shipment plan for the new orders received as events in the `}<inlineCode parentName=\"p\">{`<UNIQUE_ID>.vaccine.public.orderevents`}</inlineCode>{` Kafka topic taking into account the transportation, inventory and Reefer containers information available at that point (which comes also as events from the `}<inlineCode parentName=\"p\">{`<UNIQUE_ID>.vaccine.inventory`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`<UNIQUE_ID>.vaccine.reefer`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`<UNIQUE_ID>.vaccine.transportation`}</inlineCode>{` Kafka topics).`}</p>\n    <p>{`In order to get the Vaccine Order Optimizer microservice deployed, go into the `}<inlineCode parentName=\"p\">{`kubernetes`}</inlineCode>{` folder of its GitHub repository you pulled down at the beginning of this tutorial. You should see in there a bunch of yaml files which we will work with in order to get the Vaccine Order Optimizer microservice deployed on your OpenShift project along with a Kubernetes service and an OpenShift route to make it accessible.`}</p>\n    <p>{`If we look at the `}<inlineCode parentName=\"p\">{`deployment.yaml`}</inlineCode>{` file, which is the yaml file that will eventually deploy the Vaccine Order Optimizer microservice, we’ll find that we need two configmaps (`}<inlineCode parentName=\"p\">{`kafka-topics-cm`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`vaccine-oro-cm`}</inlineCode>{`) and two secrets (`}<inlineCode parentName=\"p\">{`kafka-schema-registry`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`scram-user`}</inlineCode>{`) present in our OpenShift project beforehand to load the configuration for the Vaccine Order Optimizer microservice from.`}</p>\n    <ol>\n      <li parentName=\"ol\"><inlineCode parentName=\"li\">{`kafka-topics-cm`}</inlineCode>{` is the configmap that holds the information about the Kafka topic names and it should `}<strong parentName=\"li\">{`already`}</strong>{` be present in the OpenShift project where we are going to deploy the Vaccine Order Optimizer microservice if you followed the `}<a parentName=\"li\" {...{\n          \"href\": \"#prepare-your-openshift-and-kafka-environments\"\n        }}>{`Prepare your OpenShift and Kafka Environments`}</a>{` section.`}</li>\n      <li parentName=\"ol\"><inlineCode parentName=\"li\">{`vaccine-oro-cm`}</inlineCode>{` is the configmap defined in the `}<inlineCode parentName=\"li\">{`configmap.yaml`}</inlineCode>{` file. In order to create it, execute the following command:`}\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc apply -f configmap.yaml\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\"><inlineCode parentName=\"li\">{`kafka-schema-registry`}</inlineCode>{` is the secret that holds the Schema Registry url for consumers and producers to be able to retrieve the data schemas to both serialize and deseralize the events against and it should `}<strong parentName=\"li\">{`already`}</strong>{` be present in the OpenShift project where we are going to deploy the Vaccine Order Optimizer microservice if you followed the `}<a parentName=\"li\" {...{\n          \"href\": \"#prepare-your-openshift-and-kafka-environments\"\n        }}>{`Prepare your OpenShift and Kafka Environments`}</a>{` section.`}</li>\n      <li parentName=\"ol\"><inlineCode parentName=\"li\">{`scram-user`}</inlineCode>{` is the secret that will hold the Kafka User SCRAM-SHA-512 credentials for authentication and authorization of the communications going through the IBM Event Streams external Kafka listener. You should already have these (username and password) if you followed the `}<a parentName=\"li\" {...{\n          \"href\": \"#prepare-your-openshift-and-kafka-environments\"\n        }}>{`Prepare your OpenShift and Kafka Environments`}</a>{` section. However, we need to store these in a secret. For doing so, execute the following command:`}\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc create secret generic scram-user --from-literal=username=<SCRAM_USERNAME> --from-literal=password=<SCRAM_PASSWORD>\n`}</code></pre>\n        {`where you would replace `}<inlineCode parentName=\"li\">{`<SCRAM_USERNAME>`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`<SCRAM_PASSWORD>`}</inlineCode>{` with the values of your Kafka User SCRAM-SHA-512 credentials.`}</li>\n    </ol>\n    <p>{`Once you have the above configmaps and secrets created in your OpenShift project with the appropriate configuration for your environment, we can now, finally, deploy the Vaccine Order Optimization microservice. To do so, execute the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc apply -f deployment.yaml\n`}</code></pre>\n    <p>{`If you list the pods in your OpenShift project using the command `}<inlineCode parentName=\"p\">{`oc get pods`}</inlineCode>{` you should a new pod called `}<inlineCode parentName=\"p\">{`vaccine-order-optimizer-xxxxxxxxx-xxxxx`}</inlineCode>{`. After a minute or so, you should see that the `}<inlineCode parentName=\"p\">{`STATUS`}</inlineCode>{` for that pod is `}<inlineCode parentName=\"p\">{`Running`}</inlineCode>{`. If you get the logs for the pod with the command `}<inlineCode parentName=\"p\">{`oc get logs -f vaccine-order-optimizer-xxxxxxxxx-xxxxx`}</inlineCode>{` you should see the following output that means your Vaccine Order Optimization microservice is ready to consume events and start the corresponding computations:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`[ReeferConsumer] - Starting to consume events\n[TransportationConsumer] - Starting to consume events\n[InventoryConsumer] - Starting to consume events\n[OrderConsumer] - Starting to consume events\n`}</code></pre>\n    <p>{`Last step is to make this application accessible by creating a Kubernetes service and an OpenShift route for it. To do so, execute the following commands:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc apply -f service.yaml\noc apply -f route.yaml\n`}</code></pre>\n    <p>{`To access the application, point your browser to the Vaccine Order Optimizer OpenShift route associated to it. You can find the url by executing`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc get route vaccine-order-optimizer -o json | jq '.status.ingress[0] | .host'\n`}</code></pre>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"87.5%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACq0lEQVQ4y5WUSW7UQBSGfReyjlgBS5QN4gCIBafgAtwAJIRYIZAYEhLImiCmkCUnCG2nu92eqjyPadvl7v55Ve5EnSiDsPTpla2qv97/qp61uw9uYmNjA+vr61i7sYbbd27h+ctneP32FbY+fcD27iY+ft5ciVvq++bOe+Iddna38eLNUzx6cg8PH9+HZlkT2LaDsTkhTEwmFlzPg+/74EvCMATjHEEQwLJdxEmCsixRFAWKskBeZIjSEFESQhuZLnRjpESHowkt8PB3cITR2KJ3E8bRmDZxMNCHasz9EG0rMJvN0HWdQo7ns7lCs4MSQzeF42e0Y4k8L1QUQmAxp0mEWnA67kiwvYAGTdNAy8spyuMG00ac7iiRgi0hlqyOJWrOCidrNNdjiOMYgnaRz3y+wGLx/8hHRi2JQqQkuFqTrhNLumVG7ZnsLkLaVpYP9Ap/hgV4nMMJcrhhARaXCo/GYV4jqQTisr2SqGiRliS4N5jhl15j5EYYWBF0u2fopYoxy2GFx+C5AMvaKwlJVPtudDgwpjBJ0LBDHDkk5sYYewlMlsKLSSxrEBSCaC/Fz/tMta+6wL4UJAHDkcQkmmDMc4xYRhlmcJOaFgjKsiXxto/nOM1w7xDYJ1GLZ5RZRmIpRp4UKhQm7/GShsSEsq7iCmqzrKM60rX5MrHxkxgzHzpdId31VDQYx5D7ikkUwwwjeNRqnFqOXUJYVVLQwQ/TpuwYDqlPdZcpDI+TUAI7yUikgl8dq8gIvsLJOyuWgsryoLds8hJWUCkbLJWF7hTnLZ612yGQ8wqyXJLlb4bAb3korD8ICaNT9QtxYfFXkbVjaQMnntLVom9pDa2cClTTFnVdE42iaejWt9cj/zollSJJcnBeI8vIckdt1V3TVpfTr52pX1jfrv8AEXpAeyUINy0AAAAASUVORK5CYII=')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"order13\",\n        \"title\": \"order13\",\n        \"src\": \"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/3cbba/order13.png\",\n        \"srcSet\": [\"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/7fc1e/order13.png 288w\", \"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/a5df1/order13.png 576w\", \"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/3cbba/order13.png 1152w\", \"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/0b124/order13.png 1728w\", \"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/4ea69/order13.png 2304w\", \"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/1f455/order13.png 2562w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p><strong parentName=\"p\">{`CONGRATULATIONS!!!`}</strong>{` you have now deployed all the components that make up this Vaccine Order Management and Optimization use case. Let’s now see it in action!`}</p>\n    <h2>{`Demo`}</h2>\n    <p>{`Ok, so we should have all of the Vaccine Order Management and Optimization use case components deployed and Running by now. That means that if we executed`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc get pods\n`}</code></pre>\n    <p>{`we should see the following pods running in our OpenShift project:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`NAME                                       READY   STATUS    RESTARTS   AGE\nconnect-cluster-demo-connect-2-snffv       1/1     Running   0          22h\npostgres-db-postgresql-0                   1/1     Running   0          4d20h\nvaccine-order-optimizer-6799bcf78c-dl6dq   1/1     Running   0          93m\nvaccineorderms-68ff4dd44-g5vkd             1/1     Running   0          24h\n`}</code></pre>\n    <p>{`where`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`connect-cluster-demo-connect-2-xxxxx`}</inlineCode>{` is the Kafka Connect cluster running the Debezium CDC for Postgres connector in it, which would monitor the `}<inlineCode parentName=\"li\">{`orderevents`}</inlineCode>{` table under the `}<inlineCode parentName=\"li\">{`public`}</inlineCode>{` schema of the Postgres database that our Vaccine Order Manager for Postgres component uses for storing the state the orders in the system. The Debezium CDC for Postgres connector will then produce as an event any new record in that `}<inlineCode parentName=\"li\">{`orderevents`}</inlineCode>{` table. Records on the `}<inlineCode parentName=\"li\">{`orderevents`}</inlineCode>{` table represent any change to our database log.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`postgres-db-postgresql-0`}</inlineCode>{` is the Postgres database that our Vaccine Order Manager for Postgres component uses for storing the state the orders in the system.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`vaccine-order-optimizer-xxxxxxxxxx-yyyyy`}</inlineCode>{` is the Vaccine Order Optimizer component of the solution responsible for optimizing the shipment plans based on the vaccine orders in the system.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`vaccineorderms-xxxxxxxxxx-yyyyy`}</inlineCode>{` is the Vaccine Order Manager for Postgres component of the solution responsible for managing the orders in the system.`}</li>\n    </ul>\n    <p><strong parentName=\"p\">{`Load Inventory, Reefer and Transportation data`}</strong></p>\n    <p>{`The first thing we need to do is to load inventory, reefer (containers) and transportation data into the Vaccine Order Optimization component so that the shipment plan optimization CPLEX algorithm has proper data when we create new vaccine delivery order to produce a meaningful shipment plan.`}</p>\n    <p>{`Ideally, the inventory, reefer and transportation data will be live data provided by other components in the ecosystem of the Vaccine Order Management and Optimization use case that would be taking care of those entities and making the system aware of any changes through events accordingly. However, we are simulating those entities for now and just providing mockup data for the Vaccine Order Optimizer component.`}</p>\n    <p>{`To load the inventory, reefer and transportation mockup data`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Open up the Vaccine Order Optimizer application in your web browser. Point your browser to the Vaccine Order Optimizer OpenShift route associated to it. You can find the url by executing`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc get route vaccine-order-optimizer -o json | jq '.status.ingress[0] | .host'\n`}</code></pre>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"87.5%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACq0lEQVQ4y5WUSW7UQBSGfReyjlgBS5QN4gCIBafgAtwAJIRYIZAYEhLImiCmkCUnCG2nu92eqjyPadvl7v55Ve5EnSiDsPTpla2qv97/qp61uw9uYmNjA+vr61i7sYbbd27h+ctneP32FbY+fcD27iY+ft5ciVvq++bOe+Iddna38eLNUzx6cg8PH9+HZlkT2LaDsTkhTEwmFlzPg+/74EvCMATjHEEQwLJdxEmCsixRFAWKskBeZIjSEFESQhuZLnRjpESHowkt8PB3cITR2KJ3E8bRmDZxMNCHasz9EG0rMJvN0HWdQo7ns7lCs4MSQzeF42e0Y4k8L1QUQmAxp0mEWnA67kiwvYAGTdNAy8spyuMG00ac7iiRgi0hlqyOJWrOCidrNNdjiOMYgnaRz3y+wGLx/8hHRi2JQqQkuFqTrhNLumVG7ZnsLkLaVpYP9Ap/hgV4nMMJcrhhARaXCo/GYV4jqQTisr2SqGiRliS4N5jhl15j5EYYWBF0u2fopYoxy2GFx+C5AMvaKwlJVPtudDgwpjBJ0LBDHDkk5sYYewlMlsKLSSxrEBSCaC/Fz/tMta+6wL4UJAHDkcQkmmDMc4xYRhlmcJOaFgjKsiXxto/nOM1w7xDYJ1GLZ5RZRmIpRp4UKhQm7/GShsSEsq7iCmqzrKM60rX5MrHxkxgzHzpdId31VDQYx5D7ikkUwwwjeNRqnFqOXUJYVVLQwQ/TpuwYDqlPdZcpDI+TUAI7yUikgl8dq8gIvsLJOyuWgsryoLds8hJWUCkbLJWF7hTnLZ612yGQ8wqyXJLlb4bAb3korD8ICaNT9QtxYfFXkbVjaQMnntLVom9pDa2cClTTFnVdE42iaejWt9cj/zollSJJcnBeI8vIckdt1V3TVpfTr52pX1jfrv8AEXpAeyUINy0AAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"order13\",\n            \"title\": \"order13\",\n            \"src\": \"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/3cbba/order13.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/7fc1e/order13.png 288w\", \"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/a5df1/order13.png 576w\", \"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/3cbba/order13.png 1152w\", \"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/0b124/order13.png 1728w\", \"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/4ea69/order13.png 2304w\", \"/vaccine-solution-main/static/6fba28b423eacb7ce21ea9f60b67301d/1f455/order13.png 2562w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`In there you should see a POST API called `}<inlineCode parentName=\"p\">{`/api/v1/optimize/loadData`}</inlineCode>{` that will load the inventory, reefer and transportation data if you execute. Therefore, click on that API to expand it`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"44.44444444444444%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABTElEQVQoz5XRXU/CMBQG4P1mokGHEhDB/2JivBMvufECjZdGExAZ7qPr1tF1XzBGXs+2GBMSBS+etD1N2ve02rU5xoP9hqlj4sWa49U2MOEmpp5Fo4V334YZi4M4yRLaLGCY+Q7moh4/pQeWyn+z6TA3kdBYICBUiKzIkRZrJBuSr/4U7wizBAtmw1eUcB64Vboy7jf2K1nvUyI3CyveOgJfqarO05ASSkqYKMQbummdQu2TZ/CiEM5SwBYeJgsDc8cClwF4GEBbCBfW0ocZcHipAqcUP8KddV1jEXWiAljSx4xZ+HBtGB6DTWvNkBym8mHQZzjlA1MbnNqIsIFCvqOulXulmCTYkoLmW8htBk0UCUZPYzSa5zhudaF3+pXWxWC/bu2sd4WjVge3w3toPI8wen5Es30BvTfAabdfOelcHkynwxt6GzfDO3wB7Qd9AXw56oYAAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"order19\",\n            \"title\": \"order19\",\n            \"src\": \"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/3cbba/order19.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/7fc1e/order19.png 288w\", \"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/a5df1/order19.png 576w\", \"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/3cbba/order19.png 1152w\", \"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/0b124/order19.png 1728w\", \"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/4ea69/order19.png 2304w\", \"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/76466/order19.png 2480w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click on Try it out and then in Execute.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`After some time, you should see the message `}<em parentName=\"p\">{`loaded`}</em>{` in the Response body. That means the inventory, reefer and transporation mockup data has been properly loaded.`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"44.44444444444444%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABTElEQVQoz5XRXU/CMBQG4P1mokGHEhDB/2JivBMvufECjZdGExAZ7qPr1tF1XzBGXs+2GBMSBS+etD1N2ve02rU5xoP9hqlj4sWa49U2MOEmpp5Fo4V334YZi4M4yRLaLGCY+Q7moh4/pQeWyn+z6TA3kdBYICBUiKzIkRZrJBuSr/4U7wizBAtmw1eUcB64Vboy7jf2K1nvUyI3CyveOgJfqarO05ASSkqYKMQbummdQu2TZ/CiEM5SwBYeJgsDc8cClwF4GEBbCBfW0ocZcHipAqcUP8KddV1jEXWiAljSx4xZ+HBtGB6DTWvNkBym8mHQZzjlA1MbnNqIsIFCvqOulXulmCTYkoLmW8htBk0UCUZPYzSa5zhudaF3+pXWxWC/bu2sd4WjVge3w3toPI8wen5Es30BvTfAabdfOelcHkynwxt6GzfDO3wB7Qd9AXw56oYAAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"order19\",\n            \"title\": \"order19\",\n            \"src\": \"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/3cbba/order19.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/7fc1e/order19.png 288w\", \"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/a5df1/order19.png 576w\", \"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/3cbba/order19.png 1152w\", \"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/0b124/order19.png 1728w\", \"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/4ea69/order19.png 2304w\", \"/vaccine-solution-main/static/b019c448df61f02e27862980f246aced/76466/order19.png 2480w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`If you inspect the Vaccine Order Optimizer component’s log messages`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc logs vaccine-order-optimizer-xxxxxxxxxx-yyyyy\n`}</code></pre>\n        <p parentName=\"li\">{`you should see messages in the logs of the type`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`[DataProducer] - Producing inventory events\n[KafkaAvroProducer] - Message delivered to demo.vaccine.inventory [0]\n[InventoryConsumer][KafkaAvroConsumer] - New event received\n  Topic: demo.vaccine.inventory\n  Partition: 0\n  Offset: 36\n  key: L0001\n  value: {'type': 'ibm.gse.eda.vaccine.orderoptimizer.VaccineOrderCloudEvent', 'specversion': '1.0', 'source': 'Vaccine Order Optimizer producer endpoint', 'id': '41927bd6-6c5f-4fb4-8804-bc2c3c553679', 'time': '2021-04-14T16:45:26.920195+00:00', 'dataschema': 'https://raw.githubusercontent.com/ibm-cloud-architecture/vaccine-order-optimizer/master/data/avro/schemas/inventory.avsc', 'datacontenttype': 'application/json', 'data': {'lot_id': 'L0001', 'qty': 200, 'location': 'Beerse, Belgium', 'date_available': ''}}\n\n[InventoryDataStore] - addInventory L0001 {'lot_id': 'L0001', 'qty': 200, 'location': 'Beerse, Belgium', 'date_available': ''}\n`}</code></pre>\n        <p parentName=\"li\">{`for inventory, reefer and transportation.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`You can also execute any of the other GET APIs in the user interface that would return you the inventory, reefer and transportation data in json format or as a pandas object.`}</p>\n      </li>\n    </ol>\n    <p><strong parentName=\"p\">{`Create a new vaccine delivery order`}</strong></p>\n    <p>{`After providing the Vaccine Order Optimizer component the inventory, reefer and transporation data its shipment plan optimization CPLEX algorithm needs to produce meaningful output, we are ready to create a new vaccine delivery order and get a shipment plan back as a result. To do so,`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Open the Vaccine Order Manager for Postgres component’s user interface by pointing your browser to that component’s OpenShift route. You can find that url by executing:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc get route vaccineorderms -o json | jq '.status.ingress[0] | .host'\n`}</code></pre>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"70.4861111111111%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACaUlEQVQ4y3VTyW4TQRD1n0DEgQQJjvwCPwB3fgFuQBQEh0gcECBxZckBDpwIByRQIkHCLQoiYxOCyWIneEOzjz3u6Znpx+tuT2SWtPRU09VVr6tf1dRm5uuYu93AmVt1zNzUcHCa0PbUDQezCw4uPfyGi4sNzC3UcXahgfN3GvQ3cOHuVwOdP0ucI2puLPArTNEPRhgQeu8lGSHgDyW6boJ2z0Or56PrJfTZMxtjoXMq1MBVFjnCMEQcR5CZQJHLY+gzDVUWxk6fVefTq6YUkBcF/CCyCGN4tJ4fIuC3lCQpSgMdV6HyaZQkqWAq1E5N4nqhIfLDyCCME5NsgksmlgpKWdg9CSc+vbSt2Y2aFJwjlwLpKMU4tRDjscGYyLPM+DIxJhgnMgyFvfCYUH/0dntYf9/E2rsm2s0BT6gZE0pNosmjWCuNR89XceX6U1y+9gSrH51jEl1QVaUhPNjp4tXLL3ixtIm607W18jkyLyAp+lhI41v+UMe9pRUsPlvBZ2fP+P55MtuHJEiQSdstVWoCQUt9ZMEgajVpyB+r1N0vpqqsuszEq/c38eDNLra2Wzjq+9RwhMOei8OuizAZoU0rOSJCSkMs9WWUg10x6v9FWOD1egtvN9qYf7yMjUaLN2dY2/qOjZ0DdNwAn5wmidgwVsUHUk2SZPYV/62QHTCiJ1GA4TDGMBXoDlwcdfpoHXaw3/4J148oi7QDThkUKzyBkIMaBCg4DpwPEyj4zDRK0Pqxh/buPmLPNz45HPF8xO6nUElyAqEeVN0EmaHknCmC/x9BzZKYWvEi/XtJ61eTGKWrneputX4DK8YYzDNYJFAAAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"order5\",\n            \"title\": \"order5\",\n            \"src\": \"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/3cbba/order5.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/7fc1e/order5.png 288w\", \"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/a5df1/order5.png 576w\", \"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/3cbba/order5.png 1152w\", \"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/0b124/order5.png 1728w\", \"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/4ea69/order5.png 2304w\", \"/vaccine-solution-main/static/158cf17d84a134d74359f7fbd623bdbb/8bcdf/order5.png 2528w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Open the Vaccine Order Manager for Postgres component’s user interface in two different web browser windows and open the ORDERS page in one and the SHIPMENT PLANS page in the other. The reason for this is that we want to see how the order is created in one window while the shipment plan arrives to the other as a result. The SHIPMENT PLANS page implements a server side event stream, meaning that the web page must be open when the event arrives to the topic it creates the event stream to in order to pick it up and display it and not miss it.`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"77.77777777777777%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACFklEQVQ4y62SS2sUQRDH56sYFUR8XBW8ePRLRAO+0IsHLyai6EUTNiomJkZ8gX6EkCiKehDcjYmHrLqiKJPNBoKvqOx0z3bPzN9/9cyEySReFht+VHVVV3VVd3lbztWx/XwdPf3z6BmYx+aBupPCJtq20b/zwlvsH/6AA9c/Yhf13RffYe9gA/uGGs63g2w9W8eeS+/hLXxXaBKR/rcAn5ZW4H9tr9oWhR8KSz81UVj+pfHG/4PLUy3ce7nsYsQvZ1uUHkrLhqqwS0hckCltbfG8scLEv8vh8OIkQU4U8XA7gFIaYdhxBEpBae18xhh0OgaWklfzHoNifBwn8BIqgqw4loRtBEHAwA6stUyumDhMq+deEJ/SITTJY10/SSGha4pSgg2DoihySFWSJOJlNrObLLGwGp/hSZk5EbFsrYy06yriExhjHdZGqS8utYz/vLy+8RkcGa+id6SKg6NVHMoQvXfkFQ6P1XDi1gxOkqM3azh9fxb9D+dw5sEcTt19jWO0HZ+ooe9GlftZeMOPFnCFVKZ9VKZ8DE1+weDkZ6dXplPftccpV6lPPFvEnRct3CajT5rOL3Y5P/a0uVHLYUaXLdso+wg+aMjHlsfvUGo3gxqac6dDg8B9ikn3RMmcyge5j0uQ51kzh+URyJFRkRGRkRIp85q4X43Xz2Gu5FIO/QtbmM/ctmHCYtJuVrGgdRV2Sx7/F3DXqLZRP7OeAAAAAElFTkSuQmCC')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"order21\",\n            \"title\": \"order21\",\n            \"src\": \"/vaccine-solution-main/static/d91f8e4ae207c4777b3edf3b460d9a0f/3cbba/order21.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/d91f8e4ae207c4777b3edf3b460d9a0f/7fc1e/order21.png 288w\", \"/vaccine-solution-main/static/d91f8e4ae207c4777b3edf3b460d9a0f/a5df1/order21.png 576w\", \"/vaccine-solution-main/static/d91f8e4ae207c4777b3edf3b460d9a0f/3cbba/order21.png 1152w\", \"/vaccine-solution-main/static/d91f8e4ae207c4777b3edf3b460d9a0f/0b124/order21.png 1728w\", \"/vaccine-solution-main/static/d91f8e4ae207c4777b3edf3b460d9a0f/4ea69/order21.png 2304w\", \"/vaccine-solution-main/static/d91f8e4ae207c4777b3edf3b460d9a0f/a7da5/order21.png 2554w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`In the ORDERS page we can see there are aleready three orders created out of the box. Please, disregard these orders as they don’t have any effect on the system at all. Instead, let’s create a new order. Click on NEW ORDER, give a name of your choice to the `}<em parentName=\"p\">{`Organization`}</em>{` and set the `}<em parentName=\"p\">{`Delivery Location`}</em>{` to `}<strong parentName=\"p\">{`London, England`}</strong>{` (the reason to provide such a `}<em parentName=\"p\">{`Delivery Location`}</em>{` is to match the mockup data we loaded in the Vaccine Order Optimizer component earlier).`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"40.97222222222222%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLklEQVQoz62OzUrDQBSF50VE+4Mrd76G1lZx46uYljxBCuYB3Ai6cOEiC0shmCbShKbarYKYBqoBRZBMiJlJepwkiGjd1QMf995z5x6GVHdl1FodrDXaWNk6XGB1W0K92cbGfgebBzLqrTZqTQmVHanoc6qirzQkrO/JIMcnZ+hfWejpA5i2C3P4jWWPYTnjwrcE105ZC7+gnM3hCLY7wen5BYhlDlBqjmU1ub0B0XUdWZYhSRJwzn8QRRQvb++4ewrFnCJhHEz4lEYIQwrGWOmL21y2bZeBufJlmqa/EKFJhsfXD6TZHCzNwEWllCKO4+Ij+TvOWZHhOA6IYRj4L41cF0TTNARBAM/z4Pv+AtOcqf/n7mt//yBuZ8+47PVBVFWFoihL0e0KRFXVI3wCz8EcsGI6f4UAAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"order22\",\n            \"title\": \"order22\",\n            \"src\": \"/vaccine-solution-main/static/1efa3e9ebe73b7643aa3eb0b00fc8c44/3cbba/order22.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/1efa3e9ebe73b7643aa3eb0b00fc8c44/7fc1e/order22.png 288w\", \"/vaccine-solution-main/static/1efa3e9ebe73b7643aa3eb0b00fc8c44/a5df1/order22.png 576w\", \"/vaccine-solution-main/static/1efa3e9ebe73b7643aa3eb0b00fc8c44/3cbba/order22.png 1152w\", \"/vaccine-solution-main/static/1efa3e9ebe73b7643aa3eb0b00fc8c44/0b124/order22.png 1728w\", \"/vaccine-solution-main/static/1efa3e9ebe73b7643aa3eb0b00fc8c44/4ea69/order22.png 2304w\", \"/vaccine-solution-main/static/1efa3e9ebe73b7643aa3eb0b00fc8c44/8bcdf/order22.png 2528w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Click SAVE and watch the SHIPMENT PLANS page for a new shipment plan to arrive and get displayed as a result of the optimization algorithm for the new order.`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"90.97222222222221%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACKklEQVQ4y61TS2sUQRCev5bgQcGA4Mm7MZDoSfAk+APc1cQNGuIzgijiwUckEPwD3oTsPHaSbCJkL2NWs9npnlfPfFb17ExmJheNNnxUdXV/X9dMVRnT9xycX+phuu1gqm1PbO5PtWyco/OLnR6uPN7B7Ms+ZjquxqWH27i8so2ZZVfzGRcIBlIFjSyHFD6SOCI/rcUz8lNFPlIcDCXubw7w5qun4/rORMdAZWWEMAyhiJimKRKyWZZRLNKxJEk0RBhjzxMYkDCfF1xeBgeqEEIgjmNEhLHvI4oi+GTjONGP8J4tZ6ri3GfNgl8K6lfIBkGgRTlTzoYJvC+y5sdYnM9PxFFqnBKUUuqM+HIhwvu6YPznglXw5fyTslKg+I/FA02uodIMVSSKskiULgj7Oap+HU1+rcr/YxmtD10sfjLRet/FXULTtum889lCZ93EA8LKhoXnXxw82bTxaCOPM3/xo4mldQvG1dVvmF+zMPe0i2s1bGGWMPesixtrpsZ1wq3XNu686+H2Wwc3X1k6tvDCxDxhgXz6ZNVImjs/Ovsn+0KC/mVeECqG+OEhGh1BDA8x9jzEoxHkz2EZY6jxsY5J8hNur5T5eYGMQAbl6GRUzWjPRXSwj+PdHg7tLYx2HBy5FsHGL7Ic8/su5Pc+1GAfmRjX26YUnAQSbl5uE55l9rWlhqc+lDTTIfVgyKPJvcicnHwyy03Bv0KjsU8JnnVVuf+WYWNsef0GrJhKTW4BNCoAAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"order23\",\n            \"title\": \"order23\",\n            \"src\": \"/vaccine-solution-main/static/55f9c94b8b3eb539e0a340d0df377235/3cbba/order23.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/55f9c94b8b3eb539e0a340d0df377235/7fc1e/order23.png 288w\", \"/vaccine-solution-main/static/55f9c94b8b3eb539e0a340d0df377235/a5df1/order23.png 576w\", \"/vaccine-solution-main/static/55f9c94b8b3eb539e0a340d0df377235/3cbba/order23.png 1152w\", \"/vaccine-solution-main/static/55f9c94b8b3eb539e0a340d0df377235/0b124/order23.png 1728w\", \"/vaccine-solution-main/static/55f9c94b8b3eb539e0a340d0df377235/4ea69/order23.png 2304w\", \"/vaccine-solution-main/static/55f9c94b8b3eb539e0a340d0df377235/a0ff5/order23.png 2538w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n    </ol>\n    <h3>{`Behind The Scenes`}</h3>\n    <p>{`The demo above looks great. We have seen how the creation of a new order results in a new optimized shipment plan for the orders to be delivered in the system. However, we have not paid the close look at each of the different pieces and patterns deployed for this Vaccine Order Management and Optimization use case that this use case really deserve. The most interesting part of this use case isn’t in the actual shipment plan output but in the different pieces, technologies and patterns that allow for it. Hence, the deep dive we are doing in this section.`}</p>\n    <p>{`So far we know that, after the Vaccine Order Manager for Postgres component has created a new order, which is considered to be a successfully finished action once that new order gets stored in the Postgres database, that new fact needs to be delivered as an event into Kafka since that is what Event Driven Architectures are about. That is, the system is made aware of any new fact that has happened so that all the components of that system can react to it if needed. For doing so, we have decided to use the `}<strong parentName=\"p\">{`Outbox pattern`}</strong>{`, which consists of monitoring the database log for any changes on specifics tables and translate those changes into events to Kafka. More on the Outbox pattern `}<a parentName=\"p\" {...{\n        \"href\": \"https://ibm-cloud-architecture.github.io/refarch-eda/patterns/intro#transactional-outbox\"\n      }}>{`here`}</a>{`. `}</p>\n    <p>{`To implement the Outbox pattern for this use case, we have decided to implement the Vaccine Order Manager for Postgres component using Quarkus not only because it is one of the best Java stacks for cloud native applications due to its Java stack tailored to work best in containers in Kubernetes but also to take advantage of its `}<a parentName=\"p\" {...{\n        \"href\": \"https://debezium.io/documentation/reference/integrations/outbox.html\"\n      }}>{`Outbox extension`}</a>{`. This extension will leverage the database transactional nature to translate in a transactional manner any change on its tables to a specific table with a tailored format best suited to be delivered as an event to Kafka. Then, Kafka Connector in charge of monitoring database changes and translating these into events to Kafka only needs to focus on one table with the addition of having the records in that table in a more appropriate shape and form to be sent as events into Kafka.`}</p>\n    <p>{`You can see that we are using the Debezium Quarkus Outbox extension for the Vaccine Order Manager for Postgres component by looking at its `}<inlineCode parentName=\"p\">{`pom.xml`}</inlineCode>{` file where you should find the following dependency:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<dependency>\n  <groupId>io.debezium</groupId>\n  <artifactId>debezium-quarkus-outbox</artifactId>\n  <version>1.4.0.Final</version>\n</dependency>\n`}</code></pre>\n    <p>{`Then, the outbox pattern is configured in the `}<inlineCode parentName=\"p\">{`application.properties`}</inlineCode>{` file under `}<inlineCode parentName=\"p\">{`src/main/resources`}</inlineCode>{` where you can find:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-properties\"\n      }}>{`#################################\n# Outbox setting for Quarkus Debezium plugin\nquarkus.debezium-outbox.id.name=id\nquarkus.index-dependency.outbox.group-id=io.debezium\nquarkus.index-dependency.outbox.artifact-id=debezium-quarkus-outbox\nquarkus.debezium-outbox.table-name=orderevents\n# change to true in prod\nquarkus.debezium-outbox.remove-after-insert=false\n`}</code></pre>\n    <p>{`which tells the Debezium Quarkus Outbox extension to transactionally translate any change in any of the tables in the database as a new record into the `}<inlineCode parentName=\"p\">{`orderevents`}</inlineCode>{` table. That means that our new order should have produced a new record on that `}<inlineCode parentName=\"p\">{`orderevents`}</inlineCode>{` table. Let’s check it out:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Exec into the postgres container:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc rsh postgres-db-postgresql-0\n`}</code></pre>\n        <p parentName=\"li\">{`You should now have a shell running in the postgres container. `}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Start the psql client using the `}<inlineCode parentName=\"p\">{`postgres`}</inlineCode>{` user which our Postgres deployment was configued with:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`psql -U postgres\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`List all the databases in the Postgres deployment:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`\\\\l\n`}</code></pre>\n        <p parentName=\"li\">{`which should give you the following output:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`                                List of databases\n  Name    |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   \n-----------+----------+----------+------------+------------+-----------------------\norderdb   | postgres | UTF8     | en_US.utf8 | en_US.utf8 | \npostgres  | postgres | UTF8     | en_US.utf8 | en_US.utf8 | \ntemplate0 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n          |          |          |            |            | postgres=CTc/postgres\ntemplate1 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +\n          |          |          |            |            | postgres=CTc/postgres\n(4 rows)\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Connect to the `}<inlineCode parentName=\"p\">{`orderdb`}</inlineCode>{` database (this is the database we had our postgres deployment configured to create and the Vaccine Order Manager for Postgres component to use):`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`\\\\c orderdb\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Display all the relations in the `}<inlineCode parentName=\"p\">{`orderdb`}</inlineCode>{` database.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`\\\\dt\n`}</code></pre>\n        <p parentName=\"li\">{`which should output all the different tables the Vaccine Order Manager for Postgres component will work with including the `}<inlineCode parentName=\"p\">{`orderevents`}</inlineCode>{` table that the Debezium Quarkus Outbox extension has created and will use to help us implement the Outbox pattern:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`              List of relations\nSchema |        Name        | Type  |  Owner   \n--------+--------------------+-------+----------\npublic | ordercreatedevent  | table | postgres\npublic | orderevents        | table | postgres\npublic | orderupdatedevent  | table | postgres\npublic | vaccineorderentity | table | postgres\n(4 rows)\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`List the orders in the `}<inlineCode parentName=\"p\">{`vaccineorderentity`}</inlineCode>{` table which is the table used by the Vaccine Order Manager for Postgres component to store the state of any vaccine order object.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`select * from public.vaccineorderentity;\n`}</code></pre>\n        <p parentName=\"li\">{`where we should see our newly created order:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`id | askingorganization |     creationdate     | deliverydate | deliverylocation | priority | quantity | status | vaccinetype \n----+--------------------+----------------------+--------------+------------------+----------+----------+--------+-------------\n  1 | Spain Government   | 10-Nov-2020 02:02:40 | 2021-02-24   | Madrid           |        1 |      200 |      0 | COVID-19\n  2 | French Government  | 15-Nov-2020 02:02:40 | 2021-01-10   | Paris            |        1 |      300 |      0 | COVID-19\n  3 | Italy Government   | 15-Nov-2020 02:02:40 | 2021-01-12   | Roma             |        1 |      400 |      0 | COVID-19\n15 | test_org           | 14-Apr-2021 18:38:43 | 2021-04-14   | London, England  |        2 |      150 |      0 | COVID-19\n(4 rows)\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Now, let’s see if the Debezium Quarkus Outbox extension has done its job by looking at the `}<inlineCode parentName=\"p\">{`orderevents`}</inlineCode>{` table:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`select * from public.orderevents;\n`}</code></pre>\n        <p parentName=\"li\">{`where we should, indeed, see how the Debezium Quarkus Outbox extension has transactionally created a new record with the data from the new record in the `}<inlineCode parentName=\"p\">{`vaccineorderentity`}</inlineCode>{` but in a better form and shape to be sent as a Kafka event:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`                  id                 |   aggregatetype    | aggregateid |     type     |         timestamp          |                                                                                                          payload                                                                                                           |                          tracingspancontext                           \n-------------------------------------+--------------------+-------------+--------------+----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------\n33e99eb0-55b8-4660-b7c9-d7cdddcdf4aa | VaccineOrderEntity | 15          | OrderCreated | 2021-04-14 18:38:43.476686 | {\"orderID\":15,\"deliveryLocation\":\"London, England\",\"quantity\":150,\"priority\":2,\"deliveryDate\":\"2021-04-14\",\"askingOrganization\":\"test_org\",\"vaccineType\":\"COVID-19\",\"status\":\"OPEN\",\"creationDate\":\"14-Apr-2021 18:38:43\"} | #Wed Apr 14 18:38:43 GMT 2021                                        +\n                                     |                    |             |              |                            |                                                                                                                                                                                                                            | uber-trace-id=471009333509d7ba\\\\:721aed36f54c2294\\\\:471009333509d7ba\\\\:0+\n                                     |                    |             |              |                            |                                                                                                                                                                                                                            | \n(1 row)\n`}</code></pre>\n      </li>\n    </ol>\n    <p>{`We have just verified that the first step in the Outbox pattern provided by the Debezium Quarkus Outbox extension works fine and that now we have our new order in a table with the shape and form we want it to be sent as an event to Kafka. We can also look at the logs of the Vaccine Order Manager for Postgres component to see what is in there:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Get the logs of the Vaccine Order Manager for Postgres component:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc logs vaccineorderms-xxxxxxxxx-yyyyy\n`}</code></pre>\n        <p parentName=\"li\">{`where we should spot the following:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`18:38:43 INFO  [ib.gs.ed.va.do.OrderService] (executor-thread-2) saveNewOrder for test_org null\nHibernate: \n    select\n        nextval ('hibernate_sequence')\nHibernate: \n    insert \n    into\n        VaccineOrderEntity\n        (askingOrganization, creationDate, deliveryDate, deliveryLocation, priority, quantity, status, vaccineType, id) \n    values\n        (?, ?, ?, ?, ?, ?, ?, ?, ?)\nHibernate: \n    insert \n    into\n        orderevents\n        (aggregatetype, aggregateid, type, timestamp, payload, tracingspancontext, id) \n    values\n        (?, ?, ?, ?, ?, ?, ?)\n`}</code></pre>\n        <p parentName=\"li\">{`which are the instructions to transactionally store the new order in both `}<inlineCode parentName=\"p\">{`vaccineorderentity`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`orderevents`}</inlineCode>{` table that will result in the what we’ve checked above in the Postgres database.`}</p>\n      </li>\n    </ol>\n    <p>{`Ok, so we have a new record in the `}<inlineCode parentName=\"p\">{`orderevents`}</inlineCode>{` table in the form and shape we like to be sent as an event to Kafka. Now, we need to make sure that happened. That is, that our Kafka Connect cluster which is running the Debezium CDC for Postgres connector has actually monitored such table and transalate new records of this into events in Kafka. This is as simple as opening your IBM Event Streams user interface, go to the topics section on the left hand side menu and select the `}<inlineCode parentName=\"p\">{`<UNIQUE_ID>.vaccine.public.orderevents`}</inlineCode>{` topic. In there, click on the Messages tab at the top:`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"60.06944444444444%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABz0lEQVQoz42Tv27bMBDG9UrpQ1i24a2LuwRFARtpiqIdig5ds3To0L1LH6Tv0AABmiEIkNSWZEmUQomkaImSv/DoKHEc9M8BH+4onH76jqS8ZwcHmE5fYDweYzgcYjQaPZLv+xgMBv+U7w8wmUzgvXn7DizjWC6XYGmKJI6RJgniOMFqtUJRlGjbDsaYP6ppDOqGcgPvw8dP6FqDqqqQ8xJRzCBVBVFylEWOztQANvhbrA2gG8B0gPfy1QxJkiKKIjCWIeMWLDpkpUGUG4RZjfRGOydt26LrOmw2G6e+xp2o9mbzIztejGUQotEc338UeP45x+FXjumXG0xOErz/lln3ElpXDrIf2w9sud7x8WvXVJalHVvhKmA4uwjw6zLC6fk1fp4vcPGbQUjletbrtYOQY865yw9Qcjibu1GoWUoBXgikObd70qKym1MIBaVrKLvH2mo36L1dlxTefP4AFFJCCGFPtoBSEpVSLmut3XPGmOsjZ7Tu6x7sHD4C2iaCyjtwL1orC6ebsHsYpH2XT4E7kB5MMMphGN4rCAKXyTXd19TeYeI8AfagfSDVi8XCiWCU6arR9tDY/QH9F5AynS6B67p2/aTtX9I40XNa3wKXnF/2SndCLAAAAABJRU5ErkJggg==')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"order24\",\n        \"title\": \"order24\",\n        \"src\": \"/vaccine-solution-main/static/96892aafea0b12bb3c19c14d91bfd9ff/3cbba/order24.png\",\n        \"srcSet\": [\"/vaccine-solution-main/static/96892aafea0b12bb3c19c14d91bfd9ff/7fc1e/order24.png 288w\", \"/vaccine-solution-main/static/96892aafea0b12bb3c19c14d91bfd9ff/a5df1/order24.png 576w\", \"/vaccine-solution-main/static/96892aafea0b12bb3c19c14d91bfd9ff/3cbba/order24.png 1152w\", \"/vaccine-solution-main/static/96892aafea0b12bb3c19c14d91bfd9ff/0b124/order24.png 1728w\", \"/vaccine-solution-main/static/96892aafea0b12bb3c19c14d91bfd9ff/4ea69/order24.png 2304w\", \"/vaccine-solution-main/static/96892aafea0b12bb3c19c14d91bfd9ff/2dd9a/order24.png 2558w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`And, as expected, the message is there. You can also see strange character in the message payload. This is the result of having our events Avro serialized as explained earlier in this tutorial.`}</p>\n    <p>{`However, how did it actually happen? How did we configure the Debezium CDC for Postgres connector to make this happen? If we look at the `}<inlineCode parentName=\"p\">{`pg-connector.yaml`}</inlineCode>{` file you can find under `}<inlineCode parentName=\"p\">{`environment/cdc`}</inlineCode>{` in the Vaccine Order Manager for Postgres GitHub repository, you will find the configuration for the Debezium CDC for Postgres connector we have instantiated. You can see there two types of configuration. One related to the database the connector needs to monitor and the other related to the Apicurio Registry the connector needs to interact with to get the Avro data schemas to serialize the events it will send with.`}</p>\n    <p>{`For now, we are only interested in the configuration for the database. If you look at the database properties you will find their values are defined as placeholders to some properties file and property name by looking at the end of those placeholders that look like: `}<inlineCode parentName=\"p\">{`connector.properties:property_name`}</inlineCode>{`. And that property file containing the properties names and appropriate values for our scenario is the `}<inlineCode parentName=\"p\">{`connector.properties`}</inlineCode>{` file you can also find under `}<inlineCode parentName=\"p\">{`environment/cdc`}</inlineCode>{` in the Vaccine Order Manager for Postgres GitHub repository. That property file is injected into the Kafka Connect cluster environment, where our Debezium CDC for Posgres connector will run into, from a secret in OpenShift which we have created  out of the `}<inlineCode parentName=\"p\">{`connector.properties`}</inlineCode>{` file when we deployed the Kafka Connect cluster. You can go back to the section where we deployed the Kafka Connect cluster for more information. What is important now for us is that in such `}<inlineCode parentName=\"p\">{`connector.properties`}</inlineCode>{` files we can see the following property and value: `}<inlineCode parentName=\"p\">{`table-whitelist=public.orderevents`}</inlineCode>{` which tells our Debezium CDC for Postgres connector what table to monitor and translate records from into events to Kafka.`}</p>\n    <p>{`Now that we have the new order as an event in Kafka, we should have gotten the shipment plan CPLEX optimization algorithm in the Vaccine Order Optimization component kicked off as a result. So let’s check if that actually happened. `}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Get your Vaccine Order Optimization component’s logs`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc logs vaccine-order-optimizer-xxxxxxxxxx-yyyyy\n`}</code></pre>\n        <p parentName=\"li\">{`You should spot the following pieces for the vaccine order optimization process:`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`A new event was received by the `}<inlineCode parentName=\"p\">{`[OrderConsumer]`}</inlineCode>{` Kafka consumer that is consuming from the `}<inlineCode parentName=\"p\">{`<UNIQUE_ID>.vaccine.public.orderevents`}</inlineCode>{` topic:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`[OrderConsumer][KafkaAvroCDCConsumer] - New event received\n  Topic: demo.vaccine.public.orderevents\n  Partition: 0\n  Offset: 0\n  key: {'id': '33e99eb0-55b8-4660-b7c9-d7cdddcdf4aa'}\n  value: {'before': None, 'after': {'id': '33e99eb0-55b8-4660-b7c9-d7cdddcdf4aa', 'aggregatetype': 'VaccineOrderEntity', 'aggregateid': '15', 'type': 'OrderCreated', 'timestamp': 1618425523476686, 'payload': '{\"orderID\":15,\"deliveryLocation\":\"London, England\",\"quantity\":150,\"priority\":2,\"deliveryDate\":\"2021-04-14\",\"askingOrganization\":\"test_org\",\"vaccineType\":\"COVID-19\",\"status\":\"OPEN\",\"creationDate\":\"14-Apr-2021 18:38:43\"}', 'tracingspancontext': '#Wed Apr 14 18:38:43 GMT 2021\\\\nuber-trace-id=471009333509d7ba\\\\\\\\:721aed36f54c2294\\\\\\\\:471009333509d7ba\\\\\\\\:0\\\\n'}, 'source': {'version': '1.2.0.Final', 'connector': 'postgresql', 'name': 'demo.vaccine', 'ts_ms': 1618425523877, 'snapshot': 'false', 'db': 'orderdb', 'schema': 'public', 'table': 'orderevents', 'txId': 857, 'lsn': 31482856, 'xmin': None}, 'op': 'c', 'ts_ms': 1618425524300, 'transaction': None}\n`}</code></pre>\n        <p parentName=\"li\">{`Now that the event is Avro deserialized we can read the event and realise it is composed of two main pieces: `}<inlineCode parentName=\"p\">{`before`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`after`}</inlineCode>{`, which represents the change in the database for a specific record. As this is a new order, thus a new record, we can see that the `}<inlineCode parentName=\"p\">{`before`}</inlineCode>{` piece comes empty.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`The optimization process gets triggered:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`[OrderConsumer] - calling optimizeOrder\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`The summary of the optimization process:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`[OrderConsumer] - optimizeOrder summary:\nPlanning Horizon: (2021-04-14 - 2021-04-21)\n  ------ Data Summary ------\n  Customers: 2\n  Supplies : 2\n  Orders   : 1\n  ---- Network Summary -----\n  Nodes: 33\n  Arcs : 82\n  -- Optimization Summary --\n  Variables  : 200\n  Constrains : 241\n  Objective  : 3144.00\n  Best Bound : 3144.00\n  MIP Rel Gap: 0.00\n  Solve Time : 20.19\n  Status     : integer optimal solution\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`The results of the optimization process where we can already see the shipment plan that will be produced, as a fact that happened (a new shipment plan was created), to Kafka so that the rest of the components of our system are aware and react accordingly if needed:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`[OrderConsumer] - optimizeOrder retults:\n{'Orders': '[{\"Order ID\":15,\"DeliveryLocation\":\"London, England\",\"Order Qty\":150,\"Order Priority\":2,\"Order RDD\":\"2021-04-15T00:00:00.000Z\",\"First Delivery\":\"2021-04-16T00:00:00.000Z\",\"Last Delivery\":\"2021-04-16T00:00:00.000Z\",\"Number of Deliveries\":1,\"Delivered Qty\":150,\"Remaining Qty\":0}]', 'OrderDetails': '[{\"Order ID\":15,\"Supplier\":\"Beerse, Belgium\",\"Departure Date\":\"2021-04-14T00:00:00.000Z\",\"Delivery Date\":\"2021-04-15T00:00:00.000Z\",\"Qty\":150,\"Cost\":42.0}]', 'Shipments': '[{\"Type\":\"Delivery\",\"From\":\"Beerse, Belgium\",\"Departure Date\":\"2021-04-14T00:00:00.000Z\",\"To\":\"London, England\",\"Arrival Date\":\"2021-04-16T00:00:00.000Z\",\"Qty\":150,\"Reefers\":2,\"Cost\":42}]'}\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Finally, as said above, the shipment plan event is prepared and sent to the `}<inlineCode parentName=\"p\">{`<UNIQUE_ID>.vaccine.shipment.plan`}</inlineCode>{` topic:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`[OrderConsumer] - producing shipment plan\n[OrderConsumer] - Shipment Plan event to be produced:\n{'type': 'ibm.gse.eda.vaccine.orderoptimizer.VaccineOrderCloudEvent', 'specversion': '1.0', 'source': 'Vaccine Order Optimizer engine', 'id': '5cf26c04-866b-46a2-886f-8df29c4dff35', 'time': '2021-04-14T18:39:06.880652+00:00', 'dataschema': 'https://raw.githubusercontent.com/ibm-cloud-architecture/vaccine-order-optimizer/master/data/avro/schemas/shipment_plan.avsc', 'datacontenttype': 'application/json', 'data': {'Shipments': [{'Type': 'Delivery', 'From': 'Beerse, Belgium', 'DepartureDate': '2021-04-14T00:00:00.000Z', 'To': 'London, England', 'ArrivalDate': '2021-04-16T00:00:00.000Z', 'Qty': 150, 'Reefers': 2, 'Cost': 42}]}}\n[KafkaAvroProducer] - Message delivered to demo.vaccine.shipment.plan [0]\n`}</code></pre>\n      </li>\n    </ol>\n    <p>{`The last step into this `}<em parentName=\"p\">{`Behind the scenes`}</em>{` deep dive for how the Vaccine Order Management and Optimization use case works is the reception of the shipment plan event produced by the Vaccine Order Optmization component by the Vaccine Order Manager for Postgres component. We can check that out by just getting again the logs for the Vaccine Order Manager for Postgres component:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc logs vaccineorderms-xxxxxxxxx-yyyyy\n`}</code></pre>\n    <p>{`where we should spot the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`18:39:10 INFO  [ib.gs.ed.va.do.ShipmentPlanProcessor] (vert.x-eventloop-thread-0) {\"type\": \"ibm.gse.eda.vaccine.orderoptimizer.VaccineOrderCloudEvent\", \"specversion\": \"1.0\", \"source\": \"Vaccine Order Optimizer engine\", \"id\": \"5cf26c04-866b-46a2-886f-8df29c4dff35\", \"time\": \"2021-04-14T18:39:06.880652+00:00\", \"dataschema\": \"https://raw.githubusercontent.com/ibm-cloud-architecture/vaccine-order-optimizer/master/data/avro/schemas/shipment_plan.avsc\", \"datacontenttype\": \"application/json\", \"data\": {\"Shipments\": [{\"Type\": \"Delivery\", \"From\": \"Beerse, Belgium\", \"DepartureDate\": \"2021-04-14T00:00:00.000Z\", \"To\": \"London, England\", \"ArrivalDate\": \"2021-04-16T00:00:00.000Z\", \"Qty\": 150, \"Reefers\": 2, \"Cost\": 42}]}}\n18:39:10 INFO  [ib.gs.ed.va.do.ShipmentPlanProcessor] (vert.x-eventloop-thread-0) ibm.gse.eda.vaccines.domain.ShipmentPlan@2238d6d1\n`}</code></pre>\n    <p>{`that represents the optimized shipment plan for the new vaccine order we created and the event that should get displayed in the SHIPMENT PLANS page of the Vaccine Order Manager for Postgres user interface. And this would close the deep dive on how the entire Vaccine Order Management and Optimization use case works in detail.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}