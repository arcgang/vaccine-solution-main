{"version":3,"sources":["webpack:///./src/pages/solution/orderms/index.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","AnchorLinks","AnchorLink","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-solution-orderms-index-mdx-50105124a4ebfb051234.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/vaccine-solution-main/vaccine-solution-main/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`This microservice manages vaccine orders for a world wide demand and distribution. This is an example of using `}<a parentName=\"p\" {...{\n        \"href\": \"https://quarkus.io\"\n      }}>{`Quarkus`}</a>{`, microprofile `}<a parentName=\"p\" {...{\n        \"href\": \"https://smallrye.io/smallrye-reactive-messaging/smallrye-reactive-messaging/2/concepts.html\"\n      }}>{`Reactive Messaging`}</a>{`, `}<a parentName=\"p\" {...{\n        \"href\": \"https://debezium.io/documentation/reference/integrations/outbox.html\"\n      }}>{`Debezium outbox quarkus extension`}</a>{` with Debezium `}<a parentName=\"p\" {...{\n        \"href\": \"https://debezium.io/documentation/reference/connectors/postgresql.html\"\n      }}>{`change data capture  for Postgresl`}</a>{` to Kafka. The database is Postgresql, the service uses Hibernate ORM with Panache. `}</p>\n    <p>{`The DevOps is supported by Git Action and then gitops repository.`}</p>\n    <AnchorLinks mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Overview</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Build and deploy to OpenShift</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Demonstration script</AnchorLink>\n    </AnchorLinks>\n    <h2>{`Overview`}</h2>\n    <p>{`This project implements a very simple event driven microservice to support the Create, Read, Update, of vaccine orders. This implementation highlights the following capabilities and patterns:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Quarkus reactive microservice using Microprofile 3.x - reactive messaging extension to consume Vaccine lot shipment plans`}</li>\n      <li parentName=\"ul\">{`Postgresql with Hibernate ORM with `}<a parentName=\"li\" {...{\n          \"href\": \"https://quarkus.io/guides/hibernate-orm-panache\"\n        }}>{`Quarkus Panache`}</a></li>\n      <li parentName=\"ul\">{`Quarkus Debezium Outbox pattern to get create OrderEvents while writing to the main VaccineOrderEntity table`}</li>\n      <li parentName=\"ul\">{`Integrate a Kafka Connector with Debezium change data capture table updates on the OrderEvents table.`}</li>\n    </ul>\n    <p>{`In term of business scenario, a sale representative uses his mobile device or web browser to enter information about a vaccine order to be shipped to a given country or a province within a country at given date for a given quantity: `}</p>\n    <p>{` `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1152px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"49.65277777777777%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQoz32Qz07CQBDG+1xK1LsPoXjSRzDevUFMjPFPd7vt4hHhVbiacATagInGtqJd6OfOtJQi6ia/ZHZm9ptvx2k0Wzg4aVfsW/aabewctf5kt6Rx3OL+w7MrhmJHej4IUePuwYWQqryrqu7anPJ9nF/e4vTiGjf3HjxV1FY9TkdrMJ01UgoEQQCtAyhlH3ke9wSBz9Cwe+Fxz+PqXanjUHITDdcVLKKUdSklhJBWXMO37sghDSHornmQrt47RWItSE3SipAYiVJcv//MUT9R/Kh0SMFgMMBwOMRkMtkgDENEUYjRaITxeLxVJ6IoQrfb5WHVl6fTKRaLBbZOnsPkm6nf+vr9PruuBMnJcrlElmUwxvAjionnMMXnl4HhnMFHmnIPkVlyO7TX660FaQez2aw0lOO/Q3UaUstsOyRB2tF8Pkccx0iSpILudThvHRa1BC+v73iLU7vDJ97hN8OGf480N/YLAAAAAElFTkSuQmCC')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"order ui\",\n          \"title\": \"order ui\",\n          \"src\": \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/3cbba/order-ui.png\",\n          \"srcSet\": [\"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/7fc1e/order-ui.png 288w\", \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/a5df1/order-ui.png 576w\", \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/3cbba/order-ui.png 1152w\", \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/433df/order-ui.png 1356w\"],\n          \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n    <p>{`The user interface is for demonstration purpose only, and illustrates some standard Vuejs / vuetify components. `}</p>\n    <p>{`The following diagram presents the simple context view of the service deployed on OpenShift, integrated with Kafka, Change data capture and the `}<a parentName=\"p\" {...{\n        \"href\": \"/vaccine-solution-main/solution/orderms/voro-solution/\"\n      }}>{`Vaccine order reefer optimization service`}</a>{`. The integration with this component is using pub/sub via Kafka topics. The integration with Blockchain is not done yet, but it can be seen as the source of truth for the business companies participating to then end to end delivery.  `}</p>\n    <p>{` `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"777px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"54.861111111111114%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACbElEQVQoz2VTS2vUUBTOzj+gO0Hc+wNcuBEENy5cunAngg9ciS6KoCJCEVQqFmlLKa4sVsq0dawbhVYdsdqpTKf0NbXOq5m088jkJrlJ7r35PPd2Kog3fMnNeXw59zsnlgoC+G0PrNndR8uD4iHSmP8DxBHSiEOSD0mE0GMYf/sNoxOfMDb5BaOv59F0WrBCl2FsZAnDgz8w8mIRo0OLcBwGlabgXBCPQKQRJwYsIEJatYaL4+f7cfLSIE5fG8ahU31YLGzBClwPM1NFTE8WkM0sY3amiE47oJQUSSKglIJIJLodz7xrpGTrdAPcePTG4NZABhfvvESlYsOCjChZUZCkSmJIemoIISAl2ekSUoKHCdkkEUr6Vgp7t4sTFx7jyNn7OHruIQ6fuYv1zSqspVUHma8NuJRwsDhpFUcRFBFqYlNlLAxxkiSmgI4X4PbAFPqez+De0DtcfvAK9ZoD6+qzPI5dmcfc8h6cvTYqdtvotF3fRWWnSdUKtLqMfK4hWtmqodzwaC/x36JmWdlcFU+zZRS3m7jeP4GbT6aw/ruO8Y/f8SG/ZuKmcwW8X1gxexZJAgmRUrVSmOZpSKpe0clIw7hHrxDygI4n4DTbyH7Oo1Aqww8Y5hZ+IrdEzXJdQ6RjE5EYrbXGhlT1CCWn2dLCk05+RKNBwnt0ZJf5qNsNrG5sktglVOs7YCHNH42OBuMxVdgj1PdUmTm1FPOQJtRdeuF+CE5kMSVyP4BNJI26jdJGCeurawhZgCjkiChGx+qclAZe6aHXP0Pgw0q9rtkcQPkazIDmyNjsX1toVis9/77vb/xBri6M7H8ACQ8nDVgeUpYAAAAASUVORK5CYII=')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"Deployment view\",\n          \"title\": \"Deployment view\",\n          \"src\": \"/vaccine-solution-main/static/f687ca251b28950f8caa6b410572107d/c53c3/vaccine-order-1.png\",\n          \"srcSet\": [\"/vaccine-solution-main/static/f687ca251b28950f8caa6b410572107d/7fc1e/vaccine-order-1.png 288w\", \"/vaccine-solution-main/static/f687ca251b28950f8caa6b410572107d/a5df1/vaccine-order-1.png 576w\", \"/vaccine-solution-main/static/f687ca251b28950f8caa6b410572107d/c53c3/vaccine-order-1.png 777w\"],\n          \"sizes\": \"(max-width: 777px) 100vw, 777px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n    <p>{`The component writes to the database all the orders received, but also produces records to Kafka via the Outbox pattern and change data capture.`}</p>\n    <p>{`Another view could be a pods view of the solution to deploy. The Debezium change data capture is a Kafka connector.`}</p>\n    <p>{` `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"796px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"53.81944444444444%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACWklEQVQoz3VTW08TQRTe/+Av8NEf4oPRB6OJMSb65KMP1hjlQUgND2isGkNAigEjEjECEZNKqEGricGUKpqlgqXQK9vusi29bfc6u59np7Reoif55psz58w3M2dmBFtrgRltqLsqtsQiMhsStpO7KGUVOG0Njq5Bq9YhpWWUd5Qel7cVtGkctkEwOVzPhWC7LnyTSnV8+1pEcl3Cuighn6+iazlpH6FwDOMznzA1l8Dj2VXcIT8hZpFWdJy9L2J6OUuZHgSHOdRxudM1D4y3e6oKVZVRkCsYnFjEyOx7vIyt4UlkBf3hCGKrScTTdQinlnBtQuRzBZsxlCt1qLUm5/2GxgOWbcMwDZiWAaXaQL5UoZ1SWXIyMsU98lXKbcGwGT7vNFBWmjSL0Q5dhouDz3HoaBBHzoRw+OQQppe+cFHbYZxvTbxD30AUo+E4RsfjGHu0ir7+KIIj0d6pwCy4dFrB72dp5b7hVwg9XUYwvIgHM7GOIC8HcGP4NY5fGENgYA6Bm/Ocj51/iKuhBR43aWFmmvB8QctxcPneAk5cmcS5/mc4fX0KiY3CQS07lsrLiHwU8WEthbeJTc6+L6aLPO5SpmsdCPoDb1aSuHT7BYYmowjcncdUJM4Ta3Wqaa1Gygz/M0Yi/sI9Qd12ejvxfrtpWa3g+48UNlJbSG1nUGvSezQstAyT8IstOu4fgpZuoE3JeqsNg+CzqemoKHuQpRIKmRzSmyk0qjVYbbp1rRPvwtZ1eCTm0ifw6IIFj56G+zcMHXBsejsmlGIB1XIJ/8wjdMc9muPRT/kJkmkZpKhMHC4AAAAASUVORK5CYII=')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"Pods view\",\n          \"title\": \"Pods view\",\n          \"src\": \"/vaccine-solution-main/static/12c09f9e300a816faf3c7b2d3c7719f2/8a22c/pods-map.png\",\n          \"srcSet\": [\"/vaccine-solution-main/static/12c09f9e300a816faf3c7b2d3c7719f2/7fc1e/pods-map.png 288w\", \"/vaccine-solution-main/static/12c09f9e300a816faf3c7b2d3c7719f2/a5df1/pods-map.png 576w\", \"/vaccine-solution-main/static/12c09f9e300a816faf3c7b2d3c7719f2/8a22c/pods-map.png 796w\"],\n          \"sizes\": \"(max-width: 796px) 100vw, 796px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n    <p><strong parentName=\"p\">{`Github repository:`}</strong>{` `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg\"\n      }}>{`Vaccine-order-mgr-pg`}</a></p>\n    <p><strong parentName=\"p\">{`Kafka topics produced to:`}</strong>{` vaccine.public.vaccineorderentity\n`}<strong parentName=\"p\">{`Kafka topics consumed from :`}</strong>{` vaccine-shipment-plans`}</p>\n    <p><strong parentName=\"p\">{`Events produced:`}</strong></p>\n    <p>{`We will simplify the process and aggregate in the following event types:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`orderCreated`}</li>\n      <li parentName=\"ul\">{`orderUpdated`}</li>\n    </ul>\n    <h2>{`Build and deploy to OpenShift`}</h2>\n    <p>{`This microservice is built using maven and Quarkus extensions. We have already pushed the last version of this service on dockerhub, if you do not want to build it. `}</p>\n    <p>{`To build and run locally see the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg\"\n      }}>{`repository main readme`}</a>{` as we have different docker-compose files to run in demonstration mode or in development mode.`}</p>\n    <p>{`In this section we address how to use OpenShift Source to Image to build and deploy the application to OpenShift. The application is using environment variables to access to user, password, URLs to access Postgres and Kafka. We are using Event Streams deployed in Cloud Pak for Integration, but it could work the same with Strimzi. `}</p>\n    <p>{`As an example we created the OpenShift project called “vaccine” with a command: `}<inlineCode parentName=\"p\">{`oc new-project vaccine`}</inlineCode>{`.`}</p>\n    <h3>{`Pre requisites`}</h3>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Clone the source git repository: `}<inlineCode parentName=\"p\">{`git clone https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Deploy a postgres server. The orders are persisted in an external Postgres instance running on Openshift cluster. To do a simple deployment performs the following commands:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`# Define environement variables\nSERVICE_ACCOUNT_NAME=postgres-sa\nDEPLOYMENT_NAME=postgres\nSERVICE_NAME=postgres\nDOCKER_IMAGE=docker.io/postgres:11.6-alpine\nPOSTGRES_PASSWORD=adifficultpasswordtoguess\n\noc create serviceaccount \\${SERVICE_ACCOUNT_NAME}\noc adm policy add-scc-to-user anyuid -n \\${PROJECT_NAME} -z \\${SERVICE_ACCOUNT_NAME}\noc create deployment \\${DEPLOYMENT_NAME} --image=\\${DOCKER_IMAGE}\noc set serviceaccount deployment/\\${DEPLOYMENT_NAME} \\${SERVICE_ACCOUNT_NAME}\noc patch deployment \\${DEPLOYMENT_NAME} --type=\"json\" -p='[{\"op\":\"add\", \"path\":\"/spec/template/spec/containers/0/args\", \"value\":[]},{\"op\":\"add\", \"path\":\"/spec/template/spec/containers/0/args/-\", \"value\":\"-c\"},{\"op\":\"add\", \"path\":\"/spec/template/spec/containers/0/args/-\", \"value\":\"wal_level=logical\"} ]'\noc set env deployment \\${DEPLOYMENT_NAME} POSTGRES_PASSWORD=\\${POSTGRES_PASSWORD}\noc expose deployment \\${DEPLOYMENT_NAME} --port 5432 --name \\${SERVICE_NAME}\n`}</code></pre>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Get an instance of Kafka deployed on OpenShift like `}<a parentName=\"p\" {...{\n            \"href\": \"https://ibm-cloud-architecture.github.io/refarch-eda/use-cases/overview/pre-requisites#install-event-streams-using-operators\"\n          }}>{`IBM Event Streams`}</a>{`…). `}</p>\n      </li>\n    </ul>\n    <h3>{`Define Kafka user and postgres user secrets`}</h3>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Get Kafka user to access Event Streams bootstrap in external route.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc get kafkausers -n eventstreams \n# NAME                                CLUSTER   AUTHENTICATION   AUTHORIZATION\n# app-scram                           eda-dev   scram-sha-512    simple\n# app-tls                             eda-dev   tls              simple\n`}</code></pre>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Get password with: “`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Define a secret manifest with a command like below, or by updating the  `}<a parentName=\"p\" {...{\n            \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg/blob/master/src/main/kubernetes/secrets.yaml\"\n          }}>{`src/main/kubernetes/secrets.yaml`}</a>{` secret file.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc apply -f - <<EOF\napiVersion: v1\nkind: Secret\nmetadata:\n  name: vaccine-order-secrets\ndata:\n   KAFKA_USER: <username-base64-encoded>\n   KAFKA_PASSWORD: <pwd-base64-encoded>\n   QUARKUS_DATASOURCE_PASSWORD: <postgres-user-pwd-base64-encoded>\n   QUARKUS_DATASOURCE_USERNAME: <postgres-user-base64-encoded>\nEOF\n`}</code></pre>\n      </li>\n    </ul>\n    <p>{`The strings in the secret are base64 encoded, so use something like: `}<inlineCode parentName=\"p\">{`echo \"app-scram\" | base64 `}</inlineCode>{`. The password is already encrypted in a secret within the `}<inlineCode parentName=\"p\">{`eventstreams`}</inlineCode>{` project, so use `}<inlineCode parentName=\"p\">{`oc get secret app-scram -n eventstreams -o jsonpath='{.data.password}'`}</inlineCode>{` command.`}</p>\n    <h3>{`Get Event Streams certificates`}</h3>\n    <p>{`For Event Streams get URL of the bootstrap server and the service credentials (TLS certificates) following `}<a parentName=\"p\" {...{\n        \"href\": \"https://ibm-cloud-architecture.github.io/refarch-eda/use-cases/overview/pre-requisites#getting-tls-authentication-from-event-streams-on-openshift\"\n      }}>{`those instructions.`}</a></p>\n    <p>{`If not done before, copy the cluster certificate via the secret to your project (`}<inlineCode parentName=\"p\">{`vaccine`}</inlineCode>{`):`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc get secret eda-dev-cluster-ca-cert -n eventstreams --export -o yaml | oc apply -f -\n`}</code></pre>\n    <h3>{`Define environment variables via ConfigMap`}</h3>\n    <p>{`Modify the config map from `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg/blob/master/src/main/kubernetes/configmap.yaml\"\n      }}>{`src/main/kubernetes/configmap.yaml`}</a>{` with the URL of your Kafka bootstrap server.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: vaccine-order-ms-cm\ndata:\n  KAFKA_BOOTSTRAP_SERVERS: \"light-es-kafka-bootstrap.eventstreams.svc:9092\"\n  KAFKA_SSL_PROTOCOL: \"TLSv1.2\"\n  KAFKA_SSL_TRUSTSTORE_LOCATION: \"/deployments/certs/server/ca.p12\"\n  KAFKA_SSL_TRUSTSTORE_TYPE: \"PKCS12\"\n  SHIPMENT_PLAN_TOPIC: \"vaccine_shipment_plans\"\n  KAFKA_SASL_MECHANISM: SCRAM-SHA-512\n  KAFKA_SECURITY_PROTOCOL: SASL_SSL\n`}</code></pre>\n    <p>{`Those environment variables are used by the application, and configured via the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg/blob/master/src/main/resources/application.properties\"\n      }}>{`src/main/resources/application.properties`}</a>{`. Below is the declaration that defines environment variables from the previously created secrets and configmap.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-properties\"\n      }}>{`quarkus.openshift.env.configmaps=vaccine-order-ms-cm\nquarkus.openshift.env.secrets=vaccine-order-secrets\nquarkus.openshift.env.mapping.KAFKA_SSL_TRUSTSTORE_PASSWORD.from-secret=eda.dev-cluster-ca-cert\nquarkus.openshift.env.mapping.KAFKA_SSL_TRUSTSTORE_PASSWORD.with-key=ca.password\nquarkus.openshift.mounts.es-cert.path=/deployments/certs/server\nquarkus.openshift.secret-volumes.es-cert.secret-name=eda-gse-cluster-ca-cert\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Then proceed with the following command to define the config map into OpenShift:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc apply -f src/main/kubernetes/configmap.yaml\n`}</code></pre>\n      </li>\n    </ul>\n    <h3>{`Deploy the application`}</h3>\n    <p>{`The application uses Quarkus OpenShift extension to create yaml files for OpenShift and deploy the application using source to image capability of OpenShift:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`./mvnw clean package -Dui.deps -Dui.dev -Dquarkus.kubernetes.deploy=true -DskipTests\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`-Dui.deps -Dui.dev`}</inlineCode>{` arguments are used to prepare and build the vue.js app from the `}<inlineCode parentName=\"p\">{`ui`}</inlineCode>{` folder. The packaging build a runner jar and push it to the private image registry in OpenShift.`}</p>\n    <p>{`It can take some seconds to build and deploy: `}<inlineCode parentName=\"p\">{`oc get pods -w`}</inlineCode>{` lets you see the build pods and the running app once the build is done. As we set properties to expose the application, an OpenShift route was created. `}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Be sure to get the Order Microservice URL to access the user interface, using `}<inlineCode parentName=\"p\">{`oc get routes`}</inlineCode>{` on the project. Using your web browser, pointing to this address you should get the UI:`}</p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"23.61111111111111%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA7ElEQVQY032OvU4DMRCE/UBAgfgveAgqHgeh8CdRU/AqgECCgiQU/OUipBxUELrgO599Z3s9WfuIRBNW+jSz41nJYu0ow8bxEJvMOvvlzgALe69Y2h9gkdk5G2H3PMf26RtWD2On7a0cZNg6GfJtxnl7F3PRy39wP5qgy/TfJfofBbq5xNXzGBdPX7jNvnHH3LyMcfn4iWvWWe/hl+h7nEUvEBy0KlBrBXgLgFo4B1kE3zAW5GpeTcr+G+E8QZYVZKGSTmSZkGW7l0pDVQaNdbDOJ4gC/BwEEaHSJqFnmDqpqRvE98jfCSHM/eEUI/1m6MObdHQAAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"ui home\",\n            \"title\": \"ui home\",\n            \"src\": \"/vaccine-solution-main/static/8adfb4a7fecbd26be951ba70b298f157/3cbba/ui-home.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/8adfb4a7fecbd26be951ba70b298f157/7fc1e/ui-home.png 288w\", \"/vaccine-solution-main/static/8adfb4a7fecbd26be951ba70b298f157/a5df1/ui-home.png 576w\", \"/vaccine-solution-main/static/8adfb4a7fecbd26be951ba70b298f157/3cbba/ui-home.png 1152w\", \"/vaccine-solution-main/static/8adfb4a7fecbd26be951ba70b298f157/0b124/ui-home.png 1728w\", \"/vaccine-solution-main/static/8adfb4a7fecbd26be951ba70b298f157/4ea69/ui-home.png 2304w\", \"/vaccine-solution-main/static/8adfb4a7fecbd26be951ba70b298f157/19a13/ui-home.png 2512w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n    </ul>\n    <h3>{`Deploy Debezium CDC connector`}</h3>\n    <p>{`The Event Streams product documentation goes over the tasks to be done, but to summarize them, here are the actions done to deploy the postgres debezium connector:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Start a Kafka connector cluster: We use the custom resource called `}<inlineCode parentName=\"p\">{`KafkaConnectS2I`}</inlineCode>{`, which one instance represent a Kafka connect cluster. Each connector is represented by another custom resource called KafkaConnector. Kafka connect needs the same user access to the Brokers. `}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Event Streams UI has a Toolbox menu with the `}<inlineCode parentName=\"p\">{`Set up a Kafka Connect environment`}</inlineCode>{` where we can download the `}<inlineCode parentName=\"p\">{`KafkaConnectS2I`}</inlineCode>{` configuration. The matching configuration is `}<a parentName=\"p\" {...{\n                \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg/blob/main/environment/cdc/kafka-connect-s2i.yaml\"\n              }}>{`in this file`}</a>{` and uses predefined TLS user and cluster certificate. The cluster name is `}<inlineCode parentName=\"p\">{`connect-cluster`}</inlineCode>{`.`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Modify the bootstrap server and the TLS user to be used. Ensure the user can access any topics.`}</p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Deploy the cluster with: `}<inlineCode parentName=\"p\">{`oc apply -f kafka-connect-s2i.yaml -n eventstreams`}</inlineCode></p>\n          </li>\n          <li parentName=\"ul\">\n            <p parentName=\"li\">{`Validate it via: `}</p>\n            <pre parentName=\"li\"><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`oc get kafkaconnects2i -n eventstreams\noc describe kafkaconnects2i connect-cluster -n eventstreams\n`}</code></pre>\n          </li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Download the postgres plugin archive from `}<a parentName=\"p\" {...{\n            \"href\": \"https://repo1.maven.org/maven2/io/debezium/debezium-connector-postgres/1.4.0.Final/debezium-connector-postgres-1.4.0.Final-plugin.tar.gz\"\n          }}>{`debezium maven repository`}</a>{` and then add the jar files to the `}<inlineCode parentName=\"p\">{`my-plugins\\\\debezium-connector`}</inlineCode>{` folder. We need a subfolder as this connector includes multiple jars. `}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`├── my-plugins\n│   └── debezium-connector\n│       ├── CHANGELOG.md\n│       ├── CONTRIBUTE.md\n│       ├── COPYRIGHT.txt\n│       ├── LICENSE-3rd-PARTIES.txt\n│       ├── LICENSE.txt\n│       ├── README.md\n│       ├── README_ZH.md\n│       ├── debezium-api-1.4.0.Final.jar\n│       ├── debezium-connector-postgres-1.4.0.Final.jar\n│       ├── debezium-core-1.4.0.Final.jar\n│       ├── failureaccess-1.0.1.jar\n│       ├── guava-30.0-jre.jar\n│       ├── postgresql-42.2.14.jar\n│       └── protobuf-java-3.8.0.jar\n└── pg-connector.yaml\n`}</code></pre>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Deploy the connector configuration:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`oc start-build connect-cluster-connect --from-dir ./my-plugins/\noc get builds\n# NAME                        TYPE     FROM             STATUS    STARTED          DURATION\n# connect-cluster-connect-3   Source   Binary@f639186   Running   19 seconds ago   \n# once build is completed... wait to get the 3 kafka connect workers ready\noc get pods -w\n`}</code></pre>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Start the connector: `}<inlineCode parentName=\"p\">{`oc apply -f pg-connector.yaml`}</inlineCode></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Verify it is running: `}<inlineCode parentName=\"p\">{`oc describe kafkaconnector pg-connector`}</inlineCode>{` `}</p>\n      </li>\n    </ul>\n    <h2>{`Demonstration script`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`Connect to the order microservice URL, for example it could look like `}<a parentName=\"li\" {...{\n          \"href\": \"http://vaccineorderms-vaccine.clusternametochangewithyours.containers.appdomain.cloud.\"\n        }}>{`http://vaccineorderms-vaccine.clusternametochangewithyours.containers.appdomain.cloud.`}</a>{` You should reach the home page. Then select Orders tab. `}</li>\n    </ul>\n    <p>{`If there is no order created click on `}<inlineCode parentName=\"p\">{`NEW ORDER`}</inlineCode>{` button `}</p>\n    <p>{` `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1152px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"49.65277777777777%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQoz32Qz07CQBDG+1xK1LsPoXjSRzDevUFMjPFPd7vt4hHhVbiacATagInGtqJd6OfOtJQi6ia/ZHZm9ptvx2k0Wzg4aVfsW/aabewctf5kt6Rx3OL+w7MrhmJHej4IUePuwYWQqryrqu7anPJ9nF/e4vTiGjf3HjxV1FY9TkdrMJ01UgoEQQCtAyhlH3ke9wSBz9Cwe+Fxz+PqXanjUHITDdcVLKKUdSklhJBWXMO37sghDSHornmQrt47RWItSE3SipAYiVJcv//MUT9R/Kh0SMFgMMBwOMRkMtkgDENEUYjRaITxeLxVJ6IoQrfb5WHVl6fTKRaLBbZOnsPkm6nf+vr9PruuBMnJcrlElmUwxvAjionnMMXnl4HhnMFHmnIPkVlyO7TX660FaQez2aw0lOO/Q3UaUstsOyRB2tF8Pkccx0iSpILudThvHRa1BC+v73iLU7vDJ97hN8OGf480N/YLAAAAAElFTkSuQmCC')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"order ui\",\n          \"title\": \"order ui\",\n          \"src\": \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/3cbba/order-ui.png\",\n          \"srcSet\": [\"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/7fc1e/order-ui.png 288w\", \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/a5df1/order-ui.png 576w\", \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/3cbba/order-ui.png 1152w\", \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/433df/order-ui.png 1356w\"],\n          \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n    <p>{`and fill the following data:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`organization: French Government\ndelivery location: Paris\ndelivery date: 2021-01-24\nquantity: 150\npriority: 2\nvaccine type: covid-19\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Verify the data in postgresql: `}</li>\n    </ul>\n    <p>{`Once submitted the data are saved into the postgres DB, with the outbox pattern having created new records in the corresponding Event tables.\nThis can be done using different tools, like `}<inlineCode parentName=\"p\">{`psql`}</inlineCode>{` directly in the pod, or `}<inlineCode parentName=\"p\">{`pgadmin4`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc get pods | grep postgres\noc rsh <postgres pod id>\n# in the shell session within the pod do:\npsql -U postgres\n# in the psql shell, list the table\n\\\\d \n# Look at the content of the main table:\nselect * from public.vaccineorderentity;\n# You should get one new record matching your data\n# Verify outbox pattern works:\nselect * from public.orderevents;\n\nid    |   aggregatetype    | aggregateid | type         | timestamp |payload \nc80.. | VaccineOrderEntity | 1           | OrderCreated | 2021-01-24 03:44:08.131634 | {\"orderID\":1,\"deliveryLocation\":\"Paris\",\"quantity\":150,\"priority\":2,\"deliveryDate\":\"2021-01-24\",\"askingOrganization\":\"French Government\",\"vaccineType\":\"COVID-19\",\"status\":\"OPEN\",\"creationDate\":\"24-Jan-2021 03:44:08\"} | \n`}</code></pre>\n    <p>{`The outbox table of the order events has metadata attributes and then a payload matches the saved record in the orign table.`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Verify the message in the Kafka topic: `}<inlineCode parentName=\"p\">{`vaccine.public.orderevents`}</inlineCode></p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1152px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"38.888888888888886%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABNElEQVQoz2WRTU7DMBCFc2AkVrBixyVg0R0Sd2IBqghJiVv/Jo7txH54nJSmqqUvnsgzz2/GFecch8Mv2gxjHZTkQIrInw3LSildgXX3U4ILCTEmVForcKFwEgbaRkjjoYyD0B5MeHAdMM9zLow3gmdIaI5LXDVNA5lddUeB53eBh90RjzuG+1eGuxeOpzeNkxwQvMNianW3cb1d1WAt+r6HMT3qhqFuT9jXDB+fP/j67tB2EjbnWJtFQ/gvpJpxHG9GUQ3DkMVMSbjMK7cw+exqLDGdEdT60n66cXpxuAoSlEzz8D5A6zxTrRGmqYjR40kpy065zrni0LkRdiRcmfOVQ4qpLYKSqVW6hHbv/foAsXB2S4Qww/n5umWCHNH/MrMFEqbLhBDlXClVYnK7pe9NuegPP/dqFzDDsT8AAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"outbox topic\",\n            \"title\": \"outbox topic\",\n            \"src\": \"/vaccine-solution-main/static/d484d3524e94773d3d9680a190f7841a/3cbba/outbox-topic.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/d484d3524e94773d3d9680a190f7841a/7fc1e/outbox-topic.png 288w\", \"/vaccine-solution-main/static/d484d3524e94773d3d9680a190f7841a/a5df1/outbox-topic.png 576w\", \"/vaccine-solution-main/static/d484d3524e94773d3d9680a190f7841a/3cbba/outbox-topic.png 1152w\", \"/vaccine-solution-main/static/d484d3524e94773d3d9680a190f7841a/b0b66/outbox-topic.png 1586w\"],\n            \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-json\"\n          }}>{`{\"before\":null,\"after\":\n{\"id\":\"c8050bb4-05d8-4270-833c-083995f27848\",\n \"aggregatetype\":\"VaccineOrderEntity\",\n \"aggregateid\":\"1\",\n \"type\":\"OrderCreated\",\n \"timestamp\":1611459848131634,\n \"payload\":\"{\\\\\"orderID\\\\\":1,\\\\\"deliveryLocation\\\\\":\\\\\"Paris\\\\\",\\\\\"quantity\\\\\":150,\\\\\"priority\\\\\":2,\\\\\"deliveryDate\\\\\":\\\\\"2021-01-24\\\\\",\\\\\"askingOrganization\\\\\":\\\\\"French Government\\\\\",\\\\\"vaccineType\\\\\":\\\\\"COVID-19\\\\\",\\\\\"status\\\\\":\\\\\"OPEN\\\\\",\\\\\"creationDate\\\\\":\\\\\"24-Jan-2021 03:44:08\\\\\"}\",\n\"tracingspancontext\":\"#Sun Jan 24 03:44:08 GMT 2021\\\\n\"},\n\"source\":{\"version\":\"1.4.0.Final\",\n\"connector\":\"postgresql\",\"name\":\"vaccine\",\n\"ts_ms\":1611712125168,\"snapshot\":\"last\",\n\"db\":\"postgres\",\"schema\":\"public\",\"table\":\"orderevents\",\n\"txId\":1371,\"lsn\":41341808,\"xmin\":null},\"op\":\"r\",\"ts_ms\":1611712125173,\"transaction\":null}\n`}</code></pre>\n      </li>\n    </ul>\n    <h3>{`REST APIs`}</h3>\n    <p>{`The REST end points this service expose are in the OpenApi doc below, but not all operations are fully implemented yet.`}</p>\n    <p>{` `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1152px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"82.29166666666666%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACCklEQVQ4y6XUyW/TQBTHcf//EgfEAU4VEkI9FIR6QKgqB1rUqgvdkjRkq9skjuM4i/exZ+z4y8StClzowuGjZ41mfn6jJ9tIEsHu3jGHR2ccHZ9xUbvk284+xz/OOTg84fveIVvbO5yc1vSeU13r9Mwb+rN94nROrgqklCilKkYmFc5CEESCKEm1rKqxyEjSjDTVa1Fc1dXB5bKgLEvKAh3wd1gVGAtJZ5wwmArcIKvMQk3Xha55rrT8/sAq4FZ2H/Z7TWJI3aHMlxTLkkIfzJW6C1HV85+bb6l/MpTeNOqbDMweIokpCt1N9eZb+RNVV96u+3y58Bi4Ee4iZh7KZzN8PYSNZsL6peC8P6NuWgy8BMsXz2J4ach7+ytv7S1qrkl7PGSUzLHiOcNo9mRGkEg+6Q43dIfN4YJ236EznOqph0zjHFdfw40kEz3xSfCwKvBDrWD9fEnLjjFtnys74GYS6dDknu0rxo9QBW42Mj7WM1pWQM+a0Rst6Aym/Lx2dMcubf089lcdSJwH6KEo3tVhrQYNS9C1PLp2iOUpJjE4UVmxg0J3+TAjTULsxmfs2iYT6wrb6jMe9fFmY0LfJfTu+I9jqNhjufeKcvcFQecIp1tnftVA2F1y9xo1MVHu4xly4ZG+WUO+fE2wf4DT6jBttghNE2lZZMPhkxjV9xlHWogUArn6q/yHX485txu4FmjyAAAAAElFTkSuQmCC')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"4\",\n          \"title\": \"4\",\n          \"src\": \"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/3cbba/openapi.png\",\n          \"srcSet\": [\"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/7fc1e/openapi.png 288w\", \"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/a5df1/openapi.png 576w\", \"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/3cbba/openapi.png 1152w\", \"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/7dc98/openapi.png 1200w\"],\n          \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}