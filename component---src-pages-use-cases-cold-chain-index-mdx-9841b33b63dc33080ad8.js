(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"01cS":function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return r})),a.d(t,"default",(function(){return s}));a("91GP"),a("rGqo"),a("yt8O"),a("Btvt"),a("RW0V"),a("q1tI");var n=a("7ljp"),i=a("013z");a("qKvR");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var r={},c={_frontmatter:r},l=i.a;function s(e){var t=e.components,a=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,["components"]);return Object(n.b)(l,o({},c,a,{components:t,mdxType:"MDXLayout"}),Object(n.b)("p",null,"The vaccine lots need to be kept at a constant temperature for a period of time. The sensor telemetry data coming from the refrigerated shipping containers is processed to assess cold-chain violations."),Object(n.b)("p",null,"The solution for this use case includes streaming telemetry events, a stateful microservice to implement aggregation & alarm generation, and integration with a microservice to log issues against the refrigerated shipping container."),Object(n.b)("h2",null,"Components involved in this use case"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",o({parentName:"li"},{href:"https://github.com/ibm-cloud-architecture/vaccine-reefer-simulator"}),"Vaccine Refrigerator container Simulator")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",o({parentName:"li"},{href:"https://github.com/ibm-cloud-architecture/vaccine-monitoring-agent"}),"Vaccine Reefer Monitoring Agent")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",o({parentName:"li"},{href:"https://ibm.github.io/event-streams/"}),"IBM Event Streams")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",o({parentName:"li"},{href:"/vaccine-solution-main/analyze/ws-ml-dev/"}),"Anomaly detection scoring service")," with WatsonML and anomaly detection built in Cloud Pak for Data")),Object(n.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(n.b)("span",o({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"47.56944444444444%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACH0lEQVQoz22SzUtUYRTGZxntoz8jcBXUMtpFe1v0N4TtbBEtg7LIoJWIiwwEg6IM0kWakZaJA+Zops6Hzsydb++d9368H7/OvVOC1YFz3/se3vOc5zzn5HAJJBHZGYc41T/xuHdM1B24CQIIB3Hjy7+cez/KLK9s8flLgVXxQN7nbo/PMTa9xMjjN+R3j0jNitfrPs+n8sxMbzI1scHHxSLWOaJIo8Ikezf6dI4Lw2NcG5lkaPghhcIBufNX73H91gTnrtzl5fwaOgxJYk275fNqNs/8u63sXFs9wGiNMUaAbQbotbvsFquUqg129w+Jj4Vhud6i6rWo1Jtoa1FKCYs4S3DC1aVfAej3A3qSkJqxBi3A/1ioyJ26RyHFUoWjozqJTqQ1hddoSJGIKI7RwjAt8LcZKWjkvRVdc+Y3gySJ6YrYC183WRctUlMC8nZ5Xdi3s3uiB8zL9Q7bRS/zUq096MNoARSGqRopoHOGXl/x+tMGK1t7WKvx+31mF79R8poUay26QUgURly8+YQzl0Y5e/kOQzceEQlzQRwwtFkLjr7o1guUJCn2y4d8L+ywWdimLIL7YcxOpYPXUTQbTZ7NLHF/8j0PphYYf/GBOAW0J4ADU9pyLCsRyIQPDmsyOY+fAlypVPE7PoGsSqTtfxQki1kBTHc092eJU3QjkzTSJrI66cQQDV2thtkuYLpdnMScCtDBaU9zXeDjZKi/AIgq4ryKFqh9AAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",o({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Architecture diagram",title:"Architecture diagram",src:"/vaccine-solution-main/static/9ae6b01995a56cbae62949c479a4d6ad/3cbba/cc-components.png",srcSet:["/vaccine-solution-main/static/9ae6b01995a56cbae62949c479a4d6ad/7fc1e/cc-components.png 288w","/vaccine-solution-main/static/9ae6b01995a56cbae62949c479a4d6ad/a5df1/cc-components.png 576w","/vaccine-solution-main/static/9ae6b01995a56cbae62949c479a4d6ad/3cbba/cc-components.png 1152w","/vaccine-solution-main/static/9ae6b01995a56cbae62949c479a4d6ad/0b124/cc-components.png 1728w","/vaccine-solution-main/static/9ae6b01995a56cbae62949c479a4d6ad/3fef4/cc-components.png 1808w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(n.b)("p",null,Object(n.b)("em",{parentName:"p"},"*","The reefer manager is not done yet")),Object(n.b)("h2",null,"Understand the components"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"The Reefer simulator is a python Flask app, which supports simple API to control the Refrigerator container simulation. It is described in ",Object(n.b)("a",o({parentName:"li"},{href:"/vaccine-solution-main/solution/reefer-iot/"}),"this note"),", also see next section to deploy it on OpenShift."),Object(n.b)("li",{parentName:"ul"},"The Monitoring Agent is a Quarkus app, with Kafka Streams, reactive messaging to monitor the cold chain with stateful operations. It also call the Anomaly detection service. Implementation details can be read in ",Object(n.b)("a",o({parentName:"li"},{href:"/vaccine-solution-main/solution/cold-monitoring/"}),"this note"),"."),Object(n.b)("li",{parentName:"ul"},"The model to assess if the refrigerator container has issue. To develop the model we need to ",Object(n.b)("a",o({parentName:"li"},{href:"/vaccine-solution-main/solution/cp4d/"}),"get the telemetry data")," in Cloud Pak for data, and then perform feature engineering and use AutoAI for developing the model as described in ",Object(n.b)("a",o({parentName:"li"},{href:"/vaccine-solution-main/analyze/ws-ml-dev/"}),"this note"),". As an alternate to collect the data, it is possible to directly ",Object(n.b)("a",o({parentName:"li"},{href:"/vaccine-solution-main/solution/cp4d/eventStream/"}),"integrate with Kafka topic")," and then save it as csv or in a datalake.")),Object(n.b)("h2",null,"Run on OpenShift"),Object(n.b)("h3",null,"Pre-requisites"),Object(n.b)("p",null,Object(n.b)("strong",{parentName:"p"},"IMPORTANT:")," if you are sharing the IBM Event Streams instance with other people for this tutorial, you may want to add a unique suffix to the name of the resources to be created next, such as topics, projects, etc. If so, make sure you provide the appropriate name for these throught the rest of the tutorial."),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Create the following artifacts in the ",Object(n.b)("inlineCode",{parentName:"p"},"eventstreams")," namespace on your OpenShift cluster (",Object(n.b)("em",{parentName:"p"},"note: if you happened to have an existing IBM Event Streams instance on a different namespace already, you donâ€™t need to create an new one but make sure you use the appropriate namespace name throughout the rest of the tutorial"),"). We will refer to this namespace as ",Object(n.b)("inlineCode",{parentName:"p"},"YOUR_EVENT_STREAMS_NAMESPACE")," throughout this tutorial:"),Object(n.b)("ol",{parentName:"li"},Object(n.b)("li",{parentName:"ol"},"Create an EventStreams instance ",Object(n.b)("em",{parentName:"li"},"(via the ",Object(n.b)("a",o({parentName:"em"},{href:"https://ibm.github.io/event-streams/installing/installing/#install-an-event-streams-instance"}),"Event Streams Custom Resource"),")"),"."),Object(n.b)("li",{parentName:"ol"},"Create a ",Object(n.b)("a",o({parentName:"li"},{href:"https://ibm.github.io/event-streams/security/managing-access/#managing-access-to-kafka-resources"}),"Kafka User with SCRAM-based credentials"),", as required by the ",Object(n.b)("a",o({parentName:"li"},{href:"https://github.com/ibm-cloud-architecture/vaccine-reefer-simulator#application-deployment"}),"Vaccine Reefer Simulator"),"."),Object(n.b)("li",{parentName:"ol"},"Create a ",Object(n.b)("a",o({parentName:"li"},{href:"https://ibm.github.io/event-streams/security/managing-access/#managing-access-to-kafka-resources"}),"Kafka User with TLS-based credentials"),", as required by the ",Object(n.b)("a",o({parentName:"li"},{href:"https://github.com/ibm-cloud-architecture/vaccine-monitoring-agent#create-a-tls-user"}),"Vaccine Monitoring Agent"),"."),Object(n.b)("li",{parentName:"ol"},"Create two ",Object(n.b)("a",o({parentName:"li"},{href:"https://ibm.github.io/event-streams/getting-started/creating-topics/"}),"Kafka Topics"),". One for the container telemetries events and another for the vaccine cold-chain violation alert events. These topics will be refered as ",Object(n.b)("inlineCode",{parentName:"li"},"YOUR_TELEMETRIES_TOPIC")," and ",Object(n.b)("inlineCode",{parentName:"li"},"YOUR_REEFER_TOPIC")," respectively throughout this tutorial. For the instructions on this tutorial, we will assume the names for these two topics to be ",Object(n.b)("inlineCode",{parentName:"li"},"coldchain-telemetry")," and ",Object(n.b)("inlineCode",{parentName:"li"},"coldchain-reefers")," respectively."))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Create a new project that will be used for the deployment of all other components. This will be refered as ",Object(n.b)("inlineCode",{parentName:"p"},"YOUR_PROJECT_NAME")," throughout the rest of this tutorial. For the instructions on this tutorial, We will assume the name for the project is ",Object(n.b)("inlineCode",{parentName:"p"},"coldchain"),".")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",o({parentName:"p"},{href:"https://cloud.ibm.com/docs/openshift?topic=openshift-openshift-cli"}),"OpenShift CLI")," on your local environment.")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",o({parentName:"p"},{href:"https://stedolan.github.io/jq/"}),"jq")," on your local environment.")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Get a cloud pak for data deployed on OpenShift Cluster")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Use a Terminal and the oc cli. If you want to access the code source you can clone the two main repositories of this solution:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"git clone https://github.com/ibm-cloud-architecture/vaccine-reefer-simulator\ngit clone https://github.com/ibm-cloud-architecture/vaccine-monitoring-agent\n")))),Object(n.b)("h3",null,"Deploy the Vaccine Reefer Simulator"),Object(n.b)("p",null,"To get more detail of this Python Flask application ",Object(n.b)("a",o({parentName:"p"},{href:"/vaccine-solution-main/solution/reefer-iot/"}),"read this note"),"."),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Export your project name and ensure you are working in it from now on via the following commands:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"export PROJECT_NAME=<YOUR_PROJECT_NAME>\noc project ${PROJECT_NAME}\n")),Object(n.b)("p",{parentName:"li"},"where"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<YOUR_PROJECT_NAME>")," is the name for the project you created in the previous ",Object(n.b)("a",o({parentName:"li"},{href:"#pre-requisites"}),"pre-requisites")," section where all the components for this cold chain solution will be deployed into."))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Export the value of your Event Streams cluster name and the namespace it is installed on to environment variables:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"export CLUSTER_NAME=<YOUR_CLUSTER_NAME>\nexport EVENTSTREAMS_NS=<YOUR_EVENT_STREAMS_NAMESPACE>\n")),Object(n.b)("p",{parentName:"li"},"where "),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},Object(n.b)("inlineCode",{parentName:"p"},"<YOUR_EVENT_STREAMS_NAMESPACE>")," is the name where you installed your IBM Event Streams instance in the ",Object(n.b)("a",o({parentName:"p"},{href:"#pre-requisites"}),"pre-requisites")," section above.")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},Object(n.b)("inlineCode",{parentName:"p"},"<YOUR_CLUSTER_NAME>")," is the name of your IBM Event Streams cluster which can be found with the following ",Object(n.b)("inlineCode",{parentName:"p"},"oc")," command:   "),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"$ oc get eventstreams -n ${EVENTSTREAMS_NS}\nNAME           STATUS\ndevelopment    Ready\n"))))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Create a ConfigMap named ",Object(n.b)("inlineCode",{parentName:"p"},"reefer-simul-cm")," to hold the configuration for our Vaccine Reefer Simulator component with the following ",Object(n.b)("inlineCode",{parentName:"p"},"oc")," command:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"oc create configmap reefer-simul-cm \\\n--from-literal=KAFKA_CERT=/app/certs/ca.crt \\\n--from-literal=KAFKA_MAIN_TOPIC=<YOUR_TELEMETRY_TOPIC> \\\n--from-literal=KAFKA_BROKERS=<YOUR_KAFKA_BOOTSTRAP_EXTERNAL_ADDRESS>\n")),Object(n.b)("p",{parentName:"li"},"where"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<YOUR_TELEMETRY_TOPIC>")," is the name of the topic that will get the container telemetries events you created in the ",Object(n.b)("a",o({parentName:"li"},{href:"#pre-requisites"}),"pre-requisites")," section."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<YOUR_KAFKA_BOOTSTRAP_EXTERNAL_ADDRESS>")," is your IBM Event Streams ",Object(n.b)("strong",{parentName:"li"},"External")," cluster bootstrap address presented to you during the creation of your SCRAM-based KafkaUser you went through in the ",Object(n.b)("a",o({parentName:"li"},{href:"#pre-requisites"}),"pre-requisites")," section. You can get that value again by executing the following ",Object(n.b)("inlineCode",{parentName:"li"},"oc")," command:",Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),'oc get route -n ${EVENTSTREAMS_NS} ${CLUSTER_NAME}-kafka-bootstrap -o jsonpath="{.status.ingress[0].host}:443"\n'))))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Create a Secret named ",Object(n.b)("inlineCode",{parentName:"p"},"reefer-simul-secret"),", which will hold your SCRAM Kafka User credentials you created in the ",Object(n.b)("a",o({parentName:"p"},{href:"#pre-requisites"}),"pre-requisites")," section, with the following ",Object(n.b)("inlineCode",{parentName:"p"},"oc")," command:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"oc create secret generic reefer-simul-secret \\\n--from-literal=KAFKA_USER=<YOUR_SCRAM_KAFKA_USER_USERNAME> \\\n--from-literal=KAFKA_PASSWORD=<YOUR_SCRAM_KAFKA_USER_PASSWORD>\n")),Object(n.b)("p",{parentName:"li"},"where"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<YOUR_SCRAM_KAFKA_USER_USERNAME>")," is the name you gave in the ",Object(n.b)("a",o({parentName:"li"},{href:"#pre-requisites"}),"pre-requisites")," section when you generated the SCRAM credentials. The generation of the SCRAM credential created a KafkaUser object behind the scenes with the name you specified. If you donâ€™t remember that name or you want to verify it, you can use the following ",Object(n.b)("inlineCode",{parentName:"li"},"oc")," command:",Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"$ oc get kafkausers -n ${EVENTSTREAMS_NS}\nNAME                    CLUSTER         AUTHENTICATION   AUTHORIZATION\nvaccine-scram           development     scram-sha-512    simple\n"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<YOUR_SCRAM_KAFKA_USER_PASSWORD>")," is the password that IBM Event Streams generated for the KakfkaUser that got created behind the scenes when you generated the SCRAM credentials in the ",Object(n.b)("a",o({parentName:"li"},{href:"#pre-requisites"}),"pre-requisites")," section. You can retrieve that password with the following ",Object(n.b)("inlineCode",{parentName:"li"},"oc")," command:",Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"oc get secret <YOUR_SCRAM_KAFKA_USER_USERNAME> -n ${EVENTSTREAMS_NS} -o jsonpath='{.data.password}' | base64 -D\n"))))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Copy the server-side public TLS certificate of your IBM Event Streams instance to your local project so that the Vaccine Reefer Simulator application is able to establish secure connection with your IBM Event Streams instance:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"oc get secret ${CLUSTER_NAME}-cluster-ca-cert -n ${EVENTSTREAMS_NS} -o json | jq -r '.metadata.name=\"kafka-cluster-ca-cert\"' | jq --arg project_name \"${PROJECT_NAME}\" -r '.metadata.namespace=$project_name' | oc apply -f -\n")),Object(n.b)("p",{parentName:"li"},Object(n.b)("em",{parentName:"p"},"*","Note that we are copying and renaming the certificate in a single command to minimize the need for editing deployment documents. That is, we are providing the server-side TLS certificate in the secret the Vaccine Reefer Simulator and the Vaccine Monitoring Agent microservices are expecting to find it."))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Deploy Vaccine Reefer Simulator microservice components (application plus a service and a route to make it accessible) via the following ",Object(n.b)("inlineCode",{parentName:"p"},"oc apply")," command:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"oc apply -f https://raw.githubusercontent.com/ibm-cloud-architecture/vaccine-reefer-simulator/master/config/app-deployment.yaml\n")),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You should see the following output:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"service/vaccine-reefer-simulator created\nroute.route.openshift.io/vaccine-reefer-simulator created\nodeployment.apps/vaccine-reefer-simulator created\n"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can verify the deployment state with the following ",Object(n.b)("inlineCode",{parentName:"p"},"oc")," command:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"oc get pods\nNAME                                       READY   STATUS    RESTARTS   AGE\nvaccine-reefer-simulator-7dcfcf5cb-4nvl7   1/1     Running   0          5m55s\n")),Object(n.b)("p",{parentName:"li"},"or the via the Openshift console:"),Object(n.b)("span",o({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(n.b)("span",o({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"81.59722222222221%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABzklEQVQ4y4VTi46DIBD0/3/ymrZq6xufKMjcDicNbbyUZLKIMOzsDkmvDRrVo64qTNOERWvM84xlWTzCXMv6tm2w1uJzOOf8OmNy6QdcshzZ/Y40TVE+H8jSOx4PiVmG2+3m52VZoq5rf2kgITh4kZKkSJpo3r5orOuKdbOopx3t7GSTkbXNZ8z5OE6w++4JdomfIDljshoDLQdXuYWxHleo2cDIujWMlCnxkHtGFgi95GEDin5B0XQChbpT+MkqFN0EIwlt1kEb5+OfVJzWMMhPeIjZjeMg9ZEGSBPySqEZNwzaol/+MK32dfA/eMLVd3VCORq0Uti+7z25Falyd5zHVzIvmQTsYt003h7O7S8LhE370Yz/hovq4Alpl+fziUZI6bfYf6PYpDku49on6I64jgl9lR4epOcYKzE5L1JKifwRjfgvfDMG8Jukb4TDMOB6vSLPc7Rt67Ppus5vJvi/KIoXQcAZoZfM+tDp9F1s0BiUxT0xuD88xbg5CX/wFr4YyidC/UL8Nt4Ie5F0l7rx3VIa5cZgCShvkFqyYWevJB4Js2CH+fAZWcflyDZ0kXUMjeA8gN9BwVuXmR3J6EdmxM6GQyTl9xn4/5PwF4hC3aVz7EURAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",o({parentName:"span"},{className:"gatsby-resp-image-image",alt:"2",title:"2",src:"/vaccine-solution-main/static/f3fc1ae9b34805809a0a97fc8a98d63e/3cbba/simul-app-ocp.png",srcSet:["/vaccine-solution-main/static/f3fc1ae9b34805809a0a97fc8a98d63e/7fc1e/simul-app-ocp.png 288w","/vaccine-solution-main/static/f3fc1ae9b34805809a0a97fc8a98d63e/a5df1/simul-app-ocp.png 576w","/vaccine-solution-main/static/f3fc1ae9b34805809a0a97fc8a98d63e/3cbba/simul-app-ocp.png 1152w","/vaccine-solution-main/static/f3fc1ae9b34805809a0a97fc8a98d63e/0b124/simul-app-ocp.png 1728w","/vaccine-solution-main/static/f3fc1ae9b34805809a0a97fc8a98d63e/5c6d2/simul-app-ocp.png 1944w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "))),Object(n.b)("p",{parentName:"li"},"*",Object(n.b)("em",{parentName:"p"},"Note: if you want to build, clone ",Object(n.b)("a",o({parentName:"em"},{href:"https://github.com/ibm-cloud-architecture/vaccine-reefer-simulator"}),"the repository")," and follows the readme."))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Get the route to access the Vaccine Reefer Simulator application with the ",Object(n.b)("inlineCode",{parentName:"p"},"oc get routes")," command."))),Object(n.b)("h3",null,"Deploy the Vaccine Monitoring Agent"),Object(n.b)("p",null,"To get more detail of this Java Quarkus microprofile application ",Object(n.b)("a",o({parentName:"p"},{href:"/vaccine-solution-main/solution/cold-monitoring/"}),"read this note"),". The project repository is in this ",Object(n.b)("a",o({parentName:"p"},{href:"https://github.com/ibm-cloud-architecture/vaccine-monitoring-agent"}),"GitHub repository"),". Follow the steps below to get the Vaccine Monitoring Agent microservice deployed on your OpenShift cluster:"),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Ensure you are working inside the correct project via the following ",Object(n.b)("inlineCode",{parentName:"p"},"oc")," command:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"oc project ${PROJECT_NAME}\n"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Export the value of your TLS-based KafkaUser name and a unique identifier for the reources to be created into your OpenShift cluster as environment variables so that the following steps in this section can make use of these."),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"export TLS_USER=<YOUR_TLS_USER>\nexport YOUR_SUFFIX=<UNIQUE_IDENTIFIER>\n")),Object(n.b)("p",{parentName:"li"},"where"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<YOUR_TLS_USER>")," is the name you gave when creating the tls credentials in the ",Object(n.b)("a",o({parentName:"li"},{href:"#pre-requisites"}),"pre-requisites")," section. If you donâ€™t remember the tls KafkaUser you created, you can check it out with the following ",Object(n.b)("inlineCode",{parentName:"li"},"oc")," command:",Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"$ oc get kafkausers -n ${EVENTSTREAMS_NS}\nNAME                  CLUSTER         AUTHENTICATION   AUTHORIZATION\nvaccine-tls           development     tls              simple\n")),Object(n.b)("em",{parentName:"li"},"*","Note that we are copying and renaming the credentials in a single command to minimize the need for editing deployment documents.")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<UNIQUE_IDENTIFIER>")," is a unique identifier of your choice to be used as the suffix for any resource created in OpenShift and IBM Event Streams so that it does not collide with anyone else also completing this tutorial."))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"If not done so already in the previous section where we deployed the Vaccine Reefer Simulator microservice, copy the server-side public certificate of the Event Streams instance to your local project:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"oc get secret ${CLUSTER_NAME}-cluster-ca-cert -n ${EVENTSTREAMS_NS} -o json | jq -r '.metadata.name=\"kafka-cluster-ca-cert\"' | jq --arg project_name \"${PROJECT_NAME}\" -r '.metadata.namespace=$project_name' | oc apply -f -\n")),Object(n.b)("p",{parentName:"li"},Object(n.b)("em",{parentName:"p"},"*","Note that we are copying and renaming the certificate in a single command to minimize the need for editing deployment documents. That is, we are providing the server-side TLS certificate in the secret the Vaccine Reefer Simulator and the Vaccine Monitoring Agent microservices are expecting to find it."))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Copy your TLS-based KafkaUserâ€™s credentials you created in the ",Object(n.b)("a",o({parentName:"p"},{href:"#pre-requisites"}),"pre-requisites")," section to the local namespace with the following ",Object(n.b)("inlineCode",{parentName:"p"},"oc")," command:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"oc get secret ${TLS_USER} -n ${EVENTSTREAMS_NS} -o json | jq -r '.metadata.name=\"tls\"' | jq --arg project_name \"${PROJECT_NAME}\" -r '.metadata.namespace=$project_name' | oc apply -f -\n"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Create a ConfigMap named ",Object(n.b)("inlineCode",{parentName:"p"},"agent-cm")," to hold the configuration for the Vaccine Monitoring Agent microservice with the following ",Object(n.b)("inlineCode",{parentName:"p"},"oc")," command:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"oc create configmap agent-cm \\\n--from-literal=REEFER_TOPIC=<YOUR_REEFER_TOPIC> \\\n--from-literal=TELEMETRY_TOPIC=<YOUR_TELEMETRY_TOPIC> \\\n--from-literal=KAFKA_BOOTSTRAP_SERVERS=${CLUSTER_NAME}-kafka-bootstrap.${EVENTSTREAMS_NS}.svc:9093 \\\n--from-literal=QUARKUS_KAFKA_STREAMS_APPLICATION_ID=cold-chain-agent-${YOUR_SUFFIX} \\\n--from-literal=KAFKA_SECURITY_PROTOCOL=SSL \\\n--from-literal=PREDICTION_ENABLED=<ARE_PREDICTIONS_ENABLED>\n")),Object(n.b)("p",{parentName:"li"},"where"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<YOUR_REEFER_TOPIC>")," is the name of the topic that will get the vaccine cold chain temperature violation alert events that you created in the ",Object(n.b)("a",o({parentName:"li"},{href:"#pre-requisites"}),"pre-requisites")," section."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<YOUR_TELEMETRY_TOPIC>")," is the name of the topic that will get the container telemetries events that you created in the ",Object(n.b)("a",o({parentName:"li"},{href:"#pre-requisites"}),"pre-requisites")," section."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<ARE_PREDICTIONS_ENABLED>")," will be ",Object(n.b)("strong",{parentName:"li"},"true")," or ",Object(n.b)("strong",{parentName:"li"},"false")," depending on whether you completed the ",Object(n.b)("a",o({parentName:"li"},{href:"/vaccine-solution-main/analyze/ws-ml-dev/"}),"Developing the Anomaly Detection Model with Watson Studio")," section or not. If you are not sure, set it to ",Object(n.b)("strong",{parentName:"li"},"false"),"."))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"If you use the ",Object(n.b)("a",o({parentName:"p"},{href:"/vaccine-solution-main/analyze/ws-ml-dev/"}),"Anomaly detection service deployed in Watson ML"),":"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Get user credential to access to cloud pack for data, with the API key."),Object(n.b)("li",{parentName:"ul"},"Get the ANOMALY_DETECTION_URL."),Object(n.b)("li",{parentName:"ul"},"Get the CP4D_AUTH_URL used to get access token."))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Define a secret called ",Object(n.b)("inlineCode",{parentName:"p"},"agent-secrets")," that will hold the credentials and sensitive data for the Vaccine Monitoring Agent to connect to your instance of IBM Event Streams and your Watson ML Anomaly detection model:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"oc create secret generic agent-secrets \\\n--from-literal=ANOMALY_DETECTION_URL=<YOUR_WATSON_ML_ANOMALY_DETECTION_MODEL_URL> \\\n--from-literal=KAFKA_USER=${TLS_USER} \\\n--from-literal=CP4D_USER=<YOUR_CP4D_USER> \\\n--from-literal=CP4D_APIKEY=<YOUR_CP4D_APIKEY>  \\\n--from-literal=CP4D_AUTH_URL=<YOUR_CP4D_AUTH_URL>\n")),Object(n.b)("p",{parentName:"li"},"where"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<YOUR_WATSON_ML_ANOMALY_DETECTION_MODEL_URL>")," is the url to your Watson ML anomaly dectection model."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<YOUR_CP4D_USER>")," is your Cloud Pak for Data username."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<YOUR_CP4D_APIKEY>")," is your Cloud Pak for Data API key."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"<YOUR_CP4D_AUTH_URL>")," is your Cloud Pak for Data IAM authentication and authorization API url.")),Object(n.b)("p",{parentName:"li"},"*",Object(n.b)("strong",{parentName:"p"},"Note:")," If you have not completed the ",Object(n.b)("a",o({parentName:"p"},{href:"/vaccine-solution-main/analyze/ws-ml-dev/"}),"Developing the Anomaly Detection Model with Watson Studio")," section and as a result you donâ€™t have an anomaly detection model deployed to connect to, simply ",Object(n.b)("strong",{parentName:"p"},"use random string values")," for the variables above.")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Deploy Vaccine Monitoring Agent microservice by executing the following ",Object(n.b)("inlineCode",{parentName:"p"},"oc")," command:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"oc apply -f https://raw.githubusercontent.com/ibm-cloud-architecture/vaccine-monitoring-agent/master/src/main/kubernetes/deployment.yml\n")),Object(n.b)("p",{parentName:"li"},"You should see the following output:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"serviceaccount/reefer-monitoring-agent created\nservice/reefer-monitoring-agent created\nrolebinding.rbac.authorization.k8s.io/reefer-monitoring-agent-view created\nimagestream.image.openshift.io/openjdk-11 created\ndeploymentconfig.apps.openshift.io/reefer-monitoring-agent created\nroute.route.openshift.io/reefer-monitoring-agent created\n")))),Object(n.b)("h2",null,"Scenario script"),Object(n.b)("p",null,"Once the solution is up and running, execute the following steps to present an end-to-end demonstration:"),Object(n.b)("h3",null,"Generate vaccine container telemetry events"),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Obtain the Vaccine Reefer Simulatorâ€™s Flasgger UI via the following ",Object(n.b)("inlineCode",{parentName:"p"},"oc")," command:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),'oc get route vaccine-reefer-simulator -o jsonpath="http://{.status.ingress[0].host}"\n'))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Open the above url in your web browser and click on the ",Object(n.b)("strong",{parentName:"p"},"POST ",Object(n.b)("inlineCode",{parentName:"strong"},"/control"))," API in order to expand it."),Object(n.b)("span",o({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(n.b)("span",o({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"97.56944444444444%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAACwklEQVQ4y53U2WoTYRQH8Hke22uXByj0QlCp4kVbqQvuWJSiVJQ+g28gxS42Uh/BK0W9EFKsbdJJZpJJMktm3zJLJn/PN0mIFU2XwI9vnZN85zsTbvriFM6dPY/JyQlMTJzB8usXWF1/i7X3qyh83MTW9gbZHNjA5oc1bBT61gvvUNjewqs3TzG3Mo2p2Qvg6nUJNSIIIkSxBllWci2iqCpUVYOsUF9R8znHdeD5HjxvxHYsWI4Bw9TB7e7xFKiOUrmC8kEVYo2C05j1D3gBlaqY9/mKiLZuIkkSpGl6SDftotvNkBGuqXtQDBd+ECIgnucjjmMAPfR6GXoZ6fX73W6ar43D2X4MJ0jQieL825k4ThBF/35guOd/OJabThiCfbKsN/g1p4Ec59omUoqcZV3KQTc/1qmkLLf0C7/s6jCdEMaA7SdwjsD22F48Qmkz3Q6tReC2qgL2pSbKLRklIugGRIMxIeqDltTy1sjn6qaFFpVLy3XRJKwv+z40wu2oPKwO1VLkwwo9GIEz4juHx0SnOTN04SYBnDiAl4aQrTYEWYLZccHJlg7Z1iFoMlTfhuJZ0EIHbVrMhX+hObauBQPUV3wLsmeiTWOuokqQTAU/JQFlhYraoLcitKHF9GA0RuyO9uR9Lw/OmVmIz8UfWFx6iaXlFTxcfI5b957g9v3FY2P77z56hl2B7wf89P0rbtx8gIU7jzFP7ZVr87h8dY4M23HmcWlmFjPXF7DDlyiHHRs1U8W3YhHF0j7qlMuarkBy2sego+GOqIENTuv0L0CP6IYpD8PLYOOjsADsQobyS5ENHUEakRhe0hnLJ24UQjENqPSGVRsSfvE8Gir93bW1vMw4kY6736yhqstUnHT9wcmwihjS2JElOnupVcdeQ0S1LZ844J/yHLaoIKtaC7zazFVIg5LNaoptUMPja9MzvwGdHqHJTvoH5QAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",o({parentName:"span"},{className:"gatsby-resp-image-image",alt:"flasgger1",title:"flasgger1",src:"/vaccine-solution-main/static/506e15c37cf72087ba026f16d3f0fe55/3cbba/flasgger1.png",srcSet:["/vaccine-solution-main/static/506e15c37cf72087ba026f16d3f0fe55/7fc1e/flasgger1.png 288w","/vaccine-solution-main/static/506e15c37cf72087ba026f16d3f0fe55/a5df1/flasgger1.png 576w","/vaccine-solution-main/static/506e15c37cf72087ba026f16d3f0fe55/3cbba/flasgger1.png 1152w","/vaccine-solution-main/static/506e15c37cf72087ba026f16d3f0fe55/0b124/flasgger1.png 1728w","/vaccine-solution-main/static/506e15c37cf72087ba026f16d3f0fe55/4ea69/flasgger1.png 2304w","/vaccine-solution-main/static/506e15c37cf72087ba026f16d3f0fe55/18798/flasgger1.png 2498w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Click on the ",Object(n.b)("strong",{parentName:"p"},"Try it out")," button on the top right corner.")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"In the ",Object(n.b)("strong",{parentName:"p"},"Edit Value")," text box, update the values of the records accordingly:"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"containerID"),": ",Object(n.b)("inlineCode",{parentName:"li"},"C01")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"nb_of_records"),": ",Object(n.b)("inlineCode",{parentName:"li"},"500")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"product_id"),": ",Object(n.b)("inlineCode",{parentName:"li"},"covid-19")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"simulation"),": ",Object(n.b)("inlineCode",{parentName:"li"},"temperature"))),Object(n.b)("span",o({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(n.b)("span",o({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"79.51388888888889%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACDklEQVQ4y5WUSXPTQBCF9f9vUAQIOfAXKC5cCFQIy4nCKWLHie3Y2qWZ0WizNLJl+9EjecGpAtuHr95Mq6etntaz8c79iWu/D09ymJLBjMIG68nakjvVMT+X4CoDUylYScQMPBUwvFggzGJktUI2V5guKuSEXv+fEunsLyKGlGoZfc+EHfm4dybojAcYMrfBzSO4U0ls9ABlAp8wzITByyI4CW9aCfIYnFoQ1M6p6HOGX8YIVIKozDB+nGBi2WBSYr5cYLaoGz3EJq+YV3SHhYRXxIirKYqyxFQpFJXaJh1T9EnBuCmoL3axWu4lnYI+M90rSJOrVyvMF7tfro+kzV2u35Am5NF0BA0mT0TTupwVkFpPRKgcRlBKyDqDHVq4v/sNizng9KkwivMqbmAaFW/3/4SGawxlhB6P8csO8OPBRMf00fU4bgOBHpPoEn1OiHat0fEeb7mjsxodH8kYxoduiGcffVx85bj4JvCG9Pya4fxLy+urEG+/8wa91rFXVwHOPvt4Sby4dHH2ycXzSx/vbxgMllLLeQK1nKGsK0K1umhRRFG3bPaZovsiuwo6O7ImGNsmQrIek2S9sQxgkUuGoQuH7BasLeSvp6/x1+zvk228eUbDDUiNR+FjEgXoDB9wMxpgxD04NHGdpIsHxQHKnYaNl1P6m0rpDYXXMOBuo3Yu4JKLHJr4sWjX/QHw6riSb1eBJAAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",o({parentName:"span"},{className:"gatsby-resp-image-image",alt:"flasgger2",title:"flasgger2",src:"/vaccine-solution-main/static/b5cc2a82dda8bf994daf732268082526/3cbba/flasgger2.png",srcSet:["/vaccine-solution-main/static/b5cc2a82dda8bf994daf732268082526/7fc1e/flasgger2.png 288w","/vaccine-solution-main/static/b5cc2a82dda8bf994daf732268082526/a5df1/flasgger2.png 576w","/vaccine-solution-main/static/b5cc2a82dda8bf994daf732268082526/3cbba/flasgger2.png 1152w","/vaccine-solution-main/static/b5cc2a82dda8bf994daf732268082526/0b124/flasgger2.png 1728w","/vaccine-solution-main/static/b5cc2a82dda8bf994daf732268082526/4ea69/flasgger2.png 2304w","/vaccine-solution-main/static/b5cc2a82dda8bf994daf732268082526/99764/flasgger2.png 2474w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Click ",Object(n.b)("strong",{parentName:"p"},"Execute"),"."))),Object(n.b)("h3",null,"Analyze simulated reefer telemetry data"),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Obtain your IBM Event Streams Console UIâ€™s url via the following ",Object(n.b)("inlineCode",{parentName:"p"},"oc")," command:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),'oc get route -n ${EVENTSTREAMS_NS} ${CLUSTER_NAME}-ibm-es-ui -o jsonpath="https://{.status.ingress[0].host}"\n'))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Open your IBM Event Streams Console UI by pointing your browser to the above url.")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Click on ",Object(n.b)("strong",{parentName:"p"},"Topics")," from the left navigation menu and select your ",Object(n.b)("inlineCode",{parentName:"p"},"YOUR_TELEMETRY_TOPIC")," you created in the ",Object(n.b)("a",o({parentName:"p"},{href:"#pre-requisites"}),"pre-requisites")," section from the topic list.")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Explore the messages tab and the individual telemetry records emitted by the Vaccine Reefer Simulator component."),Object(n.b)("span",o({parentName:"li"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(n.b)("span",o({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"58.68055555555556%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABn0lEQVQoz5WTfWrbQBDFdZ70JrYrktbGcQPB0MOUFkpulAsE8gUN/SMJMU5DLVtayVrtlyy/zmwSZxs7mAgeu1pmfvNmtIo+7Oxgf3+AweBFw+EQvV7Pq9vtIo7jreI4jo96/QFmWYHx+B7pbIYZaTqdommWeM/zHB0dHH6FUpKkICuN8UOCotQwxkLTee0sRTdYLh9TeA3FKFsvoShMOwK2OjHu/zwgSSbkLkUmCkjlMJcWSaYwFQZpYWCtI26zBgzFXUWdj7u4uxt5aZnh+CzH5+85vhxJ9H9KxN8kPv1QOLtRqI1EmmYrp+tNE3BvbxdVJVGWJbVd4W8icPprhMvfY5xfjXBycYur6wlEIcml8aOp69ojtNZe4TiiVqtFwApSSsznc5qdeqq4oPlpVKUAGkd7hzzPfWwI5Pf/gO12ewV8dKloFo1P4r0giHM1JRtfMExeNRvM8U3gYrHwe3bFcGOMd7Tt2QoUQnigtdbfT47lc15fi4tuBLL1EOhofgzNssxffI4rimJNzFkDPn81dhk65AJNcA83/i10/g8TA2Qp5rOeqwAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",o({parentName:"span"},{className:"gatsby-resp-image-image",alt:"messages",title:"messages",src:"/vaccine-solution-main/static/5a47eb9d8adb6210dba3c043e150012d/3cbba/messages.png",srcSet:["/vaccine-solution-main/static/5a47eb9d8adb6210dba3c043e150012d/7fc1e/messages.png 288w","/vaccine-solution-main/static/5a47eb9d8adb6210dba3c043e150012d/a5df1/messages.png 576w","/vaccine-solution-main/static/5a47eb9d8adb6210dba3c043e150012d/3cbba/messages.png 1152w","/vaccine-solution-main/static/5a47eb9d8adb6210dba3c043e150012d/0b124/messages.png 1728w","/vaccine-solution-main/static/5a47eb9d8adb6210dba3c043e150012d/4ea69/messages.png 2304w","/vaccine-solution-main/static/5a47eb9d8adb6210dba3c043e150012d/3c788/messages.png 2504w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "))),Object(n.b)("h3",null,"Analyze generated cold-chain violations"),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Click ",Object(n.b)("strong",{parentName:"p"},"Topics")," from the left navigation menu and select the topic that matches the ",Object(n.b)("inlineCode",{parentName:"p"},"reefer-topic")," value.")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Explore the messages tab and the observed vaccine cold-chain violation alert events.")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"The reefer container information contained in this topic have been identified as having observed temperatures outside the allowable range more than the allowable number of times, as determined to preserve the state of the vaccine doses contained.")),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"Get the service routes with ",Object(n.b)("inlineCode",{parentName:"p"},'oc get route reefer-monitoring-agent -o jsonpath="http://{.status.ingress[0].host}"'))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"You may go to the service API at the ",Object(n.b)("inlineCode",{parentName:"p"},"<URL>/swagger-ui/")," and use the interactive query to see the state of the container ",Object(n.b)("inlineCode",{parentName:"p"},"C01"),":"),Object(n.b)("p",{parentName:"li"}," ",Object(n.b)("span",o({parentName:"p"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}}),"\n      ",Object(n.b)("span",o({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"29.166666666666668%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAA2UlEQVQY042Qy2oCQRBF+/8/xYjJxoUbP8AkmwiCuBSVhOl3z3T19AzX6jYDSUgwi0MVxa3XFfPlGm+7A5zzaKSCUhqSiZHQ9z1SSvcpuhiRrIXQPsK2hHEcMQwDD8nI+UYZ+C+KlvgAKSFO5wu8VnUDJULTNAgh8EAW8vbpSuKGu7BWlPfa0H42TY3fX6I/Bv62SOxOHWbPBo+vGosXjSeOq62peaHUHzYK+6NBFxysdey3gzGGv5E1/4r4kAbvysPHAbbr4bqMlnKNE5ahlKvHxdspFjt+1q6TUc0TE/CmYwAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",o({parentName:"span"},{className:"gatsby-resp-image-image",alt:"3",title:"3",src:"/vaccine-solution-main/static/aca97b068746e55db8da6b4ff92f06c5/3cbba/test-iquery.png",srcSet:["/vaccine-solution-main/static/aca97b068746e55db8da6b4ff92f06c5/7fc1e/test-iquery.png 288w","/vaccine-solution-main/static/aca97b068746e55db8da6b4ff92f06c5/a5df1/test-iquery.png 576w","/vaccine-solution-main/static/aca97b068746e55db8da6b4ff92f06c5/3cbba/test-iquery.png 1152w","/vaccine-solution-main/static/aca97b068746e55db8da6b4ff92f06c5/b5ea2/test-iquery.png 1318w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    ")),Object(n.b)("p",{parentName:"li"}," The response may look like:"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",o({parentName:"pre"},{}),'{\n "alreadyReportedColdChainViolation": false,\n "maxRecordToKeep": 25,\n "maxTemperature": -9,\n "maxTemperatureRegistered": -20,\n "maxViolationAllowed": 10,\n "reeferID": "C10",\n "temperatureList": [\n   -49.92182102,\n   -49.22471643,\n   -50.9776016,\n   -31.07841667,\n   -28.75859987,\n   -32.18018047,\n   -31.04312727,\n   -28.70898255,\n   -32.03926825,\n   -31.86666432,\n   -30.40963273,\n   -49.07404188\n ],\n "tooManyViolations": false,\n "violatedTemperatureCount": 0\n}\n')))),Object(n.b)("h3",null,"Anomaly detection"),Object(n.b)("p",null,"If you have deployed the anomaly detection model to Watson ML and configured the monitoring agent to call this entity, then the reefer topic will contain new message about potential issue on this refrigerator container. The downstream ",Object(n.b)("inlineCode",{parentName:"p"},"reefer manager service")," will assess the number of time this refrigerator was flagged as adnormal, and will trigger a business process in BPM. See ",Object(n.b)("a",o({parentName:"p"},{href:"/vaccine-solution-main/solution/bpm/"}),"this note")," for the process application implementation detail."),Object(n.b)("p",null,Object(n.b)("em",{parentName:"p"},"note that the process application needs to be updated and the reefer manager service implemented to get the end to end scenario covered")),Object(n.b)("h3",null,"Clearing the project"),Object(n.b)("p",null,"To delete the different resources do the following:"),Object(n.b)("pre",null,Object(n.b)("code",o({parentName:"pre"},{className:"language-shell"}),"oc delete cm agent-cm\noc delete cm reefer-simul-cm\noc delete secret agent-secrets\noc delete secret reefer-simul-secret\noc delete deployment vaccine-reefer-simulator\noc delete deploymentconfig reefer-monitoring-agent\noc delete project coldchain\n")))}s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-use-cases-cold-chain-index-mdx-9841b33b63dc33080ad8.js.map