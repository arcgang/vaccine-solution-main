{"version":3,"sources":["webpack:///./src/pages/use-cases/order/index.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-use-cases-order-index-mdx-d6c0730ed652e497cff5.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/vaccine-solution-main/vaccine-solution-main/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`The vaccine order fullfilment is a complex problem to address as we need to optimize the shipment plan according to the demand and the constraints. A deep dive to the Operational Research problem is described in `}<a parentName=\"p\" {...{\n        \"href\": \"/vaccine-solution-main/solution/orderms/voro-solution/\"\n      }}>{`this note`}</a>{`.\nIn this use case / lab you will learn how to integrate with Kafka using the Outbox pattern, and Debezium to capture change to the postgresql table, how to integrate an Operational Research / advanced analytics component in an event-driven architecture which acts on new order events, to improve the shipment plan, how to deploy those component using GitOps approach, and finally how to use Quarkus and microprofile reactive messaging.`}</p>\n    <h2>{`Target Audiences`}</h2>\n    <p>{`You will be greatly interested by the subjects addressed in this use case if you are:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`an architect,`}</strong>{` as you will get a deeper understanding on how all the components work together, and how to adopt event-driven approach to this problem which is mostly seen as a batch processing in traditional It architecture.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`a developer,`}</strong>{` as you will get a broader view of the solution end-to-end, as well as insight into practices to reuse during your future implementations.`}</li>\n    </ul>\n    <h2>{`The what`}</h2>\n    <p>{`In this scenario we want to demonstrate the order entry with an event-driven microservice, and the integration with an event driven linear programming stateful function. The scenario addresses the following features:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Create Order(s) using a simple user interface as an order manager will do after interacting with the country health care request.`}</li>\n      <li parentName=\"ul\">{`Validate the `}<a parentName=\"li\" {...{\n          \"href\": \"https://ibm-cloud-architecture.github.io/refarch-eda/patterns/intro/#transactional-outbox\"\n        }}>{`transactional outbox pattern`}</a>{` works to get OrderCreated, OrderUpdated or OrderCancelled Events created into a dedicated table in Postgresql`}</li>\n      <li parentName=\"ul\">{`Validate how `}<a parentName=\"li\" {...{\n          \"href\": \"https://debezium.io/documentation/reference/1.4/connectors/postgresql.html\"\n        }}>{`Debezium Change Data Capture`}</a>{` for Postgresql as a Kafka connector, produces OrderEvents from the table to Kafka `}<inlineCode parentName=\"li\">{`orders`}</inlineCode>{` topic.`}</li>\n      <li parentName=\"ul\">{`Integrate with the `}<a parentName=\"li\" {...{\n          \"href\": \"\"\n        }}>{`Shipment plan optimization`}</a>{` to get the updated shipment plan as events.`}</li>\n    </ul>\n    <h3>{`Components involved in this use case`}</h3>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg\"\n          }}>{`Vaccine Order Service`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Postgres DB`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Debezium for change data capture on the outbox table`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Kafka using Strimzi or `}<a parentName=\"p\" {...{\n            \"href\": \"https://ibm.github.io/event-streams/\"\n          }}>{`event streams`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-order-optimizer\"\n          }}>{`Vaccine Order Reefer Optimization Service`}</a></p>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"777px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"54.861111111111114%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACbElEQVQoz2VTS2vUUBTOzj+gO0Hc+wNcuBEENy5cunAngg9ciS6KoCJCEVQqFmlLKa4sVsq0dawbhVYdsdqpTKf0NbXOq5m088jkJrlJ7r35PPd2Kog3fMnNeXw59zsnlgoC+G0PrNndR8uD4iHSmP8DxBHSiEOSD0mE0GMYf/sNoxOfMDb5BaOv59F0WrBCl2FsZAnDgz8w8mIRo0OLcBwGlabgXBCPQKQRJwYsIEJatYaL4+f7cfLSIE5fG8ahU31YLGzBClwPM1NFTE8WkM0sY3amiE47oJQUSSKglIJIJLodz7xrpGTrdAPcePTG4NZABhfvvESlYsOCjChZUZCkSmJIemoIISAl2ekSUoKHCdkkEUr6Vgp7t4sTFx7jyNn7OHruIQ6fuYv1zSqspVUHma8NuJRwsDhpFUcRFBFqYlNlLAxxkiSmgI4X4PbAFPqez+De0DtcfvAK9ZoD6+qzPI5dmcfc8h6cvTYqdtvotF3fRWWnSdUKtLqMfK4hWtmqodzwaC/x36JmWdlcFU+zZRS3m7jeP4GbT6aw/ruO8Y/f8SG/ZuKmcwW8X1gxexZJAgmRUrVSmOZpSKpe0clIw7hHrxDygI4n4DTbyH7Oo1Aqww8Y5hZ+IrdEzXJdQ6RjE5EYrbXGhlT1CCWn2dLCk05+RKNBwnt0ZJf5qNsNrG5sktglVOs7YCHNH42OBuMxVdgj1PdUmTm1FPOQJtRdeuF+CE5kMSVyP4BNJI26jdJGCeurawhZgCjkiChGx+qclAZe6aHXP0Pgw0q9rtkcQPkazIDmyNjsX1toVis9/77vb/xBri6M7H8ACQ8nDVgeUpYAAAAASUVORK5CYII=')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"vaccine order 1\",\n            \"title\": \"vaccine order 1\",\n            \"src\": \"/vaccine-solution-main/static/f687ca251b28950f8caa6b410572107d/c53c3/vaccine-order-1.png\",\n            \"srcSet\": [\"/vaccine-solution-main/static/f687ca251b28950f8caa6b410572107d/7fc1e/vaccine-order-1.png 288w\", \"/vaccine-solution-main/static/f687ca251b28950f8caa6b410572107d/a5df1/vaccine-order-1.png 576w\", \"/vaccine-solution-main/static/f687ca251b28950f8caa6b410572107d/c53c3/vaccine-order-1.png 777w\"],\n            \"sizes\": \"(max-width: 777px) 100vw, 777px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span>\n      </li>\n    </ul>\n    <p><em parentName=\"p\">{`The blockchain integration is not done yet`}</em></p>\n    <p>{`To have a deeper understanding of the order service read `}<a parentName=\"p\" {...{\n        \"href\": \"/vaccine-solution-main/solution/orderms/#overview\"\n      }}>{`this overview section`}</a>{`. For the Vaccine order reefer optimization service `}<a parentName=\"p\" {...{\n        \"href\": \"/vaccine-solution-main/design/voro/\"\n      }}>{`the design article`}</a>{` details the optimization approach, while the `}<a parentName=\"p\" {...{\n        \"href\": \"/vaccine-solution-main/solution/orderms/voro-solution/#overview\"\n      }}>{`solution article`}</a>{` goes over the service implementation details.`}</p>\n    <h2>{`Deploy to OpenShift`}</h2>\n    <p>{`We propose to use gitops to deploy the Kafka, Postgres and the different services of this solution in few `}<inlineCode parentName=\"p\">{`oc`}</inlineCode>{` commands.`}</p>\n    <h3>{`Pre-requisites`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`You need:`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`docker and docker compose on your laptop to run locally or build image`}</li>\n          <li parentName=\"ul\">{`Java 11`}</li>\n          <li parentName=\"ul\">{`git client `}</li>\n          <li parentName=\"ul\">{`Get access to an OpenShift cluster with Cloud Pak for integration and event streams installed.`}</li>\n        </ul></li>\n    </ul>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"https://cloud.ibm.com/docs/openshift?topic=openshift-openshift-cli\"\n          }}>{`OpenShift CLI`}</a>{` on your local environment.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"https://stedolan.github.io/jq/\"\n          }}>{`jq`}</a>{` on your local environment.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Use a Terminal and the oc cli. If you want to access the code source you can clone the two main repositories of this solution:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`git clone https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg\ngit clone https://github.com/ibm-cloud-architecture/vaccine-order-optimization\ngit clone https://github.com/ibm-cloud-architecture/vaccine-gitops\n`}</code></pre>\n      </li>\n    </ol>\n    <h3>{`Deploy Kafka Strimzi and Postgresql`}</h3>\n    <p>{`If you want to get a deep understanding of how the configuration is done see the different `}<inlineCode parentName=\"p\">{`Kustomization.yaml`}</inlineCode>{` files in the `}<inlineCode parentName=\"p\">{`vaccine-gitops`}</inlineCode>{` repository, and see the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/vaccine-gitops\"\n      }}>{`readme file`}</a>{` to deploy a three broker cluster, with Kafka user using TLS authentication, and the Kafka topics needed by the solution. `}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`# login to the OpenShift cluster\noc login ....\n# then deploy the solution\n./scripts/order-mgr-ocp.sh --skip-login\n`}</code></pre>\n    <h3>{`Deploy on OpenShift with Event Streams as Kafka`}</h3>\n    <p>{`See `}<a parentName=\"p\" {...{\n        \"href\": \"/vaccine-solution-main/use-cases/eventstreams\"\n      }}>{`this note`}</a>{` for this type of deployment and the following scripts can be done to automate the steps described in the note:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`# login to the OpenShift cluster\noc login ....\n# then deploy the solution\n./scripts/order-mgr-es-ocp.sh --skip-login\n`}</code></pre>\n    <h2>{`Scenario script`}</h2>\n    <p>{`Once the solution is up and running in your target deployment environment (local or OpenShift) execute the following steps to present an end to end demonstration.`}</p>\n    <h3>{`Validate existing vaccine lot shipment plan`}</h3>\n    <p>{`TBD `}</p>\n    <h3>{`Create an order from the user interface of the Order Service.`}</h3>\n    <p>{`Connect to the order microservice URL, for example it could look like `}<a parentName=\"p\" {...{\n        \"href\": \"http://vaccineorderms-vaccine.clusternametochangewithyours.containers.appdomain.cloud.\"\n      }}>{`http://vaccineorderms-vaccine.clusternametochangewithyours.containers.appdomain.cloud.`}</a>{` You should reach the home page. Then select Orders tab. `}</p>\n    <p>{`If there is no order created click on `}<inlineCode parentName=\"p\">{`NEW ORDER`}</inlineCode>{` button `}</p>\n    <p>{` `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1152px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"49.65277777777777%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQoz32Qz07CQBDG+1xK1LsPoXjSRzDevUFMjPFPd7vt4hHhVbiacATagInGtqJd6OfOtJQi6ia/ZHZm9ptvx2k0Wzg4aVfsW/aabewctf5kt6Rx3OL+w7MrhmJHej4IUePuwYWQqryrqu7anPJ9nF/e4vTiGjf3HjxV1FY9TkdrMJ01UgoEQQCtAyhlH3ke9wSBz9Cwe+Fxz+PqXanjUHITDdcVLKKUdSklhJBWXMO37sghDSHornmQrt47RWItSE3SipAYiVJcv//MUT9R/Kh0SMFgMMBwOMRkMtkgDENEUYjRaITxeLxVJ6IoQrfb5WHVl6fTKRaLBbZOnsPkm6nf+vr9PruuBMnJcrlElmUwxvAjionnMMXnl4HhnMFHmnIPkVlyO7TX660FaQez2aw0lOO/Q3UaUstsOyRB2tF8Pkccx0iSpILudThvHRa1BC+v73iLU7vDJ97hN8OGf480N/YLAAAAAElFTkSuQmCC')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"3\",\n          \"title\": \"3\",\n          \"src\": \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/3cbba/order-ui.png\",\n          \"srcSet\": [\"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/7fc1e/order-ui.png 288w\", \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/a5df1/order-ui.png 576w\", \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/3cbba/order-ui.png 1152w\", \"/vaccine-solution-main/static/034f8a378d8e405b0e5e9ccbc47e6bce/433df/order-ui.png 1356w\"],\n          \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n    <p>{`and fill the following data:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`organization: Japan Government\ndelivery location: Tokyo\ndelivery date: 2021-01-24\nquantity: 150\npriority: 2\nvaccine type: covid-19\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Verify the data in postgresql: `}</li>\n    </ul>\n    <p>{`Once submitted the data are saved into the postgres DB, with the outbox pattern having created new records in the corresponding `}<inlineCode parentName=\"p\">{`OrderEvents`}</inlineCode>{` tables.\nWe can verify the tables content using different tools, like `}<inlineCode parentName=\"p\">{`psql`}</inlineCode>{` directly in the pod, or using `}<inlineCode parentName=\"p\">{`pgadmin4`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`oc get pods | grep postgres\noc rsh <postgres pod id>\n# in the shell session within the pod do:\npsql -U postgres\n# in the psql shell, list the table\n\\\\d \n# Look at the content of the main table:\nselect * from public.vaccineorderentity;\n# You should get one new record matching your data\n# Verify outbox pattern works:\nselect * from public.orderevents;\n\nid    |   aggregatetype    | aggregateid | type         | timestamp |payload \nc80.. | VaccineOrderEntity | 1           | OrderCreated | 2021-01-24 03:44:08.131634 | {\"orderID\":1,\"deliveryLocation\":\"Tokyo\",\"quantity\":150,\"priority\":2,\"deliveryDate\":\"2021-01-24\",\"askingOrganization\":\"Japan Government\",\"vaccineType\":\"COVID-19\",\"status\":\"OPEN\",\"creationDate\":\"24-Jan-2021 03:44:08\"} | \n`}</code></pre>\n    <p>{`The outbox table of the order events has metadata attributes and then a payload matches the saved record in the orign table.`}</p>\n    <h3>{`Verify the message in the Kafka topic: `}<inlineCode parentName=\"h3\">{`vaccine.public.orderevents`}</inlineCode></h3>\n    <p>{` `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1152px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"38.888888888888886%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABNElEQVQoz2WRTU7DMBCFc2AkVrBixyVg0R0Sd2IBqghJiVv/Jo7txH54nJSmqqUvnsgzz2/GFecch8Mv2gxjHZTkQIrInw3LSildgXX3U4ILCTEmVForcKFwEgbaRkjjoYyD0B5MeHAdMM9zLow3gmdIaI5LXDVNA5lddUeB53eBh90RjzuG+1eGuxeOpzeNkxwQvMNianW3cb1d1WAt+r6HMT3qhqFuT9jXDB+fP/j67tB2EjbnWJtFQ/gvpJpxHG9GUQ3DkMVMSbjMK7cw+exqLDGdEdT60n66cXpxuAoSlEzz8D5A6zxTrRGmqYjR40kpy065zrni0LkRdiRcmfOVQ4qpLYKSqVW6hHbv/foAsXB2S4Qww/n5umWCHNH/MrMFEqbLhBDlXClVYnK7pe9NuegPP/dqFzDDsT8AAAAASUVORK5CYII=')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"5\",\n          \"title\": \"5\",\n          \"src\": \"/vaccine-solution-main/static/d484d3524e94773d3d9680a190f7841a/3cbba/outbox-topic.png\",\n          \"srcSet\": [\"/vaccine-solution-main/static/d484d3524e94773d3d9680a190f7841a/7fc1e/outbox-topic.png 288w\", \"/vaccine-solution-main/static/d484d3524e94773d3d9680a190f7841a/a5df1/outbox-topic.png 576w\", \"/vaccine-solution-main/static/d484d3524e94773d3d9680a190f7841a/3cbba/outbox-topic.png 1152w\", \"/vaccine-solution-main/static/d484d3524e94773d3d9680a190f7841a/b0b66/outbox-topic.png 1586w\"],\n          \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\"before\":null,\"after\":\n{\"id\":\"c8050bb4-05d8-4270-833c-083995f27848\",\n \"aggregatetype\":\"VaccineOrderEntity\",\n \"aggregateid\":\"1\",\n \"type\":\"OrderCreated\",\n \"timestamp\":1611459848131634,\n \"payload\":\"{\\\\\"orderID\\\\\":1,\\\\\"deliveryLocation\\\\\":\\\\\"Paris\\\\\",\\\\\"quantity\\\\\":150,\\\\\"priority\\\\\":2,\\\\\"deliveryDate\\\\\":\\\\\"2021-01-24\\\\\",\\\\\"askingOrganization\\\\\":\\\\\"French Government\\\\\",\\\\\"vaccineType\\\\\":\\\\\"COVID-19\\\\\",\\\\\"status\\\\\":\\\\\"OPEN\\\\\",\\\\\"creationDate\\\\\":\\\\\"24-Jan-2021 03:44:08\\\\\"}\",\n\"tracingspancontext\":\"#Sun Jan 24 03:44:08 GMT 2021\\\\n\"},\n\"source\":{\"version\":\"1.4.0.Final\",\n\"connector\":\"postgresql\",\"name\":\"vaccine\",\n\"ts_ms\":1611712125168,\"snapshot\":\"last\",\n\"db\":\"postgres\",\"schema\":\"public\",\"table\":\"orderevents\",\n\"txId\":1371,\"lsn\":41341808,\"xmin\":null},\"op\":\"r\",\"ts_ms\":1611712125173,\"transaction\":null}\n`}</code></pre>\n    <h3>{`REST APIs`}</h3>\n    <p>{`The REST end points this service expose are in the OpenApi doc below, but not all operations are fully implemented yet.`}</p>\n    <p>{` `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1152px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"82.29166666666666%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACCklEQVQ4y6XUyW/TQBTHcf//EgfEAU4VEkI9FIR6QKgqB1rUqgvdkjRkq9skjuM4i/exZ+z4y8StClzowuGjZ41mfn6jJ9tIEsHu3jGHR2ccHZ9xUbvk284+xz/OOTg84fveIVvbO5yc1vSeU13r9Mwb+rN94nROrgqklCilKkYmFc5CEESCKEm1rKqxyEjSjDTVa1Fc1dXB5bKgLEvKAh3wd1gVGAtJZ5wwmArcIKvMQk3Xha55rrT8/sAq4FZ2H/Z7TWJI3aHMlxTLkkIfzJW6C1HV85+bb6l/MpTeNOqbDMweIokpCt1N9eZb+RNVV96u+3y58Bi4Ee4iZh7KZzN8PYSNZsL6peC8P6NuWgy8BMsXz2J4ach7+ytv7S1qrkl7PGSUzLHiOcNo9mRGkEg+6Q43dIfN4YJ236EznOqph0zjHFdfw40kEz3xSfCwKvBDrWD9fEnLjjFtnys74GYS6dDknu0rxo9QBW42Mj7WM1pWQM+a0Rst6Aym/Lx2dMcubf089lcdSJwH6KEo3tVhrQYNS9C1PLp2iOUpJjE4UVmxg0J3+TAjTULsxmfs2iYT6wrb6jMe9fFmY0LfJfTu+I9jqNhjufeKcvcFQecIp1tnftVA2F1y9xo1MVHu4xly4ZG+WUO+fE2wf4DT6jBttghNE2lZZMPhkxjV9xlHWogUArn6q/yHX485txu4FmjyAAAAAElFTkSuQmCC')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"4\",\n          \"title\": \"4\",\n          \"src\": \"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/3cbba/openapi.png\",\n          \"srcSet\": [\"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/7fc1e/openapi.png 288w\", \"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/a5df1/openapi.png 576w\", \"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/3cbba/openapi.png 1152w\", \"/vaccine-solution-main/static/57a73d42d89152003de92f0a86f0405f/7dc98/openapi.png 1200w\"],\n          \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n    <h3>{`See how the shipment plan is modified`}</h3>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}